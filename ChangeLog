2004-07-30  Eric Fry <efry at users.sourceforge.net>
	* Added temp_actor flag to Actor.
	* Added armor_class to Actor.
	* Added Actor::all_items_to_container() this method takes the actor's
	  inventory and places it into an object container. This is used for
	  building the dead body object.
	* An actors inventory is placed in their dead body object upon death.
	* Started to add combat logic.
	* Started to add "Move party to castle upon the Avatar's death".
	* Actors will absorb damage with their armor_class. (If they were 
	  assigned any;) ) I'll need to calculate armor class based on combat
	  objects. They will come later.

2004-07-25  Eric Fry <efry at users.sourceforge.net>
	* Added use:balloon_plans. You can now build a balloon.
	* Added use:balloon. You can now use the balloon. The balloon
	  is currently controlled by the player. I will have to fix this
	  when we add wind direction. The balloon should drift along
	  the current wind direction. There are also some rendering issues
	  with the balloon object when moving in front of other multi-tile
	  objects.
	* Objects are now marked as "ok to take" After being added to the
	  player's inventory. Nuvie won't shout "Stealing" every time you drop
	  and pickup an inventory item now.
	* Added Party::remove_obj() this method removes the first instance of
	  a given object type from the party's collective inventory.

2004-07-23  Eric Fry <efry at users.sourceforge.net>
	* Added use:sextant.

2004-07-20  Eric Fry <efry at users.sourceforge.net>
	* Added background color to GUI_TextInput when selected.
	* GUI_TextInput now handles shifted/capslock chars correctly.
	* Added DEL, HOME, END keys to GUI_TextInput class.
	* Added use:rune. :-) You can now free shrines.

2004-07-18  Eric Fry <efry at users.sourceforge.net>
	* Added GUI_TextInput class.
	* You can now add a textual description along with your save game.
	  There are still a few issues with this. You can't type capitals
	  properly. Escape isn't working correctly either. It should return
	  the text to its original state before editing was started.

2004-07-06  Joseph Applegate <sb-x at users.sourceforge.net>
	* Fixed a bug in 84-Stivus' conversation (possibly others) which always
	  gave the "I don't know" answer when asked about "wine". (which just
	  drops to the next answer)

2004-06-17  Eric Fry <efry at users.sourceforge.net>
	* Added some npc_num() calls into ConverseInterpret. HASOBJ and OBJCOUNT
	  weren't handling actor SELF (0xEB) correctly. This should fix some
	  issues with buying ship deeds from Arty and probably other npc
	  dialogs.
	* Added a match_zero_flag to Actor::inventory_get_object() when set to
	  false any quality is matched if a search quality of 0 is entered.
	  Some converse scripts don't care which quaility is returned.

2004-06-15  Eric Fry <efry at users.sourceforge.net>
	* Fixed GUI bug where hidden widgets were being passed events.
	  This fixes the scroller widget top slot bug.
	* Added 16bpp thumbnail support.

2004-06-15  Eric Fry <efry at users.sourceforge.net>
	* Added thumbnails to the save slots.
	  I haven't tested this on little endian machines. I have a feeling
	  it might not work. I also think it might not work correctly on 16bpp
	  displays. I'll have to do some more testing.
	* Fixed up some paths added WIN32 \ delimiter into more paths.
	* Added save description field into save game. Note this isn't editable
	  yet.
	* NOTE! please delete any existing savegames before running this
	  version. As the savefile structure has changed. I'll add a save
	  version check some time in the future. ;-)
	* There is a bug when selecting the top slot in the save dialog
	  scroller widget. I'll look at this soon.

2004-06-14  Eric Fry <efry at users.sourceforge.net>
	* Partial fix for bug [ 932493 ] Can get some objects "Not possible"
	  to get. It is nolonger possible to get sundials or drawers.
	  Objects with a weight of 25.5 stones aren't gettable. It is
	  however still possible to get the dragon parts in the museum. :(
	* ObjManager::get_obj_weight() now checks if an object is stackable
	  before multiplying its weight by its qty value.

2004-06-13  Eric Fry <efry at users.sourceforge.net>
	* Fixed a bug when savedir wasn't defined in the config file.

2004-06-12  Eric Fry <efry at users.sourceforge.net>
	* Added Portrait::load() This method loads the avatar portrait
	  number from the objlist data.
	* Added NuvieFileDesc class.
	* NuvieFileList is now sorted by date modified in decending order.
	* Changed SaveDialog from 6 to 4 slots. Getting ready for save
	  thumbnails.
	* Changed SaveSlot from 20 to 32 pixels high.
	* Nuvie now attempts to load the last latest savegame. If that fails
	  it will attempt to load the original savegame/ If that also fails
	  it will load a new game from the lzobjblk, lzdngblk files.

2004-06-06  Joseph Applegate <sb-x at users.sourceforge.net>
	* One line change to cleanup mouse cursor earlier, preventing GUI
	  corruption by widgets being removed. Fixes [ 908994 ].
	* Player: Set party mode to TRUE if saved party member is 0xFF.
	* Only check Solo Mode in boat usecode when entering the vehicle.

2004-06-02  Willem Jan Palenstijn <wjpalenstijn at users.sourceforge.net>
	* GUI/GUI.*: fix crash when deleting the focused/locked widget

2004-06-02  Eric Fry <efry at users.sourceforge.net>
	* Added party/solo mode loading and saving to Player.

2004-06-01  Eric Fry <efry at users.sourceforge.net>
	* We now call ObjManager::clean() from all load types. This fixes
	  some issues that occured when loading a new game.
	* Fixed Player worktype bug. An actor's worktype is changed to
	  WT_U6_PLAYER (0x2) when set to the player actor. This fixes some
	  issues with ships when loading from a save. You'll need to create
	  a new save while in ship to test this.

2004-05-31  Jonathan Wright <nelno at nelno.com>
    * Fixed compilation error in MapWindow.h (wx defined twice in
      get_movement_direction)
    * fixed Win32 uninitialized variable warning in MsgScroll::Display () in
      MessageScroll.cpp.
    * fixed Win32 uninitialized variable warning in MsgScroll::MsgScroll.
    * in AnimManager.cpp, fixed some cases where unary minus was being
      used on unsigned integers.
    * added <save_dir> section to nuvie.cfg.sample.
    * changed NUVIE_PATH_DELIMITER to '/' for WIN32.  As far as I know, WIN32
      file io functions work perfectly well with '/' instead of '\', unless
      memory fails me and Win95 didn't like this.  I noticed the path delimiters
      in nuvie.cfg were all '/' and they never get converted anyway, so if '/'
      didn't work, everything would already be failing to load on Win32.
    * in SaveManager.cpp, made it auto-create the save game directory if it
      doesn't exist, instead of failing.
    * commented out code that fills in all empty save slots with "New save."
      Just seemed less confusing and aesthetically more pleasing to have that
      only in the first slot.
    * Added custom implementations for opendir, closedir and readdir on Win32
      in dirent.h and dirent.cpp in visualc7 directory.

2004-05-31  Eric Fry <efry at users.sourceforge.net>
	* You can save and load from the slots in the save dialog now. :)
	  I'll have to test this some more. I've used opendir/ readdir
	  and stat calls. I hope these work under Win32. We might need to
	  include a posix opendir wrapper to compile under MSVC.
	* Cleaned temp objects list on ObjManager cleanup.

2004-05-30  Joseph Applegate <sb-x at users.sourceforge.net>
	* Fixed crash from ThrowObject effect caused by a TimedEvent attempting
	  to use callback of deleted effect. Animation is stopped on target.
	* Explosions are slightly larger when hitting walls with cannon fire.
	* PLACEONTABLE tileflag is checked when dropping objects. The check has
	  been moved to MapWindow::can_drop_obj().

2004-05-30  Eric Fry <efry at users.sourceforge.net>
	* Removed absolute paths from XCode project files. Thanks to Fortran
	  Dragon for spotting them.

2004-05-30  Eric Fry <efry at users.sourceforge.net>
	* Some compiler fixes.
	* Reworked save logic to allow a game to be loaded whilst another
	  game is being played. (I haven't finished with this yet.) There
	  are probably more objects that need some resetting when loading
	  a savegame.
	* Fixed a double delete in ~ExplosiveAnim(). It was deleting tiles which
	  were then deleted again in ~TileAnim().
	* Fixed a number of compiler warnings. Unused variables, signed/unsigned
	  conversion warnings etc.
	* Added virtual destructors to some classes that have virtual methods.
	* replaced malloc call with a new call in ObjManager when allocating
	  the ObjTreeNode.
	* Hooked up the "Load" button on the savedialog. It now attempts to load
	  nuvie01.sav when pressed.
	* Removed ObjManager::delete_obj() method. We have an independant
	  function delete_obj() that can delete Objs.

2004-05-29  Joseph Applegate <sb-x at users.sourceforge.net>
	* Added CallBack AnimManager EffectManager & Effect. NuvieAnim and
	  TileAnim could probably stand to have their differences negotiated.
	  A few new Effects & animations have been included. Try powder kegs &
	  cannons.
	* Event: New input modes DROP, DROPTARGET, and DROPCOUNT for dropping
	  object from inventory. Also, added ability to drop objects.
	* Added WAIT mode to block all input until further notice.
	  A new method endWaitMode() will drop out of WAIT_MODE
	  and display the prompt automatically. This is used by Effects, when
	  unpausing from Game::set_pause_flags(). This WAIT_MODE is checked in
	  most functions. We can perform these actions from outside Event.
	* New functions to implement Drop: drop_select(), drop_count(), Drop().
	* Actor: New methods: reduce_hp(), die(), hit(), which calls a
	  HitEffect. Slightly modified a toss_anim() check in ActorManager.
	* U6Actor: Replaced static beg mode with class member beg_mode.
	* Check that coordinates are valid before checking for a mirror
	  next to the actor. (no map wrapping yet)
	* Added calls to hit() and HitEffect() when actor steps on poison,
	  fire, or sleep fields. Cyclops shake the ground when walking.
	* UseCode: Replaced TimedCallback inheritance with CallBack.
	  Added message_obj() to send internal message to an object.
	  Changed the meaning of USE_EVENT return. True is returned if the
	  prompt should be displayed. Removed some displays of the prompt.
	* Added/updated: use_fountain(), use_powder_keg(), use_cannon()
	* InventoryView: Pressing ENTER when Event::DROP_MODE is set will do the
	  appropriate action. Sure would be convenient if these were in one
	  place. :)
	  Fixed cursor positioning error, when calling update_cursor() from
	  init(). It's now called in PlaceOnScreen().
	* Game: set_pause_flags() does more stuff than it used to.
	  Pausing/unpausing can enable or disable certain parts of the engine
	  from here. PAUSE_USER will set Event to WAIT_MODE, for example.
	* The clock can be stopped/started with new function set_active().
	* AnimManager is now a part of MapWindow. It handles the tricky parts
	  of tile animations, that MapWindow could do, but shouldn't have to.
	  MapWindow::drawAnims() calls the AnimManager function.
	* The MapWindow coordinates can now be set with pixel precision. This
	  is accomplished with two extra parameters to moveMap() - the pixel
	  offset from the tile coordinates. New method shiftMapRelative() will
	  update the MapWindow location by relative pixel amounts.
	* AND the map can now be moved automatically with builtin velocity
	  setting, measured in pixels per second. (set_velocity()) This is
	  unused at the moment, but was intended to be used by QuakeEffect.
	* Other new methods: centerMap(), update() for map movement and walk.
	* Added call to DROP action (Event) when dragging something onto the
	  map. This is fine for dragging from inventory, but looks odd when
	  dragging from the map.
	* Map: I improved lineTest a little. Trying to improve it any more broke
	  things so this is all that was changed: Added HitObjects, HitActors
	  and HitLocation checks. LineTestResult can now contain a location
	  which you pass before the test, that will pass if the line hits that
	  location. HitLoc is identical to that if it hit. A "skip" variable
	  is added to the test to allow you to skip a number of coordinates in
	  the line. You can test different segments of the same line that way.
	* MsgScroll: Added request_input() method, allowing any Callback class
	  to request that the next input string be sent to it. Done in
	  set_input_mode().
	* TimedEvent: Fixed timers a bit. Hopefully it's more stable & easy to
	  read. You now have to queue() a timed event to add it to the queue,
	  but this is usually done in the constructor.
	  Added TIMER_* defines. Replaced repeat bool with repeat_count int.
	  Added methods: queue(), dequeue(), stop(), repeat(), set_time().
	* TileManager: Added tile rotation function.
	* Player: Replaced uncontrolled setting with mapwindow_centered.

2004-05-29  Eric Fry <efry at users.sourceforge.net>
	* Fixed a load/save bug. I wasn't cleaning the old y value
	  properly when saving containerized objects. This could
	  cause an object to think its parent container index was + 1024
	  which would send the object off into the void never to be seen again.

2004-05-28  Willem Jan Palenstijn <wjpalenstijn at users.sourceforge.net>
	* various: include case mismatches

2004-05-26  Eric Fry <efry at users.sourceforge.net>
	* Fixed readied inventory when saving.
	* Fixed Party names when loading.
	* Eggs are nolonger saved twice if eggs are shown on map.
	* Added clean up code to ObjManager and Egg manager.
	* Note! There is a bug somewhere in the load/save code where
	  we are losing objects. I'll have a look into this shortly.

2004-05-25  Eric Fry <efry at users.sourceforge.net>
	* More work on saving.
	* You can now save and load a game in the new nuvie save format.
	* Readied objects aren't working correctly after a save/load. I'll
	  fix that soon.
	* At the moment it isn't posible to load a game while in the middle
	  of another game. I need to fix the cleanup routines in a number
	  of classes before we can load a game over the top of another.
	* You can try saving your game by clicking on the save button in
	  the new savedialog window. Press 's' while playing to see the new
	  savedialog.

2004-05-24  Eric Fry <efry at users.sourceforge.net>
	* Work on new Load/Save system.
	* Added SaveGame class.
	* Added facility to load a new save game using the lzobjblk and
	  lzdngblk files.
	* I still need to do a lot of work on the save system before we
	  can save properly.

2004-05-19  Eric Fry <efry at users.sourceforge.net>
	* Fixed a buffer overrun bug in MapWindow::look().
	  Coords where being passed in map format when look() required
	  coords in MapWindow format. This was overreading the
	  tmp_map_buf which was leading to strange results when looking at
	  things on the map.
	* Added ObjManager::set_obj_tile_num() in attempt to hide egg objects
	  on the map. I'm not too sure if we'll end up going this way.

2004-05-18  Eric Fry <efry at users.sourceforge.net>
	* ObjManager: Split the main surface object index into 64 smaller
	  chunk indexes. This should help with saving.
	* Added SaveSlot class. This is the save data widget in the SaveDialog.

2004-05-10  Eric Fry <efry at users.sourceforge.net>
	* Added SaveDialog class.
	* Moved save dialog code into the new SaveDialog class.
	* Hooked up save dialog close callbacks. It is now possible to close
	  the save dialog by clicking the cancel button or pressing the escape
	  key.

2004-05-10  Eric Fry <efry at users.sourceforge.net>
	* Added GUI_ScrollBar, GUI_Scroller and a new generic callback
	  class GUI_CallBack
	* Added SaveManager class. This is still in the early stages
	  of development. You can call up the dialog by pressing the
	  's' key. Be aware that you cannot close the save manager dialog
	  after opening it. I'll fix that when I start on the button
	  callbacks.
	* Changed the background colour of GUI dialogs. This should help them
	  stand out over the game background textures.

2004-04-11  Eric Fry <efry at users.sourceforge.net>
	* Fixed a bug in game loading sequence.
	  ObjManager::loadObjs() must be called before Actors are initialised
	  and the mapwindow is updated.

2004-04-09  Joseph Applegate <sb-x at users.sourceforge.net>
	* UseCode: Disabled the "Telekinesis" usage of shovel. (must be readied)
	  - Added correct descriptions of red & blue potions. They don't do
	    anything yet. [ 891645 ]
	  - Added Torch. It doesn't light the area around you yet! [ 860198 ]
	  - GET & READY events are implemented now.
	  - Added backpack.
	* Backpacks and other containers can now be used as containers, even if
	  they were empty on load. This has forced object loading to be moved to
	  after UseCode is instantiated in Game::loadGame(). Fixes [ 887980 ].
	* New Event mode WAIT now set when talking to someone. It may replace
	  Player::uncontrolled. Fixes [ 841967 ].
	* New methods ObjManager::get_obj_from_stack() and
	  UseCode::destroy_obj().
	* Fixed a crash when eating food by double-clicking it.

2004-04-07  Joseph Applegate <sb-x at users.sourceforge.net>
	* Inventory: The prompt is now displayed after using or looking at any
	  object in the inventory, using keyboard or mouse.
	* Objects are no longer Un/Readied when attempting to LOOK at or USE
	  them with the mouse.
	* Added keyboard USE. Fixes [ 914958 ].

2004-04-05  Joseph Applegate <sb-x at users.sourceforge.net>
	* Fixed bug where you couldn't enter a moongate to the left or right
	  of the Avatar (which doesn't go anywhere). [ 916717 ]
	* Shrines should now correctly check your experience before raising your
	  level. [ 903773 ]

2004-04-04  Eric Fry <efry at users.sourceforge.net>
	* Added GUI_Dialog class. I forgot to add GUI_Dialog class in
	  yesterdays update.

2004-04-03  Eric Fry <efry at users.sourceforge.net>
	* Renamed sound/adplug/player.cpp|h files to
	  sound/adplug/adplug_player.cpp|h This should fix a compiler
	  filename clash when building Nuvie using the autoconf build
	  environment under Mac OS X.
	* Added config variable to GUI class.
	* Added GUI::get_data_dir() This method retrieves the datadir
	  path from the config file.
	* Added GUI_Dialog class. This class replaces GUI_Area as a base
	  class for dialog widgets. It is moveable and has textured borders! :-)

2004-03-27  Joseph Applegate <sb-x at users.sourceforge.net>
	* Added Dungeon Deciet to the teleporter list under "Dungeons". Some
	  destinations there were moved to "Other".
	* Converse: Added variable 0x23: contains previous player input
	  Removed a few old C-strings.
	  Added instructions INPUTSTR (just removed the error message) and
	  INDEXOF. The ENDDATA code is checked for in string lists.

2004-03-25  Eric Fry <efry at users.sourceforge.net>
	* You can now move GUI_Areas around the screen. This means you can
	  drag the quit dialog around. ;-)
	* Added grab_focus/release_focus methods to GUI_Widget.
	* Fixed GUI_Widget focus code to allow mouse events to be directed to
	  the focused widget.
	* Added force_full_redraw() to GUI. Calling this method will cause all
	  widgets to do a full redraw on the next call to GUI::Display().
	* Added GUI:get_gui()

2004-03-16  Eric Fry <efry at users.sourceforge.net>
	* Eggs now spawn at the destination when using the red moon gate.

2004-03-15  Eric Fry <efry at users.sourceforge.net>
	* Fixed Escape. Escape now skips a turn. Pass!
	* Added use:fan. This just prints "You feel a breeze." at the moment.
	  It should change the wind direction. When we implement wind that
	  is. ;-)
	* Renamed variable can_twitch to can_move in the Actor class.
	* Fixed small glitch in the new schedule loading code. Lord British's
	  schedule entries weren't being loaded.
	* Added an Actor 'tile style' enum to U6ActorTypes. This is either
	  single, double, quad, or multitile.
	* Fixed an issue with actors standing on their seats when loading the
	  savegame data.
	* Added U6 Actor alignment enum type. This isn't used yet.
	* Fixed bug with gargoyle and cyclops Actors not loading with the
	  correct frame_n. [ 886425 ] "Actors don't collect all their tiles
	  immediately".

2004-03-14  Eric Fry <efry at users.sourceforge.net>
	* Added custom music selection back in to nuvie. Nuvie can now play
	  any music file supported by SDL_Mixer. We should really write some
	  docs for all this stuff. ;)
	* Incorporated Marc Winterrowd's schedule loading patch. This patch
	  fixes an over run bug in the Actor schedule loading code.
	* The Nuvie project is one year old today!

2004-03-11  Eric Fry <efry at users.sourceforge.net>
	* Added SDL.h include into main.cpp. This should enable stdout/err
	  redirection to file on win32 systems. Thanks to Marc Winterrowd for
	  finding that out.
	* Changed some #include <SDL.h> statements to "SDL.h".

2004-03-10  Eric Fry <efry at users.sourceforge.net>
	* Removed SDL_Init(SDL_INIT_AUDIO) from SoundManager and replaced with
	  SDL_InitSubSystem (SDL_INIT_AUDIO)

2004-03-09  Eric Fry <efry at users.sourceforge.net>
	* Removed redundant screen update call from InventoryWidget.
	* Simplified inventory display clearing logic. Replaced 12 clear calls
	  with 1 clear call.

2004-03-07  Eric Fry <efry at users.sourceforge.net>
	* Added more audio config options. You can now selectively turn off
	  music & sound effects.
	* Added enable_cursors config option. You can now enable/disable mouse
	  cursors.

2004-03-03  Eric Fry <efry at users.sourceforge.net>
	* A small fix to get music working on win32.

2004-03-02  Eric Fry <efry at users.sourceforge.net>
	* Music should play at the correct times in U6. Hornpipe.m when you use
	  a boat, Engage.m when you are in combat mode etc.
	* Fixed a small lockup when not entering any values for alt-214
	  teleport cheat.

2004-02-28  Eric Fry <efry at users.sourceforge.net>
	* Cleaned up schedule loading code.
	* Music stops when in talk mode.
	* Added in_combat_mode flag to Party class.
	* Map related sfx are only updated when the mapwindow changes.

2004-02-24  Willem Jan Palenstijn <wjpalenstijn at users.sourceforge.net>
	* actors/ActorManager.cpp: read all of 'schedule' (was missing 2 bytes)
	* ObjManager.cpp: delete/delete[] mismatch
	* Makefile.common: add U6ObjectTypes.h to source list
	* MsgScroll.cpp, Converse.cpp, ConverseInterpet.cpp:
	  converted several functions/variables to std::strings.
	  I'm fairly sure the new code is functionally equivalent to the old
	  code, but if I broke something, let me know and I'll fix it.

2004-02-23  Eric Fry <efry at users.sourceforge.net>
	* MsgScroll.cpp: Added has_input() This returns true when there is input
	  ready.
	  - get_input() now returns a std::string instead of a private c string.
	    The teleporters menu should work again now.
	* MapWindow.cpp: Renamed tmp_buf to tmp_map_buf.
	  - Added tmp_map_width, tmp_map_height variables.
	  - Increased tmp_map_width to prevent a buffer overrun when checking
	    for blank tiles around objects on boundary tiles.
	    Thanks to Willem for spotting that one.

2004-02-22  Willem Jan Palenstijn <wjpalenstijn at users.sourceforge.net>
	* Cursor.cpp: initialize Cursor::hidden
	* GUI/GUI_Widget.cpp, TileManager.cpp: initialize member vars

2004-02-22  Eric Fry <efry at users.sourceforge.net>
	* Added a version of U6ObjectTypes.h to fix cvs compile.
	* Added Cursor class to XCode build system.

2004-02-21  Joseph Applegate <sb-x at users.sourceforge.net>
	* Eggs no longer try to line up actors of the same type (they might be
	  grouped later by alignment), but try to toss actors within a smaller
	  area. The first actor out always stays at the egg location. The hatch
	  probability is checked for each new actor.
	* Game cursors for U6 are now loaded and displayed. The system cursor is
	  used if this isn't possible. The main functions (such as
	  set_mouse_pointer()) are in Game for now. (removed from screen)
	  Using the mouse pointers in various places (mostly MapWindow).
	* Mouse-walking can be done with left or right mouse buttons (like U6).
	* UseCode: Moved usecode objects to a static array or U6ObjectTypes.
	  This is easier to use and less prone to error. Usecode is referenced
	  by a U6ObjectType pointer instead of index number. The new type has
	  a properties setting we can use for containers.
	  Various has_*code() checks changed to a single has_usecode().
	  Added Game reference to ctors, because game is used frequently in
	  usecode functions.
	* GUI_Widget: MouseEnter/MouseLeave methods called when mouse crosses
	  boundary of a widget (not checking its visible state yet).
	* New utility methods in U6misc: print_bool, print_flags, and SDL_Rect
	  tests.

2004-02-19  Willem Jan Palenstijn <wjpalenstijn at users.sourceforge.net>
	* sound/SongAdPlug.cpp: fixed music slowdown

2004-02-18  Eric Fry <efry at users.sourceforge.net>
	* Adplug should fill the sound buffer at the right rate now.
	  Music should sound better now. But it is now slowing down after
	  about 20 seconds. I'll have to look into this further.

2004-02-16  Willem Jan Palenstijn <wjpalenstijn at users.sourceforge.net>
	* sound/*, Makefile.am: fixed build (include case, include dirs)
	* sound/SoundManager.cpp: show SDL_Mixer error when init fails
	* sound/SoundManager.cpp: changed buffer size to power of two

2004-02-16  Eric Fry <efry at users.sourceforge.net>
	* More work on U6 music. Native songs no longer require the songs.cfg
	  file. Song changes aren't very smooth at the moment. I'll probably
	  add some fading when changing songs.

2004-02-12  Eric Fry <efry at users.sourceforge.net>
	* Added a striped down version of AdPlug into nuvie.
	* Added an audio config section.
	* It is possible to play the original ultima6 .m adlib music tracks
	  in Nuvie.

	  Note! you will have to add entries into a song.cfg file in the
	  sounddir directory. I'll add proper support for native song files
	  soon.
	  The song.cfg file should look somthing like this.

	  Castle;/fullpath_to_u6/BRIT.M;
	  Random;/fullpath_to_u6/ULTIMA.M;
	  Random;/fullpath_to_u6/FOREST.M;
	  Random;/fullpath_to_u6/BOOTUP.M;
	  Random;/fullpath_to_u6/STONES.M;
	  Dungeon;/fullpath_to_u6/DUNGEON.M;
	  Gargoyle;/fullpath_to_u6/GARGOYLE.M;

2004-02-07  Jonathan Wright <nelno at nelno.com>
    * Lots of little changes for VisualC7 and MSCV 6 build:
      - added #pragma warning for forcing value to bool (got this a
        lot in .NET compiles, but it's only a minor performance warning from
        mixing bool and int)
      - Added new include directories for sound and fonts
      - changed some while (1) to for ( ; ; ) so that some "conditional
        expression is constant warnings" go away in MS VC builds.
      - added assignment operator to ConfigNode to fix warning "assignment
        operator cound not be generated" in VC 6 and VC 7.
      - added roundf (float f) functions.  VC 6 and 7 don't define this in
        math.h (C99 standard only?)
      - fixed warning for potential use of uninitialized variable (pW) in
        U6lzw.cpp (looked to me like this would be a problem with any properly
        formatted file, though).

2004-02-07  Willem Jan Palenstijn <wjpalenstijn at users.sourceforge.net>
	* sounds/*: fixed include case and added endlines at end of file
	* configure.ac: added check for SDL_mixer

2004-02-07  Eric Fry <efry at users.sourceforge.net>
	* Fixed the mysterious crash on multitile actors bug [ 890188 ].
	  Party members now dismount from horses before using ladders or caves.
	* Added keyboard commands to quit dialog. [ 874454 ] This was done by
	  adding a new class GUI_YesNoDialog. This still needs a little work.
	* Fixed a bug with ships. The Party would attempt to board the ship
	  even if you didn't have the correct deed.
	* You can now scroll back the MsgScroll buffer when in page break mode.
	  Not just at the input prompt.
	* Added Adrians sound support code. This has been commented out for the
	  time being. We need to add some config switches and support for
	  the original .m adlib music files.

2004-02-02  Eric Fry <efry at users.sourceforge.net>
	* You can now move objects onto tables.
	* Fixed some compiler issues with STL on older versions of gcc.
	  Removed references to vector::at and string::clear
	* Fixed Avatar moving while dragging object bug. [ 888666 ]

2004-01-31  Eric Fry <efry at users.sourceforge.net>
	* Rewrote the MsgScroll Class.
	  - You can now scroll back through the MsgScroll when in input mode.
	    Using the up/down arrow keys.
	  - Clicking on a word while in input mode will add the word to your
	    input.
	  - You can now have multiple fonts per line.
	* Added new font/fontmanager classes to Nuvie. These classes should
	  be used instead of Text. This should help us in supporting MD and SE
	  fonts.
	* Fixed a few compiler warnings. Removed unused variables.
 	* Fixed InventoryWidget bug [ 881842 ] where every inventory slot
	  displayed the empty slot tile.
	* Fixed leak when viewing temp actor portraits.
	* Eggs now spawn on load / level change.

2004-01-30  Joseph Applegate <sb-x at users.sourceforge.net>
	* Added ability to MOVE actors (with the keyboard).
	* Fixed: obvious logical AND/OR error in ConverseInterpret (shortcut
	  left values on the opstack) that caused a freeze.
	  assertion in inventory (don't assume ready-items are in inventory)
	  These were in bugtracker item [ 886597 ].
	  NuvieIOBuffer (write/seek)
	* A few compile fixes for MSVC.
	* Upcoming mouse pointer stuff in but commented out.

2004-01-28  Joseph Applegate <sb-x at users.sourceforge.net>
	* Replaced the quantity loop for things hatched from eggs. My last egg
	"fix" removed that, but now that fix is fixed. You can get multiple
	actors of the same type from an egg again. (check animal pens, shrines)
	* UseCode: Remove IN_CONTAINER bit when dumping objects from containers.

2004-01-27  Joseph Applegate <sb-x at users.sourceforge.net>
	* Added ability to READY and UNREADY objects with the keyboard
	  Press tab to move cursor to inventory, and return to ready/unready.
	  This is now hooked to Event::ready (which will move to PlayerActions)
	* Double-click to USE an object in the inventory works for readiable
	  objects (this introduces a slight delay in click-to-ready)
	* Actor: Various inventory management fixes. (in counting, adding, and
	  removing objects) This means Iolo's gather/split gold commands work
	  99% correct now. (it is taking gold from containers in Avatar's
	  inventory when it shouldn't, and I don't know how to determine the
	  maximum stack-quantity of objects)
	* Mice will pass/be passed by actors, and can go through mouseholes.

2004-01-24  Joseph Applegate <sb-x at users.sourceforge.net>
	* New alt-codes: 314-teleport to NPC,
	                 414-destination menu for lazy teleporters,
	                 456-morph npc appearance (forgot to mention last time)

2004-01-24  Joseph Applegate <sb-x at users.sourceforge.net>
	* Contents of eggs are now tossed out to a random location, if the egg
	  location is occupied by an actor. (the original U6 did some
	  interesting things with eggs; added a note to the TODO list)
	* ConverseInterpret: Either implemented or added placeholders for the
	  SLEEP, RESURRECT, INPUTSTR, DIV, and HASOBJ instructions. Thanks to
	  Paul Gilbert.
	* A walk delay is now imposed on continuous movement with the keyboard
	  or mouse. It can be set in Player::get_walk_delay().
	* Added Click & DoubleClick events to GUI_widget, along with the
	  necessary support functions. For now, a GUI_widget that defines
	  HandleEvent can't use these. All widgets' Idle() methods are called in
	  Event.
	* Removed Event::view_focus stuff. You now GUI::lock_input() on a
	  GUI_Widget that you wish to grab all events.
	* Mouse movement and actions on the MapWindow are more solid now. There
	  is still some minor work to complete on it.
	* Event: Much of the code in the handleKeyDown switch moved to new
	  public methods. (doAction/cancelAction/newAction) I took the new
	  doLook/doUse methods and replaced them with multiple use/look
	  incarnations. The messages printed should be accurate now. Each one
	  returns to the prompt when it is finished.
	* Solo/party mode switching implemented. The other party members will
	  oddly get stuck until you move the leader in Solo mode.
	* In preparation of the new MsgScroll that will hopefully be able to
	  convert to multiple fonts on any line, I've changed alt-code 214 to
	  be more like the original. (and use identical <>-escaped prompts) It
	  doesn't work aboard ship anymore.
	* Misc. fixes

2004-01-21  Willem Jan Palenstijn <wjpalenstijn at users.sourceforge.net>
	* Makefile.mingw, */Makefile.common: added new tools to Makefile.mingw

2004-01-20  Joseph Applegate <sb-x at users.sourceforge.net>
	* Alt-214 codes can be entered with the numeric keypad now.
	* Keys F1-F10 enabled to switch between party members and roster.
	* Fixed Sundials (allowing potentially other timed animations in
	  TileManager.
	* Added testing usecode for Eggs, and a new LOAD event. (unused)
	* Changed the way game-timers work, now having two queues in Event,
	  and using new game_ticks counter in GameClock. Game ticks are updating
	  with the game time, unlike moves.
	* Fun with GUI_Widget... (this is barely tested and will be cleaned up)
	  Left-click MsgScroll during conversation to keep scrolling,
	  Right-click to say bye (or say whatever is typed).
	  Double-click InventoryWidget to use an item.
	  Hold left mouse button in MapWindow to walk towards cursor.
	  Double-click left button MapWindow to use an object (not working
	  correctly yet) or talk to an actor.
	  Left-click in MapWindow to select an object or actor for the current
	  action (use, look, talk, get).
	* ADEMAS! (more fun with GUI_Widget)
	  Merged inventory-look/use changes from Adrian Boeing:
	  Left-click in InventoryWidget or DollWidget to select an object to
	  look at or use. (after entering the appropriate mode)
	  Divided Event::look() and use() into smaller, more modular functions.
	  (everything needs more testing)

2004-01-20  Eric Fry <efry at users.sourceforge.net>
	* Moved egg spawning code into its own method
	  spawn_egg(Obj *egg, uint8 hatch_probability);
	* Changed the container logic again. It turns out that x is always used
	  to find the container. But if the objblk_n > 1024 then you must add
	  1024 to x to find the correct container. So if y & 0x1 then add 1024
	  to x.

2004-01-18  Eric Fry <efry at users.sourceforge.net>
	* Added correct dithering tile offsets for SE.
	* Removed some DOS crlf's that slipped into the source tree.

2004-01-17  Eric Fry <efry at users.sourceforge.net>
	* Sam added dithered darkness. But forgot to write it up in the
	  ChangeLog. ;-)

2004-01-16  Eric Fry <efry at users.sourceforge.net>
	* Objects now spawn from eggs.
	* Actors can walk over or under other actors again. :) Might need to fix
	  actor ordering.

2004-01-16  Joseph Applegate <sb-x at users.sourceforge.net>
	* You can MOVE objects around with the keyboard now, and special usecode
	  may be called. You can't move actors yet.
	* UseCode events TIMED and MOVE added. New objects Powder Keg & Cannon.
	* New alt-code 300: show NPC portrait (this will be changed to "show
	  portrait number")
	* Portraits now only display until the player presses a key to continue.
	  Event has to switch focus to it and PortraitView has to set `waiting'
	  to "true".
	* Portrait: Fixed the incorrect portrait number references. Actor 0
	  displays no portrait (at least as a vehicle), shrines display no
	  portraits, and Exodus' portrait number was off by 3. You can see
	  gargoyles' portraits when you look at them now.
	* Converse: Hardcoded script numbers added from actors 188+,
	  including temporary NPCs. You can talk to Guards and Wisps now, and
	  the shrines use the correct conversations.
	* NPCs 188 to 200 are considered "always known" and their name is
	  displayed when you talk to them.
	* View focus added to EVENT. This lets us do things like display a
	  portrait temporarily, or browse inventory with the keyboard.
	  Unfortunately with the current event system it means more work has to
	  be done when you want to get user input (you have to switch the
	  focus). This should be managed by ViewManger in the future.
	* Event: A couple of functions added to make getting input and showing
	  portraits while switching focus to the appropriate view easier.
	* TimeQueue now operates in Real Time (milliseconds) and Game Time
	  (ticks/turns).
	* New timer TimedCallback added. It is a flexible method of setting a
	  callback function on any class to be called with the time is up, and
	  with user-defined data. The class has to inherit TimedCallbackTarget.
	* Use GameTimedCallback to do this in game ticks/turns.
	* GameClock: Time counter added. This counts the number of minutes
	  since start. Return this with get_time().
	* Other new methods to GameClock: get_turn() returns move_counter
	                                  get_ticks() returns SDL_Ticks()

2004-01-14  Eric Fry <efry at users.sourceforge.net>
	* Added the original hacked object creation. You can now use spam to
	  make hacked objects in Nuvie. These objects have an overflowed
	  frame_n. This makes them look like one object but behave like another.
	* A small MsgScroll rendering fix. The page break arrow now displays
	  on the last line of text not on a new line.
	* Added Sam Matthews and Jonathan E. Wright to the AUTHORS file.

2004-01-13  Eric Fry <efry at users.sourceforge.net>
	* Added use:beehive.
	* More work on eggs. There are two status flags that effect eggs.
	  I'm still not sure what these flags do exactly. So their names
	  in the source may change in the future.
	* Changed round() to roundf() as we were dealing with floats anyway.
	* Added a new alt-code. Alt-216 display current time. :-)

2004-01-12  Joseph Applegate <sb-x at users.sourceforge.net>
	* Tools: unpack_conv working again. (broken files were being produced
	  and repack -r didn't work because of U6Lib_n differences)

2004-01-11  Eric Fry <efry at users.sourceforge.net>
	* Fixed a crash on load bug. [ 874477 ] Nuvie would crash while loading
	  if the game was saved at night or in a dungeon. Nuvie was trying to
	  render the darkness globes before they had been initialized.

2004-01-10  Eric Fry <efry at users.sourceforge.net>
	* Added use:churn. Using a churn now makes butter. If you have a bucket
	  of milk in your inventory.
	* Fixed MsgScroll rendering. Some words were wrapped to the next line
	  when they could have fit. Text placement should be closer to the
	  original now. I've still got some work to do in MsgScroll.

2004-01-08  Eric Fry <efry at users.sourceforge.net>
	* Added Sam's optimized darkness patch. The Darkness code should be a
	  lot faster now.
	* Some work on weapon stats. I'm not completely sure how combat will
	  end up. But at least the combat numbers are written down someware. ;)

2004-01-02  Eric Fry <efry at users.sourceforge.net>
	* Added rolling pin to the list of readiable objects.

2003-12-31  Eric Fry <efry at users.sourceforge.net>
	* Added twitching to the hydra tenticles.
	* Nuvie will no longer show a blank portrait when looking at a
	  temp actor with no portrait.
	* Guards and wisps now show a portrait when you look at them.

2003-12-29  Eric Fry <efry at users.sourceforge.net>
	* MapWindow: Added permenant darkness to dungeon levels.
	* ObjManager: Added is_stackable method for checking if an object can
	  be pluralised.
	* Event: Fixed the "Look" event. It now says "They weigh" when looking
	  at an item with a quantity > 1.
	* U6Actor: Added dragon actors. I've also started Hydra support.

2003-12-25  Eric Fry <efry at users.sourceforge.net>
	* Some fixes for object weight. Inventory weight should be closer to the
	  original now.

2003-12-25  Eric Fry <efry at users.sourceforge.net>
	* Fixed an issue with containers. [ 864087 ] There are some comtainer
	  objects that don't reference their container through the x variable.
	  They seem to follow the container object in the objblk files. They
	  also appear to have a positive > 0 value for y.
	  I think their might still be some issues with calculating inventory
	  weight.

2003-12-21  Eric Fry <efry at users.sourceforge.net>
	* Fixed inventory display order. Nuvie was displaying the inventory
	  list in reverse order. Thanks to Dominus for spotting that one.

2003-12-20  Eric Fry <efry at users.sourceforge.net>
	* Work on horse usecode. Temporary Actors are used correctly when
	  mounting/dismounting horses.
	* The player can no longer use character horses eg Iolo's horse.

2003-12-14  Eric Fry <efry at users.sourceforge.net>
	* Fixed walk on pedastal bug. [ 791146 ]
	* Fixed lockup when walking to the top or left of the map. This only
	  really occured in the dungeon levels.

2003-12-13  Eric Fry <efry at users.sourceforge.net>
	* A fix for an infinite loop when removing temporary eggs.

2003-12-10  Eric Fry <efry at users.sourceforge.net>
	* Added proper worktype for cows and horses. They keep within the fenced
	  areas now.
	* Some minor tweeks for multi-tile actors.
	* Note! I've got a crash when I create two multi-tile
	  actors on the same spot. eg over an egg. I haven't tracked down
	  what's causing this crash yet. :(

2003-12-08  Eric Fry <efry at users.sourceforge.net>
	* Added egg support. Eggs now spawn Actors as you pass them by. :)
	  I've still got a bit to do on this. Eggs need to throw their contents
	  around the map. At the moment Actors are all spawning on top of their
	  egg. This is causing some problems for multi-tile actors. I'll fix
	  this soon. I've also got to handle the creation of non Actor objects.
	  This includes Reagents.
	* Added temp actor mangagement. Added the ability to create temp actors.
	* Added Use Cow. Using a cow will fill an empty bucket in the player's
	  inventory with milk.
	* Added Use Well. This will fill a bucket with water.
	* Added Apple XCode build configuration.

2003-12-04  Joseph Applegate <sb-x at users.sourceforge.net>
	* Fixed closed containers dumping contents.
	* Temp. fix added for horses disappearing after riding.
	* People riding horses dismount now before boarding a ship.

2003-12-03  Joseph Applegate <sb-x at users.sourceforge.net>
	* Starting from an in-vehicle savegame works correctly now.
	* Player: The party only follows if you are controlling the leader now,
	  but is moved if you are controlling a vehicle.
	  Player tells ActorManager the new player actor when set.
	* The player actor at start is found by looking at actor worktypes.
	* Renamed Actor::inventory_add_object(Obj*) to inventory_new_object(),
	  and it now returns an object pointer.
	* New object weight tests: can_carry_object(), can_carry_weight()
	* UseCode: Added some new searchables, and code for fountains (not fully
	  implemented) and shovels. Fixed bug in food code that could prevent
	  food/drinks from being removed properly when eaten.

2003-12-03  Eric Fry <efry at users.sourceforge.net>
	* Fixed double free when cleaning up temp objects.
	* Update darkness when creating a moongate.
	* Fixed crash when exiting ships.
	* Added in_vehicle to Party.

2003-12-03  Joseph Applegate <sb-x at users.sourceforge.net>
	* Objects are removed from temp. list when removed from the map.
	* Fixed segfault when getting objects and stacking them in inventory.

2003-12-02  Joseph Applegate <sb-x at users.sourceforge.net>
	* You can no longer walk diagonally between blocked squares. This fixes
	  walking over water.
	* Updated Horse code (can't use another horse while riding), and added
	  Codex of Ultimate Wisdom to book list.
	* Mirrors now showing reflection when NPC's pass by them. [ 716226 ]

2003-12-01  Joseph Applegate <sb-x at users.sourceforge.net>
	* Minor improvements made to how the party follows, in Party, PathFinder
	  and ZPath. They are a little more jumpy now, but that will be fixed in
	  the future. PathFinder path isn't cleared unless dest changes.
	* Timeouts added when you enter a dungon or vehicle, use a ladder, or
	  walk to a vehicle. If the party isn't at the target within a limited
	  number of moves, they will be moved there. Original U6 did this too.
	* Fixed infinite loop bug in money exchange with Teri at the mint.
	  (and potentially other NPCs) [ 841963 ]
	* New configuration options: party_all_the_time allows you to add/remove
	  anyone in the world to/from your party if you can talk to them (for
	  test purposes only of course ;)) and enable_hackmove lets any object
	  get moved with the mouse.
	* Karma is now reduced when taking objects owned by someone else (but
	  some objects don't have their OK_TO_TAKE flag set when they should).
	* Unusable actors aren't used. An object at the same location is always
	  used first.
	* New method in MapWindow to check if "in_dungeon_level()".
	* Party: Besides changes to following, new is_leader() method checks to
	  see if an actor is the party leader. Actor::set_in_party() is called
	  for maintenance when actors join/leave.
	* Actor U6Actor: Move counter added to help pathfinders, so
	  that actors may only walk a limited number of spaces per turn. This is
	  really touchy, so any future code changes that affect actor movement
	  should be done carefully. Forced moves won't check/alter the counter,
	  and vehicles have no move limit.
	* Fixed a glitch in set_direction(uint8) that wasn't updating direction
	  at all in some cases. But the actors now appear to loop walking frames
	  incorrectly. (don't know if this is a new issue)
	* Worktype location added to keep actors within a small area around
	  their schedule destination. *Actor::set_worktype() updates location.*
	  The activities Beg and Wander are now limited to a small area.
	* Player: Had to add a workaround for above movecounter limitation, so
	  that player can always move.
	* Karma add/subtract functions given default values.
	* TimedPartyMove TimedPartMoveToVehicle: Fix for walking to moongates
	  now uses new Actor::is_nearby() test.
	* ActorManager: Don't do scheduled activities if in the party.
	* UseCode: Holy flames can't be doused.
	  Object numbers of fire,poison,sleep,protection fields added.

2003-11-28  Eric Fry <efry at users.sourceforge.net>
	* Added proper check when using orb of moons. You can only use the
	  orb after saying 'orb' to Lord British.
	* Moved hour change check from Actor to ActorManager. ActorManager
	  only calls Actor::updateSchedule() when the hour changes.

2003-11-26  Eric Fry <efry at users.sourceforge.net>
	* Light globes are now not drawn for blacked out objects.

2003-11-25  Jonathan E. Wright <nelno at users.sourceforge.net>
	* Fixed VS .NET build to work with alpha blended darkness.
	* Fixed MSVC 6 build to work with alpha blended darkness.
	* Just found this file and realized what Eric meant by "update the
	  change log"... I thought you meant the change log in CVS.  Sorry. :)

2003-11-25  Eric Fry <efry at users.sourceforge.net>
	* Added Sam Matthew's Alpha blended darkness. :-) This is still a
	  little rough around the edges but it is looking really nice!
	* Fixed the palette rotation. It was rotating the wrong way.

2003-11-24  Eric Fry <efry at users.sourceforge.net>
	* Added Pieter Luteijn's Use orb code.
	* A small OS X compile fix. Added #ifdef check for _MSC_VER in
	  nuvieDefs.h

2003-11-23  Jonathan E. Wright <nelno at users.sourceforge.net>
    * Added Visual Studio .NET 2003 build configuration.

2003-11-20  Eric Fry <efry at users.sourceforge.net>
	* Fixed avatar portrait. It was out by 1. Thanks to Pieter Luteijn for
	  spotting that one. [ 845094 ]

2003-11-18  Eric Fry <efry at users.sourceforge.net>
	* More code cleaning.

2003-11-17  Eric Fry <efry at users.sourceforge.net>
	* Renamed U6def.h to nuvieDefs.h and moved it to the root dir.
	* Fixed Actor blocking. You can now move over and under certain actors.
	  Eg. you can walk over mice and under birds, dragons etc.

2003-11-16  Eric Fry <efry at users.sourceforge.net>
	* Header #include cleanup.

2003-11-15  Eric Fry <efry at users.sourceforge.net>
	* Fixed crash when entering caves on the gargoyle plane.
	* Added usecode for entering the red moongates.
	  It isn't currently possible to create moongates. As we need to
	  overhaul the Event system.
	  We also need to fix TimedPartyMove::timed so we can use the moongate
	  to travel to a destination on the same plane. At the moment you
	  can only travel to destinations on a different plane to the
	  moongate. :(
	* Added blocking checks for Use-passthrough
	* Changed "blocked!" message to "Not now!".
	* Added diagonal movement via the keypad.

2003-11-14  Eric Fry <efry at users.sourceforge.net>
	* Added day of week to GameClock
	* Added day of week to schedules.
	* Fixed the number of days in a month. Britannia has 28 day months.
	* Clean the screen after an unsuccessful drop.
	* Don't close doors if blocked. [ 841973 ]

2003-11-14  Eric Fry <efry at users.sourceforge.net>
	Merged Jonathan E. Wright's changes.
	They are...
	* Added Dragging from MapWindow to other GUI objects.
	* Added movement by the keypad.
	* Added Map::lineTest this method checks a line of sight from the
	  player to a point on the map for passability.
	* Made drag inventory->world, paperdoll->world, world->world,
	  world->paperdoll and world->inventory use lineTest to ensure the
	  player can reach the item and the spot where it is being dropped.
	* Show objects being dragged / dropped under cursor.

2003-10-30  Eric Fry <efry at users.sourceforge.net>
	* Temporary objects now clear on level change, teleport.

2003-10-29  Eric Fry <efry at users.sourceforge.net>
	* Moved temp obj addition into ObjManager::add_obj()
	* Added ObjManager::delete_obj() method to delete an object and any
	  container items it might hold.
	* Don't display actors with a 0 object number.

2003-10-27  Eric Fry <efry at users.sourceforge.net>
	* Started work on temp obj removal. This still needs work. It may
	  be quite unstable.
	* Added the ability to hide eggs via a config switch.

2003-10-19  Eric Fry <efry at users.sourceforge.net>
	* Changed ObjManager::is_passable return codes OBJ_STATUS_ to OBJ_ and
	  added proper OBJ_STATUS_ defines for Obj status bit flags.

2003-10-18  Eric Fry <efry at users.sourceforge.net>
	* Added a small tool for unpacking U6 FM-Towns audio files.
	  The tool extracts all samples in a given file as 16bit wav files.

2003-10-16  Eric Fry <efry at users.sourceforge.net>
	* Fixed rendering error with ships.
	* Fixed player sitting bug.

2003-10-14  Joseph Applegate <sb-x at users.sourceforge.net>
	* Party members will now walk up and enter skiffs and ships when using.
	* Blacksmith NPC's can sell you a horse. There is a serious bug here
	  that I haven't reproduced yet.
	* Certain objects should have proper tile animations now
	  (crank/chain/bell), so this fixes the relevant bug item. [ 713532 ]
	* Bells (like the one in Britain) can be used too, but still no sound.
	* TimedEvent: Timer functions moved from Event to new files
	* ObjManager TileManager: Tile animation control methods added here

2003-10-12  Eric Fry <efry at users.sourceforge.net>
	* Added "use" support for skiffs, ships and horses.
          Ship support is still a bit rough. Horse's disappear after use. :(
	  I'll fix this when we add the temp actor management methods into
	  ActorManager.

2003-10-07  Eric Fry <efry at users.sourceforge.net>
	* Added split-type actors. Cows, horses, etc.
	* Added twitch support for some multi-tile actors.
	* Some worktype tweaks.
	* Actor: changed old_obj_n to base_obj_n.

2003-10-07  Joseph Applegate <sb-x at users.sourceforge.net>
	* Objects can be used on other objects now (use-chaining). Right now
	  this works for keys (but only on doors), and potions (but only to
	  print a message).
	* Timers can start immediately, so entering dungeons and using ladders
	  starts as soon as the object is used. You can also exit dungeons now.
	* Searching of spaces adjacent to the player is possible now. You can
	  do this for secret doors, bags, and some other things. Other normal
	  containers must be "used".
	* Container contents are now printed in the message scroller when they
	  are removed from the container.
	* Looking at actors shouldn't display a weight if they are on an object.
	* Actor/MapWindow: couple of new methods here to return MapCoords

2003-10-06  Eric Fry <efry at users.sourceforge.net>
	* More work on multi-tile actors.
	* Added different movetypes for actors.
	* Added support for ships and skiffs. They can't be used yet
	  but it's a start. :)

2003-10-05  Eric Fry <efry at users.sourceforge.net>
	* Moved Actor walk info into a table. Most Actor types should move
	  around correctly now. This should fix the Sherry bug. [ 716209 ]
	* Added some object printing routines.

2003-09-16  Eric Fry <efry at users.sourceforge.net>
	* Quantities are only displayed for stackable items in InventoryWidget.
          Note I have still got to implement U6 key display eg 'A', 'B' etc.
	* Pressing the window manager's [X] button now brings up the
          quit dialog.

2003-09-14  Joseph Applegate <sb-x at users.sourceforge.net>
	* Fixed segfault when quitting during a conversation. (thanks wjp!)
	[ 765881 ]
	* Fixed HEAL bug that would prevent healer NPCs from getting the injured
	NPC number.

2003-09-14  Eric Fry <efry at users.sourceforge.net>
	* Reworked MsgScroll to handle lines in other fonts. I'm not completely
          satisfied with this. As you can only have one font per line. :(
	* You can now select an actor to talk to with either the 't' key or
          the 'Enter' key.
	* Signs should display in runic as required. [ 805253 ]
	* Fixed Look quantity bug. [ 742559 ]
	* Alt 214 now displays in "Location" Gargoylian. :)

2003-09-13  Eric Fry <efry at users.sourceforge.net>
	* Fixed wall reshaping bug with cookfires.
	* Partial fix for runic signs. This will not work with multi-line
          message strings. I'll fix that soon.

2003-09-11  Eric Fry <efry at users.sourceforge.net>
	* Finally Fixed the wall corner tile display bug. [ 713521 ] :)
	* Some code comments added.

2003-09-11  Eric Fry <efry at users.sourceforge.net>
	* Added arrows to InventoryWidget.

2003-09-10  Joseph Applegate <sb-x at users.sourceforge.net>
	* TimeQueue and Timers added to Event files. These should probably be
	moved into their own file(s).
	* Actor and Player respect "uncontrolled" flag on Player, preventing
	move of Player or MapWindow recentering.
	* The entire party properly walks towards ladders when used, or
	caves when entered, and reappears on the other side. You cannot exit
	dungeons yet.

2003-09-09  Eric Fry <efry at users.sourceforge.net>
	* Replaced gcc-3.3 with gcc in the Project Builder build system.
	* Added quantity strings to InventoryWidget
	* Event::Get Fixed weight check bug. Weight was aleady
	  multiplied by obj->qty

2003-09-07  Eric Fry <efry at users.sourceforge.net>
	* Fix for stackable items in Event::Get

2003-09-07  Eric Fry <efry at users.sourceforge.net>
	* MapWindow: You can now drop objects into containers on the map.
	* Event: Fixed the Get method. The object is now referenced by
	  Actor instead of being copied.
	* Added some more items to the TODO file.

2003-09-06  Eric Fry <efry at users.sourceforge.net>
	* Some win32 compile fixes (Thanks vividos)
	* More Drag and Drop work.
	* MapWindow will now only accept drops on passable tiles.

2003-09-04  Joseph Applegate <sb-x at users.sourceforge.net>
	* A few new U6 food items added, and the ability to enter dungeons (but
	you can't leave them yet).
	* Event: started event timer (untested)
	* Added some TODO notes

2003-09-04  Michael Fink <vividos at users.sourceforge.net>
	* Fixed most memory leaks
	* Updated MSVC project file

2003-09-04  Eric Fry <efry at users.sourceforge.net>
	* More Drag and Drop changes. Dragging an item from within the inventory
	  to a container should work correctly now.
	* It is now possible to ready/unready items by clicking or dragging.

2003-09-04  Eric Fry <efry at users.sourceforge.net>
	* Drag and Drop support added. You can now drag objects from the
	  inventory to the map. :)
	* New classes added GUI_DragManager, GUI_DragArea,
	  DollWidget & InventoryWidget.

2003-08-31  Eric Fry <efry at users.sourceforge.net>
	* Fixed a GUI_Widget redraw bug.

2003-08-27  Eric Fry <efry at users.sourceforge.net>
	* A small fix for inventory display.

2003-08-24  Eric Fry <efry at users.sourceforge.net>
	* Added Background widget. Floating dialogs should clear correctly now.

2003-08-23  Eric Fry <efry at users.sourceforge.net>
	* Added PartyView class.
	* Started to add readied objects to doll on InventoryView.

2003-08-22  Eric Fry <efry at users.sourceforge.net>
	* More work on views.
	* Added ActorView. Switching works with buttons.

2003-08-21  Eric Fry <efry at users.sourceforge.net>
	* The left and right arrow buttons now change the inventory view.
	* Stubs added for the other inventory buttons.
	* Fixed placement bug when re-adding an existing widget.
	* Screen: added method to generate an SDL_Surface for a given 8bit
          image buffer.

2003-08-18  Eric Fry <efry at users.sourceforge.net>
	* Converted the views over to the new GUI system.

2003-08-15  Eric Fry <efry at users.sourceforge.net>
	* Added quit dialog. (Note! this still needs some work.)
	* Merged GUI and Event event handlers.
	* Numerous GUI changes.

2003-08-14  Eric Fry <efry at users.sourceforge.net>
	* Initial import of the new GUI system.
	* Screen update code cleaned up a bit. Added update rects to improve
	  scaling proformance.

2003-08-03  Eric Fry <efry at users.sourceforge.net>
	* Added Twitching to Actors.
	* You can now sit on LB's throne correctly.
	* Added lute playing worktype. 0x95
	* Removed edible doors. ;)

2003-08-02  Joseph Applegate <sb-x at users.sourceforge.net>
	* Use usecode when looking at some objects
	* New usecode objects (still being tested): Several food items, mirrors
	* U6LibItem initialized to prevent crash while reading data.

2003-07-30  Joseph Applegate <sb-x at users.sourceforge.net>
	* Actor::is_nearby() distance reduced to 4x4
	* Added Beg worktype to U6Actor

2003-07-30  Eric Fry <efry at users.sourceforge.net>
	* Added various worktypes to U6Actor.
	   Walk in straight lines
	   Sleep ( Actors now sleep in their beds ;)
	   Wander around
	   Standing still
	* Actor now stores old obj_n and old_frame_n values. Used for
	  returning actors from sleep.
	* Fixed game.h reference style in Mac OS X build config. Thanks to
	  Brad Oliver for spotting that one. :)

2003-07-29  Joseph Applegate <sb-x at users.sourceforge.net>
	* Changed/added to Actor::set_direction()/face_location().
	* Actor walking can be given a delay (don't start for that many turns)
	* Long range path-finder improved. Short range still needs work.
	* Made game static/global. A Game instance can be retrieved from itself.
	* New distance methods of MapCoord, to check each direction.
	* Player: party movement and mapwindow re-centering is now in Actor
	* Event: any NPC can be followed/watched with alt-code 500.

2003-07-28  Eric Fry <efry at users.sourceforge.net>
	* Added preform_worktype() to U6Actor class.
	* Started to implement worktypes.

2003-07-27  Joseph Applegate <sb-x at users.sourceforge.net>
	* Fixed bug where y/n questions in conversations would prevent input
	and lock the game up.
	* Fix in Party.cpp for compiling with MSVC

2003-07-27  Eric Fry <efry at users.sourceforge.net>
	* compile fixed for Mac OS X.
	* added combat_mode to Actor.
	* Actors now load up with correct worktype from objlist.
	* Moved Actor* classes into actors/ sub-directory.
	* Setup Actor to be subclassed for the three different game types.
	* Added U6Actor.cpp/h
	* Party members now dodge other Actors. (This still needs work).

2003-07-26  Joseph Applegate <sb-x at users.sourceforge.net>
	* Actor, PathFinder: Path-finding/direction finding classes added and
	accessible from Actor. The path-finder is incomplete and distant
	destinations aren't reachable yet. There are still a few glitches.
	* Added some direction definitions that are at least easier to remember
	than 0, 1, 2, 3.
	* Game: Made map_window, obj_manager, and usecode made static so they
	can be easily accessed. The Game object itself should probably be static
	instead.
	* Map: Added get_actor() to get an actor at a location on the map.
	* New Type/Class MapCoord for easier passing of map/tile coordinates.
	MapWindow:in_window() checks to see if a map coordinate is on screen.
	* Party, Player: Party formation and movement implemented.
	When moving, other actors except party members block the player.
	* UseCode: is_unlocked_door() checks if object is door that can be opened.
	* Added classes: PathFinder AStar LPath ZPath

2003-07-18  Joseph Applegate <sb-x at users.sourceforge.net>
	* Usecode system extended to allow multiple "event" functions. Each
	object may have usecode executed when its event criteria are met.
	* Actor: Usecode event STEPTO checked when actors move toward an object.
	* ActorManager: Renamed actor_lookstr to look_actor.
	* Converse Player: Sacred Quest flag now being loaded, and is accessible
	in conversations.
	* U6UseCode: The guardian's barrier on the isle of the avatar blocks
	correctly when the avatar hasn't been given a quest.

2003-07-16  Joseph Applegate <sb-x at users.sourceforge.net>
	* Random strings said by Beh Lem and other NPC's (try patients in Cove)
	are printed correctly now, instead of resulting in "Unknown command."

2003-07-15  Eric Fry <efry at users.sourceforge.net>
	* Some small compile fixes.
	* Added Use Vortex. ;) Just for fun.

2003-07-15  Joseph Applegate <sb-x at users.sourceforge.net>
	* Added [Avatar] HP global var. for conversations, changed init. of
	PARTY* vars to number of followers, and increased number of vars to 36.
	* >=, <= operators fixed (tested with original U6 engine) This and above
	removes the extra Avatar in party listings (such as in shops.)
	*U6OP_RAND should no longer return values outside the given range,
	resolves issue of Lord British repeating things. (tracker item 755717)

2003-07-11  Joseph Applegate <sb-x at users.sourceforge.net>
	* Conversation interpreter is correctly skipping "buffer size" at start
	of non-Lzw-encoded scripts now. Should've been done already but maybe I
	rewrote that part and overlooked it.

2003-07-06  Joseph Applegate <sb-x at users.sourceforge.net>
	* Handle both upper and lower case y/n input (tracker item 765879)

2003-07-06  Eric Fry <efry at users.sourceforge.net>
	* Fixed some issues with NuvieIO classes. MD & SE now load again. ;)
	* Fixed Stone lion rendering issue in U6. Added support for force
	  lower tile flag when rendering.

2003-07-05  Eric Fry <efry at users.sourceforge.net>
	* Fixed typo in Project Builder project name. Most source files were
	  titled "Nuive" instead of "Nuvie". Thanks to Pieter Luteijn for
	  spotting that one. ;)
	* Nuvie now uses new NuvieIOFile classes for file access.

2003-07-04  Eric Fry <efry at users.sourceforge.net>
	* Added files for new IO classes. NuvieIO.cpp/h

2003-06-27  Eric Fry <efry at users.sourceforge.net>
	* Work on game loading. Added more error handling.

2003-06-26  Eric Fry <efry at users.sourceforge.net>
	* Added some gameselect functionality. You can now select which game
	  Nuvie will load from the config file or via the command line.
	* Work done on MD/SE MsgScroll support.
	* removed nuvie.cfg from repository, added nuvie.cfg.sample instead.

2003-06-22  Eric Fry <efry at users.sourceforge.net>
	* Removed U6 is_door method from ObjManager.
	* Better blacking support for MD & SE.
	* Added SEUseCode class.
	* Added some MD use codes. It is now possible to leave the capsule.
	* 0x is nolonger required on the hex numbers in ALT-214 teleport mode.

2003-06-21  Eric Fry <efry at users.sourceforge.net>
	* MD & SE now load their respective background graphics.
	* Reworked U6Shape, U6Lib_n and U6Bmp.

2003-06-21  Joseph Applegate <sb-x at users.sourceforge.net>
	* Select NPC's can now join and leave the party. HORSE cmds worked on.

2003-06-16  Joseph Applegate <sb-x at users.sourceforge.net>
	* Player: Added karma functions to set value.
	* Conversation class rearranged (to start adding support for MD and SE.)
	New ops handled: ADDKARMA, SUBKARMA, and NPC stats.

2003-06-14  Eric Fry <efry at users.sourceforge.net>
	* Work started on MD and SE support. Both games now load in a limited
	  capacity if a copy of U6 is present.

2003-06-08  Joseph Applegate <sb-x at users.sourceforge.net>
	* NPCs who should be working no longer tell you they are out-to-lunch.
	Incidentally this fix might have solved some other minor problems.

2003-06-08  Eric Fry <efry at users.sourceforge.net>
	* Added electric field switches.
	* Animated tiles now block correctly.

2003-06-03  Eric Fry <efry at users.sourceforge.net>
	* Added Drawbridge support. You should now be able to leave the
	  the castle properly.

2003-06-01  Eric Fry <efry at users.sourceforge.net>
	* Locked doors can only be opened when the avatar has the correct
	  key in their inventory.
	* Added MsgScroll descriptions for several usecode actions.

2003-05-31  Eric Fry <efry at users.sourceforge.net>
	* Use Lever now operates corresponding portcullis(s).
	* The Avatar now walks up to the edge of the map correctly.

2003-05-30  Eric Fry <efry at users.sourceforge.net>
	* Added UseCode,U6UseCode classes.
	* Fixed clocks.
	* Fixed look display for animated objects.
	* Added GameSelect class which will contain game selection menu etc.

2003-05-28  Markus Niemist <niemisto at users.sourceforge.net>
        * ObjManager: Many containers can now be used and items got out of
        them.
        * U6Shape: Added support for loading U6 shapes
        * Scale: Grapped Scale2x scaler from Exult CVS

2003-05-27  Eric Fry <efry at users.sourceforge.net>
	* ObjManager: Objects are now stored in an AVL Tree. This should
	  speed things up a bit on slower machines.

2003-05-25  Joseph Applegate <sb-x at users.sourceforge.net>
	* Actor/ObjManager: Update to inventory and statistic access methods.
	(adding/deleting items works, and set_hp(), get_maxhp() added)
	* ActorManager: New method actor_lookstr() to get generic description
	* Converse: "Heal" in NPC scripts implemented, and name display with
	portrait is limited to those NPC's that have met or follow the avatar
	* U6Lib_n: now handling (read or skip) 4byte filesize at start of files

2003-05-24  Eric Fry <efry at users.sourceforge.net>
	* Get support thanks to a patch by Markus Niemist.

2003-05-23  Eric Fry <efry at users.sourceforge.net>
	* Work done on object weight. "you see blah. I weighs x.x stones."
	* More stats loaded for actors. Str, Int, Dex, level, exp etc.
	* Work on InventoryView, weights and actor icon are now displayed.
	* name support added to PortraitView.

2003-05-21  Joseph Applegate <sb-x at users.sourceforge.net>
	* Portraits now display during conversations (at the start and when
	requested.)

2003-05-20  Eric Fry <efry at users.sourceforge.net>
	* work done on View system. Added ViewManager, View, PortraitView.
	* Added Portrait loading class.
	* portraits now display when looking at an actor.

2003-05-18  Joseph Applegate <sb-x at users.sourceforge.net>
	* Event and MsgScroll now use SDL Unicode translation to get character
	input.

2003-05-16  Joseph Applegate <sb-x at users.sourceforge.net>
	* Actor: New methods is_nearby(), face_location(), face_actor().
	* Converse: NPC name is now saved internally when it is first read.
	* Event: There are now different responses to different targets when
	trying to talk to "yourself" or nobody.
	Looking at or talking to someone in the avatar's party now always shows
	name, and name isn't shown for anyone else who player hasn't "met."
	Actors and player face other before talking.

2003-05-16  Joseph Applegate <sb-x at users.sourceforge.net>
	* Converse: Few more test-ops added to further improve shopkeepers'
	abilities.
	* New/Delete/Transfer object commands implemented.
	* Party: Functionality of contains_actor() moved to get_member_num(),
	and former method changed to call new one (and made inline.)

2003-05-15  Joseph Applegate <sb-x at users.sourceforge.net>
	* Converse: Many (most?) shopkeepers should work to some degree now, but
	the player can't actually get the items yet.

2003-05-13  Eric Fry <efry at users.sourceforge.net>
	* Event: Alt-213 info string & Alt-125 advance hour added.
	* InventoryView: Started work on inventory view.

2003-05-09  Eric Fry <efry at users.sourceforge.net>
	* Event: Alt-214 now teleports.

2003-05-09  Joseph Applegate <sb-x at users.sourceforge.net>
	* Event: Added alt-codes support. Hold ALT, and enter 3 numbers.

2003-05-09  Joseph Applegate <sb-x at users.sourceforge.net>
	* Player is initialized with a Party object now, and can return a
	pointer to it.
	* Rearranged some of conversation code. Access Party with Player.
	Support for a few more if-tests.

2003-05-07  Eric Fry <efry at users.sourceforge.net>
	* Fixed memory leak in MsgScroll::input_buf_add_char()
	* Fixed text rendering when in talk mode.
	* Fixed boundary check on cream buildings.

2003-05-07  Michael Fink <vividos at users.sourceforge.net>
	* Changed some parameter and return types from "char*" to
	"const char*" to clarify string constness
	* Rewrote Look text extraction

2003-05-07  Joseph Applegate <sb-x at users.sourceforge.net>
	* Player: get_gender() (returns avatar gender value, 0 or 1)
	* Actor: set_worktype()

2003-05-07  Eric Fry <efry at users.sourceforge.net>
	* Added Party class.
	* Started work on Actor inventories.
	* Player name now appears in prompt.

2003-05-05  Eric Fry <efry at users.sourceforge.net>
	* Added player name to Player class. Hooked it into Converse.

2003-05-04  Eric Fry <efry at users.sourceforge.net>
	* Added GameClock
	* Actors now follow their schedules.
	* Actors sit on chairs now.
	* Time of day works in talk mode.
	* Added Karma to Player class.

2003-05-03  Michael Fink <vividos at users.sourceforge.net>
	* Fixed some more memory leaks
	* Added handling of uncompressed files to U6Lzw

2003-05-02  Joseph Applegate <sb-x at users.sourceforge.net>
	* RETURN or ENTER sends "0" for single-number input in conversations

2003-05-02  Eric Fry <efry at users.sourceforge.net>
	* Ladders work correctly now. Thanks Jim. ;)
	* Look Picture.

2003-04-23  Willem Jan Palenstijn <wjpalenstijn at users.sourceforge.net>
	* Text: need <cctype> for isalpha()

2003-04-23  Joseph Applegate <sb-x at users.sourceforge.net>
	* Text: Quick edit to highlight keywords in text. This is -not- the
	correct way to do this, but it was easy and works for now.

2003-04-20  Joseph Applegate <sb-x at users.sourceforge.net>
	* Converse: new commands handled, and printed text expansion
	* MsgScroll: set_input_mode can accept a list of characters, and will
	only allow the input of those characters

2003-04-20  Joseph Applegate <sb-x at users.sourceforge.net>
	* Converse instance is now created with pointer to an ActorManager.
	* NPC flags added (initialized but not loaded yet in ActorManager)

2003-04-17  Joseph Applegate <sb-x at users.sourceforge.net>
	* Minor change to look more like original U6: `what?' and `Pass!'
	messages are displayed on unknown keys, and Spacebar, respectively.
	* And you can now "Escape" back to Move mode from Use/Look/Talk.
	* And the "look" keyword correctly shows description in conversation.

2003-04-17  Joseph Applegate <sb-x at users.sourceforge.net>
	* MsgScroll: Any key escapes from page break
	* Converse: Now handling if...else...endif by skipping blocks of script
	until it reaches end-of-scope. Only a few if-tests are implemented.
	* When talking to NPC's empty input says "bye".

2003-04-15  Michael Fink <vividos at users.sourceforge.net>
	* Fixed memory leaks

2003-04-11  Eric Fry  <efry at users.sourceforge.net>
	* Added page break to MsgScroll

2003-04-09  Eric Fry  <efry at users.sourceforge.net>
	* Work on MsgScroll class.
	* Added signposts, books and scrolls.

2003-04-08  Michael Fink <vividos at users.sourceforge.net>
	* Added MSVC project files and code fixes

2003-04-07  Eric Fry  <efry at users.sourceforge.net>
	* Use: secret door.
	* Use: ladder (started).

2003-04-06  Eric Fry  <efry at users.sourceforge.net>
	* Fixed shoreline animation.

2003-04-05  Eric Fry  <efry at users.sourceforge.net>
	* Intergrated Ryan's Scaler code.
	* Actors now twitch and move around.
	* Actors are now blacked properly.
	* Palette cycling.

2003-04-02  Eric Fry  <efry at users.sourceforge.net>
	* Windows are now working properly.
	* Work started on scaling.
	* Added little tool to unpack converse.a/b files

2003-03-30  Eric Fry  <efry at users.sourceforge.net>
	* Started Changelog.
	* Chests now open and close.
	* More work done on blacking.
	* MapWindow now draws to its own surface. Added Ultima6 map border
	tiles and trimmed map window down to 10x10 tiles.

