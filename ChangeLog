2011-07-01  Eric Fry <efry at users.sourceforge.net> r1215
	* Moved 'buried moonstone' location data from Weather class into lua script.
	* Added logic to create moongates on top of buried moonstones if the moon is
	  the sky. The moongates are removed from the map when the moons are no 
	  longer visible.
	* Don't do anything with the gate travel spell if trying to travel to a phase
	  that doesn't have a corresponding buried moonstone.

2011-06-29  Eric Fry <efry at users.sourceforge.net> r1214
	* Added map tile check when burying moonstone.

2011-06-29 Pieter Luteijn <luteijn at users.sourceforge.net> r1213
	* updated revision number in previous changelog entry below to r1212
	* some reminders placed around moonstone locations in lua..

2011-06-28  Eric Fry <efry at users.sourceforge.net> r1212
	* Fixed some bugs with flank combat worktype
	* Fixed some bugs with rear combat worktype

2011-06-27 Pieter Luteijn <luteijn at users.sourceforge.net> r1211
	* added #include <stdlib.h> (for the random functions) to 
	  sound/mixer/decoder/PCSpeakerStream.cpp to get the
	  SFX_SLUG_DISSOLVE Soundeffect to compile.

2011-06-27  Eric Fry <efry at users.sourceforge.net> r1210
	* Turned on message scroll autobreak while in conversation. This should fix
	  the bug with missed text when saying 'job' to Finn.
	* Fixed some issues with berserk combat worktype.
	* Added corpser check to actor_ok_to_attack()

2011-06-25  Eric Fry <efry at users.sourceforge.net> r1209
	* Added the ability to spin a projectile animation. Combat projectiles spin
	  now.
	* Added SFX_SLUG_DISSOLVE PC Speaker sound effect.
	* Added chance of being poisoned by actors with a poisonous actor type.
	* Acid slugs can now dissolve metal objects when attacking.
	* Gremlins now steal food when attacking.
	* Added new form of TileManager::get_rotated_tile() which accepts a destination
	  tile to perform the rotation on.

2011-06-24  Eric Fry <efry at users.sourceforge.net> r1208
	* Fixed bug where sleeping actors would disappear when killed.
	* Show base object name for dead actors. This fixes the bug where nuvie
	  would print 'A dead body killed!'
	* Fixed left arrow button on spell view.

2011-06-22  Eric Fry <efry at users.sourceforge.net> r1207
	* Added spellbook view.
	* Removed spells.nsl from Magic class.
	* Magic class now loads its spell list from magic.lua via new
	  magic_get_spell_list() script function.
	* Removed unused code from Magic class.
	* Moved creation of Magic class into Game class.
	* Added num and removed script from Spell class.
	* Changed magic.lua magic table to index from 1 instead of 0.

2011-06-15  Eric Fry <efry at users.sourceforge.net> r1206
	* Added Brawling worktype.
	* Added Begging worktype.
	* Added Actor.talk() script function used with begging worktype.
	* Fixed bug with actor_find_target() so actors don't target themselves.

2011-06-14  Eric Fry <efry at users.sourceforge.net> r1205
	* Fixed bug where musician wouldn't play lute while sitting on a chair.
	* Added 'local' directives to several variables in actor.lua that were missed.
	* Fixed worktype 0x80. It now sets actor to worktype.
	* Fixed function name typo in wt_timid.
	* set all actor's movement points to zero when the avatar dies. Don't perform
	  worktype if movement points are 0. This fixes a bug where actors were trying
	  to attack the party even after they had teleported back to LB's castle. This
	  caused a very long unseen projectile to be fired off, freezing the game.

2011-06-12  Eric Fry <efry at users.sourceforge.net> r1204
	* Removed old poison damage code from U6Actor class.
	* Update view manager when changing party member poison state.
	* Update view manager when changing party member hp.
	* Removed old defend code from Actor class.
	* Removed party_heal script function and replace with pure script version.
	  This version also removes poison, charm etc from party members.
	* Added Actor.show_portrait() Actor.hide_portrait() script functions.
	* Added input yes/no select to guard arrest player logic.
	* Removed unused script functions actor_poison(), actor_add_hp() and
	  actor_add_mp().

2011-06-11  Eric Fry <efry at users.sourceforge.net> r1203
	* Fixed bug when loading a savegame where the avatar is incapacitated.
	* Removed old eclipse logic from Weather class. Replaced with timer in
	  GameClock.
	* Fixed bug when saving actor alignment.
	* Clear actor flags when creating new temp actor.
	* Removed alive variable from actor. Alive flag is now back in status_flags.
	* Added new TextInputEffect class which waits for input from msgscroll.
	* Changed Game::update_once loop to allow polling of events by gui widgets.
	  This allows effects to receive input from msgscroll.
	* Added Peer (vwy) spell.
	* Added Time Stop (at) spell.
	* Added phase select to Gate Travel spell.
	* Reworked Eclipse spell to use timers.
	* Added damage to Tremor spell.
	* Fixed some bugs with flank worktype.
	* Added input_select() input_select_integer() and peer_effect() script
	  functions.
	* Removed eclipse_start() script function.
	* Fixed bug with boomerang when avatar dies.

2011-06-09  Eric Fry <efry at users.sourceforge.net> r1202
	* Added Chain Bolt (vog) spell.
	* Added Energy Wind (gh) spell.
	* Added Fear (qc) spell.
	* Added Gate Travel (vrp) spell. Note this still needs the phase selection
	  logic.
	* Added Mass Curse (vas) spell.
	* Added Mass Invisibility (vsl) spell.
	* Added Death Wind (ch) spell.
	* Added Mass Charm (vaxe) spell.
	* Added Mass Kill (vc) spell.
	* Moved wind spells into common function.

2011-06-03  Eric Fry <efry at users.sourceforge.net> r1201
	* Added Replicate (iqy) spell.
	* Added Web (idp) spell.
	* Fixed typo bug in lightning spell.
	* Fixed bug in actor.lua where player loc was being referenced incorrectly.

2011-06-03  Eric Fry <efry at users.sourceforge.net> r1200
	* Added Mass Protect (vis) spell.
	* Added Negate Magic (ao) spell.
	* Added storm logic. Disable casting magic during storm. Still need to
	  implement storm effect.
	* Added timer_get() script function.

2011-06-02  Eric Fry <efry at users.sourceforge.net> r1199
	* Added Flame Wind (fh) spell.
	* Added Poison Wind (nh) spell.
	* Added new magic_wind() script function. This provides the wind effect and
	  returns the hit items.
	* Moved and renamed triple_crossbow_offset_tbl into init.lua
	* Moved movement_offset_* tables into init.lua
	* Added nscript_new_hit_entities_tbl_var() which constructs return hit_items
	  table for projectile effects.
	* Return hit items from projectile_anim_multi() script function.

2011-06-01  Eric Fry <efry at users.sourceforge.net> r1198
	* Added clone (iqx) spell.
	* Added Confuse (vq) spell.
	* Added fade_actor_in() script function.
	* Fixed bug when creating musician actors.
	* Added missing local declaration to conjure spell script.

2011-05-27  <luteijn> r1197
	* Fixed case when including file in the script system.
	* Removed inline statement from external function.

2011-05-27  Eric Fry <efry at users.sourceforge.net> r1196
	* Added Charm (axe) spell.
	* Added actor old_align get/set script variables.
	* Hooked up old alignment to correct position in actor movement_flags.

2011-05-24  Eric Fry <efry at users.sourceforge.net> r1195
	* Added Seance (kmc) spell.
	* Added X-ray (wy) spell.
	* Added actor_talk(actor) script function.
	* Added XRayEffect class.
	* Added xray_effect(dur_ms) script function.
	* Added Actor.can_carry_obj(actor, obj) script function.
	* Added weight check to pickpocket spell.
	* Subtract karma from player when pickpocketing.
	* Fixed escaping while waiting for magic to resume in Event class.
	* Simplified / moved game logic out of Event 'get' logic.
	* Added ObjManager::can_get_obj(Obj *obj)
	* return false from nscript_get_location_from_args() if no arguments were
	  supplied.

2011-05-23  Eric Fry <efry at users.sourceforge.net> r1194
	* Added Pickpocket (py) Spell.
	* Added Reveal (asl) Spell.
	* Added blue fade to invisibility spell.
	* Added special monster only spell number 128. This is used by monsters to turn
	  invisible.
	* Added the ability to select item from actor's inventory then resume magic
	  spell.
	* Fixed spell numbering on the 8th circle.

2011-05-19  Eric Fry <efry at users.sourceforge.net> r1192
	* Added Invisibility (sl) spell.
	* Fixed up Energy field, explosion, insect swarm, lightning and paralyze spells

2011-05-18  Eric Fry <efry at users.sourceforge.net> r1191
	* Added Wind Change (rh) spell.
	* Added the ability to select direction from lua magic scripts.
	* Tweaked event code to differentiate direction from target.
	  Added new EVENTINPUT_MAPCOORD_DIR input type
	* Added get_direction_code() which gives direction from relative map coords.
	* Added Map::can_put_obj() function.
	* Added the ability to move objects to the telekinesis spell.
	* Added wind_set_dir(), wind_get_dir() script functions.
	* Added map_can_put_obj() script function.

2011-05-16  Eric Fry <efry at users.sourceforge.net> r1190
	* Fixed bugs with loading sleeping actors.
	* Allow actors without a base_actor_type. Used in the Animate spell.
	* Added Animate (oy) spell.
	* Added Conjure (kx) spell.
	* Added Disable (avm) spell.
	* Added Great Heal (vm) spell.
	* Added Mass Dispel (vajo) spell.
	* Added g_readiable_objs_tbl and obj_is_readiable() function to script system.
	* Don't try to create inventory for Animated objects.
	* Fixed forth circle spells.

2011-05-13  Eric Fry <efry at users.sourceforge.net> r1189
	* Fixed up third circle spells.
	* Added Fireball (pf) spell.
	* Added Great Light (vl) spell.
	* Added Repel Undead (axc) spell.
	* Print actor dmg in spell_take_fire_dmg() script function.

2011-05-11  Eric Fry <efry at users.sourceforge.net> r1188
	* Fixed up second circle spells.
	* Script obj.name now returns object name including frame_n.
	* Print object name when attacking.
	* Added Vanish (ay) spell.
	* Added fade_obj_out() and fade_obj_in() script functions.
	* Fixed sleep spell dice roll.
	* Added tile_get_flag(tile_num, flag_set, bit) script function.


2011-05-10  Eric Fry <efry at users.sourceforge.net> r1187
	* Added Reappear (iy) spell
	* Added game_load(), game_save() lua script functions in init.lua These are
	  called when a game is loaded/saved.
	* Added objlist_seek(), objlist_read2(), objlist_write2() script functions
	  these functions are used to read/write to the objlist from script and can
	  only be called from load_game() or save_game() functions.

2011-05-06  Eric Fry <efry at users.sourceforge.net> r1186
	* Added Magic Arrow spell (oj)
	* Fixed up Poison spell
	* Added actor_hit_msg() script function to print actor damage text
	* Changed projectile() script function to internalise the tile rotation offset.
	* Disabled actor_poison() lua function
	* Added global script variable g_vanish_obj for upcoming vanish/reappear
	  spells.

2011-05-04  Eric Fry <efry at users.sourceforge.net> r1185
	* Added support for game timers. They are handled by the GameClock class and
	  are loaded/saved to the objlist file.
	* Added magic light spell support.
	* Added timer_set(timer_num, val) script function
	* Added infravision magic script. (ql) This only sets the infravision spell timer.
	  The infravision effect needs to be coded in MapWindow.

2011-05-03  Kirben r1183 r1184
	* Added Win32 installer build config

2011-05-02  Eric Fry <efry at users.sourceforge.net> r1182
	* Fixed target selection bug when casting magic in the dungeon levels.
	* Don't twitch actors that aren't visible.
	* Hide surrounding objects for multi-tile actors when visible_flag = false.
	* TileBlackFadeEffect can now fade multi-tile objs/actors.
	* Fixed target selection in fire field spell logic.

2011-05-02  Eric Fry <efry at users.sourceforge.net> r1181
	* Added Detect Magic spell (wo)
	* Added Dispel Magic spell (ajo)
	* Added better compatibilty to all first circle spells. Added projectile logic
	  and fades.
	* Added fade_obj() script function
	* Added script actor.max_hp get variable
	* Added new convenience routines to magic.lua
	* Added script functions select_actor_with_projectile(projectile_tile, caster) and
	  select_obj_with_projectile(projectile_tile, caster) These functions are used
	  by magic scripts that fire a projectile at an actor/obj.
	* Reworked resurrect spell to increase compatibility with original game.

2011-04-29  Eric Fry <efry at users.sourceforge.net> r1180
	* Added spell casting red fade effect.
	* Added TileFadeAnim class.
	* Changed Actor::change_base_obj_n() to zero frame_n.
	* Added TileFadeEffect class.
	* Added TileBlackFadeEffect class.
	* Moved Game::update_once() into two calls. Split out display functions.
	  This was needed to end an effect without redrawing the screen.
	* Added magic script function magic_casting_fade_effect(caster)
	* Moved tile Animation display under toptiles.
	* Added script functions fade_tile(x,y,z,from_tile_num, to_tile_num) and
	  Actor.black_fade_effect(actor,color,speed)
	* Added tile_num get variable to actor in script.

2011-04-26  Eric Fry <efry at users.sourceforge.net> r1179
	* Automatically create ~/.nuvierc config file on Unix systems.
	* Added new Actor::change_base_obj_n() method. This allows us to change the
	  underlying base object type for an actor. This is ued in the slime spell.
	* Added actor.base_obj_n set field to script system.
	* Added 8th circle Slime spell (vrx).

2011-04-22  Eric Fry <efry at users.sourceforge.net> r1177
	* Updated Mac SDLMain files to SDL 1.2.14
	* Updated Mac build config changed base SDL to 10.4u sdk

2011-04-21  Eric Fry <efry at users.sourceforge.net> r1174
	* Fixed build error when compiling tools from automake.

2011-04-20  Eric Fry <efry at users.sourceforge.net> r1173
	* Official release 0.1
 
2011-04-20  Eric Fry <efry at users.sourceforge.net> r1172
	* Updated README
	* Updated MAC OS X dmg creation script to include README.txt
	* Updated nuvie.cfg.sample

2011-04-17  Eric Fry <efry at users.sourceforge.net> r1171
	* Added Armageddon spell
	* Changed Actor::die() to include switch to not drop dead body. Used in the Armageddon spell.
	* Fixed bug in mkdir_recursive() when the path started at the root directory.
	* Updated XCode build config.

2011-04-12  Eric Fry <efry at users.sourceforge.net> r1170
	* Fixed smooth lighting colour on MACOSX.

2011-04-12  Eric Fry <efry at users.sourceforge.net> r1169
	* Fixed vortex cube container. You can now move moonstones into the vortex cube
	* Fixed talking to shrines/statues. Bug [1534935] We talk to the object not
	  the actor.
	* Fixed MsgScroll autobreak functionality when looking at books/signs. 
	  Added MsgSroll token '\t' which means set autobreak off.
	* Fixed bug in actor_wt_attack() script function

2011-04-10  Eric Fry <efry at users.sourceforge.net> r1168
	* Fixed tangle vine spawning logic.
	* Moved vine creation into actor_init() script function.
	* Fixed tangle vine pod twitching. Bug [1534721]
	* Find monster spawn location befrore creating temp actor.

2011-04-09  Eric Fry <efry at users.sourceforge.net> r1167
	* Removed C++ exception code. A future port might not support it. ;-)
	* Fixed bug in tangle vine attack logic

2011-04-07  Eric Fry <efry at users.sourceforge.net> r1166
	* Added the ability to break objects when dropping. Bug [1527605]
	* Added bool ObjManager::is_breakable(Obj *obj)

2011-04-07  Eric Fry <efry at users.sourceforge.net> r1165
	* Added MinGW windows icon
	* Show gamedir path on Console under windows.

2011-04-06  Eric Fry <efry at users.sourceforge.net> r1163
	* Create default config for Windows if no config file found.
	* Fixed bug in mkdir_recursive()
	* Handle error when save_manager::load_latest_save() fails.
	* Removed -lSDL_mixer from Makefile.mingw

2011-04-06  Eric Fry <efry at users.sourceforge.net> r1162
	* Added more console messages.
	* Fixed redraw bug with party view when launching
	* Added ConsoleDelete() function
	* Continue from Console pause if SDL_QUIT event received.
	* Added filename() method to Configuration class.

2011-04-06  Eric Fry <efry at users.sourceforge.net> r1161
	* Added new Nuvie boot console. Fatal errors can now be shown to the user on screen.
	* Added GUI_Console class
	* Added Console class
	* Moved creation of GUI object into Nuvie class
	* Added new config option "config/general/show_console" default = true
	* Added new 6x8 font to the GUI
	* Changed GUI_Font class constructor to take font type argument.
	  Either GUI_FONT_DEFAULT or GUI_FONT_6X8
	* Show console on error

2011-04-01  Eric Fry <efry at users.sourceforge.net> r1160
	* Fixed bug when recursively calling TimedEvents.

2011-04-01  Eric Fry <efry at users.sourceforge.net> r1159
	* Constrain range attacks to within missile boundaries. (still need to do triple crossbow)
	* Changed ObjManager::is_boundary() to allow checking for missile boundaries.
	* Added missile boundary checking 'LT_HitMissileBoundary' to Map::LineTest()
	* Added Map::is_missile_boundary()
	* Moved actor asleep call to before party move in avatar death script.
	* Added script functions map_can_reach_point() and map_line_hit_check().

2011-03-30  Eric Fry <efry at users.sourceforge.net> r1158
	* Moved avatar death logic into lua script.
	* Hooked up actor_map_dmg() lua script to all actor movement.
	* Added Script::call_actor_map_dmg(Actor *, MapCoord)
	* Added flags to Actor::moveRelative method.
	* Set actor direction before moving. This means the actor is facing the right
	  way if we need to play the hit animation.
	* Fixed bug with new poision tile script logic.
	* Added actor.actor_num "get" variable to script system.

2011-03-29  Eric Fry <efry at users.sourceforge.net> r1157
	* Added map damage logic into script. At the moment this is not hooked up to player/party movement.
	* Added Tile *ObjManager::get_obj_dmg_tile(uint16 x, uint16 y, uint8 level)
	* Don't set direction on immobile or dead actors.
	* Removed map damage logic from C code actor move function.
	* Added Avatar death tune PC Speaker sfx
	* Added Kal Lor PC Speaker sfx
	* Don't remove party flag from actor when dead. We need it to resurrect the
	  member when the Help spell is cast.
	* Removed PCSpeakerGlassSfxStream class. Replaced it with a queued audio stream
	* Added PCSpeakerStutterStream class
	* Added magic casting PC Speaker sfx
	* Added Bell ringing PC Speaker sfx
	* Added Tile *Map::get_dmg_tile(uint16 x, uint16 y, uint8 level); This returns
	  the first tile that can do damage. It is either a map tile or an object tile.
	* Added first circle Help spell. (Kal Lor)
	* Added magic_casting_effect() lua convenience routine. Added it to correct spells
	* Don't change alignment if actor not created in 'insect swarm; spell logic.
	* Changed magic script invocation logic to always use magic_cast_spell() function
	* Added g_magic_spell_num variable to magic scripts.
	* Fixed bug in 'Use Shovel'
	* Added party_resurrect_dead_members() and party_heal() functions to script system.
	* Added map_get_dmg_tile_num() function to script system.
	* Added object "invisible" set variable to script system.
	* Added void nscript_new_obj_var(lua_State *L, Obj *obj) use this when returning an obj
	  in a script C call.
	* Added Actor.inv_get_obj(actor, obj_n) to script system.


2011-03-25  Eric Fry <efry at users.sourceforge.net> r1155
	* Added SFX_CASTING_MAGIC PC Speaker sfx. (Hooked it up to 'insect swarm' Kal Bet Xen spell)
	* Cleanup pc speaker object when closing audiostream

2011-03-23  Eric Fry <efry at users.sourceforge.net> r1154
	* Added SFX_CORPSER_REGURGITATED PC Speaker sfx.
	* Added getLengthInMsec() method to PCSpeakerGlassSfxStream class.

2011-03-23  Eric Fry <efry at users.sourceforge.net> r1153
	* Added SFX_CORPSER_DRAGGED_UNDER PC Speaker sfx.

2011-03-23  Eric Fry <efry at users.sourceforge.net> r1152
	* Added the ablility to wait while a sfx plays. (Still need to add support for
	  custom wav files.)
	* Added the ability to get the duration of the last played sfx from the
	  SfxManager. This value is expressed in milliseconds.
	* Added getLengthInMsec() to AudioStream class.
	* Added play mode to SoundManager::playSfx() to allow asynchronous play.
	* Changed lua script attack logic to wait while attack sfx is playing.
	* Added callback method to TimedEffect class. (replacing pure virtual).
	  This allows us to make an effect that does nothing but wait for a given
	  amount of time.
	* Changed lua script play_sfx() function to take optional argument play_async.


2011-03-21  Eric Fry <efry at users.sourceforge.net> r1150
	* More work on PC Speaker SFX
	* Added PCSpeakerRandomStream and PCSpeakerGlassSfxStream classes
	* Reworked PCSpeaker class to incorporate speaker cone speed.
	* Added NUVIE_SFX_HIT and NUVIE_SFX_BROKEN_GLASS PC Speaker sfx.
	* Changed PC Speaker output rate to 22050 Hz


2011-03-09  Eric Fry <efry at users.sourceforge.net> r1148
	* MACOSX: Changed development build config to use 10.5 SDK and target 10.4 (Thanks
	  to Dominus for working on the build config)
	* Cleaned up ConverseSpeech::play_speech() to remove some unused variables.

2011-03-07  Eric Fry <efry at users.sourceforge.net> r1147
	* MACOSX: Check for config in $HOME/Library/Preferences/Nuvie Preferences
	* MACOSX: If no config can be loaded try to create config with default values in
	  $HOME/Library/Preferences/Nuvie Preferences
	* MACOSX: If running from app bundle, change the default working directory to
	  Resources/ directory inside the app bundle. This enables us to move the data/
	  directory inside the app bundle.
	* MACOSX: Changed XCode build setup to copy data/ dir into app bundle.
	* MACOSX: Updated DMG build script and README file with new app paths.
	* Try to create savegame directory if specified in cfg file but does not exist
	  on disk.
	* Added new mkdir_recursive() function.
	* Changed the formatting on the config XML when it is written to the disk.
	* Don't try to use FM-Towns conversation logic if the townsdir specified in the
	  config does not exist.
	* MACOSX: Added eclipse build files.


2011-02-15  Eric Fry <efry at users.sourceforge.net> r1142

	* Started work on PC Speaker SFX
	* Added new PCSpeakerSfxManager class
	* Added new PCSpeaker streaming classes
	  PCSpeakerFreqStream - plays a given frequency for a set time.
	  PCSpeakerSweepFreqStream - Plays a sound sweeping from one frequency to another
	* Added PCSpeaker SFX. Blocked, Attack swing, success, failure and rubber ducky.
	  I'm not really happy with the sound repoduction at the moment but it's a start.
	* Added success sfx to magic insect swarm spell.
	* Added failure sfx when trying to cast a spell with no reagents.


2011-02-11  Eric Fry <efry at users.sourceforge.net> r1141

	* Set scummvm endian to SDL endian
	* Return NULL to makeADPCMStream()


2011-02-10  Eric Fry <efry at users.sourceforge.net> r1140

	* Added Custom SFX manager class.
	  To use it you'll need a directory containing numbered wav files and a sfx_map.cfg file
	  The sfx_map.cfg file should contain entries that look like this
	  001;005
	  002;002
	  003;001
	  The first number is the nuvie sfx_id. See sfx.h for those
	  The second number corresponds to your wav file eg '2.wav'

	  You then need to set the config/ultima6/sfxdir value to your new custom sfx dir.
	  You will also need to set the config/ultima6/sfx value to "custom"
	 


2011-02-08  Eric Fry <efry at users.sourceforge.net> r1139

	* Fixed Fm-Towns fire sfx. It now plays samples 6, 7 and 8 from sounds1.dat
	  in a random order
	* Added Audio::RandomCollectionAudioStream to implement the fm-towns fire effect.
	* Added Audio::QueuingAudioStream class from scummvm for future use.
	* Disabled FM-Towns clock sfx until I can find out how it works.


2011-02-07  Eric Fry <efry at users.sourceforge.net> r1138

	* Updated autoconf build environment. Thanks to WJP.


2011-02-07  wjpalenstijn r1137

	* Fix warnings

2011-02-07  wjpalenstijn r1136

	* Fix warning (from last commit)

2011-02-06  wjpalenstijn r1135

	* Add consts to many GUI constructors.

	  This is necessary because string literals are passed to them,
	  which are constant.



2011-02-06  wjpalenstijn r1134

	* Fix warnings

2011-02-06  wjpalenstijn r1133

	* Fix compilation/warning

2011-02-06  Eric Fry <efry at users.sourceforge.net> r1132

	* Added music and sfx volume settings. config/audio/sfx_volume and
	  config/audio/music_volume
	* Removed old SDL_Mixer code
	* Removed mixer/algorithm.h
	* Removed old custom obj/tile sound loader code. Need to replace this with
	  CustomSfxManager class


2011-02-06  Eric Fry <efry at users.sourceforge.net> r1131

	* Don't bump/move immobile party members
	* Actors now lay down while sleeping
	* Added circle 2, sleep spell


2011-02-06  Eric Fry <efry at users.sourceforge.net> r1130

	* Fixed bug [1624976] Cant talk to anyone in solo mode


2011-02-06  Eric Fry <efry at users.sourceforge.net> r1129

	* Fixed bug [888112] Can't move stuff out of bags


2011-02-05  Eric Fry <efry at users.sourceforge.net> r1128

	* Added missle, explosion, water wheel, protection field and attack swing sfx
	* Changed some instaces of uint16 to SfxIdType
	* Added new convenience script functions explosion() and projectile() which
	  play sfx along with the animation.
	* Added rubber ducky sfx when you use the rubber duck.


2011-02-04  Eric Fry <efry at users.sourceforge.net> r1127

	* Fixed bug [852844] Rafts go crazy when used; morph to new things
	* Added the ability to (m)ove objects between actor inventories.


2011-02-04  Eric Fry <efry at users.sourceforge.net> r1126

	* Added support for background sfx in new mixer.
	* Added fountain, fireplace, clock sfx.
	* Changed FmtownsDecoderStream into a rewindable stream.
	* Added SfxManager::playSfxLooping(SfxIdType sfx_id, Audio::SoundHandle *handle)
	* Added NUVIE_SFX_NONE as as way to pass back 'no sfx found' status.
	* SoundManager::update_map_sfx() uses SoundManangerSfx objects not Sound classes
	  for processing background sfx.
	* FM-Towns SOUNDS1.DAT has 12 sounds not 13.
	* Combined towns decoder playsample functions.
	* Fixed bug [1624965] Can use skiff from inventory


2011-02-02  Eric Fry <efry at users.sourceforge.net> r1125

	* Added player blocked sfx.
	* Added mirror smashed sfx.
	* Don't change mirror frame_n when it's broken.
	* Added the ability for the FMtownsDecoderStream class to read uncompressed
	  u6lib files.
	* Added support for loading sfx from FM-Towns Sounds2.dat file.
	* Added play_sfx(sfx_id) function to lua script system.
	* Fixed bug when iterating an empty container in script.


2011-02-02  Eric Fry <efry at users.sourceforge.net> r1124

	* Started work on FM-Towns SFX.
	* Hooked up sound efect to hit effect.
	* Added new SfxManager abstract class.
	* Started work on TownsSfxManager class. PCSpeaker and Custom classes to follow.
	* Fixed potential double free on NuvieIOBuffer class.
	* Added SoundManager::playSfx(uint16 sfx_id) method.
	* Added the ability to play fm-towns streams from inmemory buffer.


2011-02-01  Eric Fry <efry at users.sourceforge.net> r1123

	* Added u6 music decoders into new mixer code. This is still a WIP.


2011-01-31  Eric Fry <efry at users.sourceforge.net> r1122

	* Started adding new scummvm mixer into Nuvie. I haven't updated the build scripts yet.


2011-01-26  Eric Fry <efry at users.sourceforge.net> r1121

	* Change party leader when player is rendered immobile.
	* Added script functions party_get_size() party_get_member() and
	  party_update_leader()
	* Removed old script container manipulation code.
	* When attacked in a skiff or raft randomly hit a party member.


2011-01-24  Eric Fry <efry at users.sourceforge.net> r1120

	* Added a new recursive obj iterator in lua script that allows searching through containers.
	  You can now iterate through all items in an actor's inventory, even if they are in
	  containers.


2011-01-23  Eric Fry <efry at users.sourceforge.net> r1119

	* Enabled trap effects when destroying a trapped object. I will link this into
	  usecode at some later stage.
	* Added Obj.removeFromEngine(obj) to script system. This unlinks the selected
	  object from the engine so it can be deleted.


2011-01-23  Eric Fry <efry at users.sourceforge.net> r1118

	* Fixed explosion spell damage.
	* Started moving actor hit/death logic into lua script.
	* Add exp when killing evil actors
	* Fixed issue with actor_randomise_stat() returning 0 where base_stat = 1


2011-01-22  Eric Fry <efry at users.sourceforge.net> r1117

	* Explosion spell now deals damage. This still needs some work.
	* Fixed Actor::set_charmed() and Actor::set_cursed()
	* ExpEffect now takes tile_num as an argument
	* Added spells Curse, Protection, Mass Awaken, Mass Sleep
	* Added modifiers for cursed and asleep actors to actor_dex_adj()
	* Added modifiers for cursed and protected flags to actor_get_ac()
	* Draw cursed actors with blue outline in MapWindow.
	* Added purple potion.
	* lua explosion_start() now returns a table containing all hit actors and objs
	* Changed lua actor.visible getter method to call is_invisible() instead of 
	  is_visible()


2011-01-21  Eric Fry <efry at users.sourceforge.net> r1116

	* Started work on combat flank worktype
	* Fixed some bugs with actor movement in actor_move_towards_loc()
	* Fixed some bugs in actor_calculate_avg_coords() player direction wasn't being
	  set which was causing issues with combat front worktype.
	* Fixed typo bug in actor_wt_timid()


2011-01-20  Eric Fry <efry at users.sourceforge.net> r1115

	* Started work on Berserk worktype.


2011-01-19  Eric Fry <efry at users.sourceforge.net> r1114

	* Added magic screen xor effect to script xor_effect(duration_in_milliseconds)
	* Added circle 5 spell insect swarm
	* Removed 'inactive' field from PartyMember struct. Replaced with calls to
	  is_immobile()
	* Don't move immobile party members. This should fix corpser logic.
	* Return caster location not caster in caster_get_location()
	* Added magic_get_caster() and caster_is_player() functions in magic.lua
	* Converted io.stderr:write() calls to dbg() calls in actor.lua
	* Added logic to set bed frame when pathfinding to WT_SLEEP
	* Added blue potion "use logic"


2011-01-17  Eric Fry <efry at users.sourceforge.net> r1113

	* Added fade effects to caught by guard logic.
	* Added fade_out() fade_in() functions to script system.
	* Modified FadeEffect so it can work asynchronously.
	* Removed some magic numbers in actor.lua script.


2011-01-16  Eric Fry <efry at users.sourceforge.net> r1112

	* Fixed bug with converse check for item. It wasn't checking quality.
	  You should be able to get the keys to the jail cells from Pridgarm now.
	* Added back tick token to the MsgScroll class. This forces the next char
	  to be captialised. e.g. "`jester yells for help" becomes "Jester yells for
	  help"
	* subtract karma from player when guards are called.
	* Added optional 4th argument to lua function map_get_obj(x, y, z, obj_n) this
	  restricts the search to objs of type obj_n.
	* Fixed bug when searching container objects.


2011-01-14  Eric Fry <efry at users.sourceforge.net> r1111

	* Started work on caught by guard logic. The party is now sent to jail.
	  This is still very much a work in progress.
	* Added script functions party_move(), party_set_combat_mode()
	  and party_is_in_combat_mode()


2011-01-13  Eric Fry <efry at users.sourceforge.net> r1110

	* Added guard arrest player worktype 0x12. NPCs will now call guards when attacked.


2011-01-12  Eric Fry <efry at users.sourceforge.net> r1109

	* NPC's will now yell for help and attack when hit by the player.
	* Added actor.temp, actor.corpser_flag and actor.old_frame_n to script system.
	* Added movement flags to Actor class.
	* Added Actor::get_corpser_flag()
	* Added Actor::set_corpser_flag()
	* Corpsers can now drag actors under and regurgitate them back. This is a work
	  in progress. I still need to restrict party member movement when dragged
	  under.


2011-01-10  Eric Fry <efry at users.sourceforge.net> r1108

	* Added 'work' worktype.


2011-01-10  Eric Fry <efry at users.sourceforge.net> r1107

	* Actors now walk to their scheduled locations again.
	* Fixed bug with game_hour not being set in ActorManager on load.
	* Added Actor.walk_path(actor) and Actor.is_at_scheduled_location(actor) to
	  script.
	* Fixed bug with setting worktype from script.
	* Added actor.sched_wt to get the worktype from the current schedule record.


2011-01-06  Eric Fry <efry at users.sourceforge.net> r1106

	* Fixed bug with slime frames
	* Don't twitch paralysed actors
	* Added actor_remove_charm() This still needs some work.


2011-01-06  Eric Fry <efry at users.sourceforge.net> r1105

	* Added actor flags to the script system.
	  -protected
	  -cursed
	  -charmed
	  -paralyzed
	  -asleep
	* Fixed up paralyze spell.
	* Added actor_update_flags(actor) This is called each game turn. It allows
	  actors to update their flags e.g. come out of paralysed state. They need to
	  beat a die roll to break the spell. This function also handles taking damage
	  from poison.


2011-01-04  Kirben r1104

	* Small change for MinGW compile.

2011-01-04  Eric Fry <efry at users.sourceforge.net> r1103

	* Fixed freeze when the avatar died and was teleported back to LB's castle.


2011-01-04  Eric Fry <efry at users.sourceforge.net> r1102

	* Finally fixed targetting from magic spells. You can now select your target
	  when casting.
	* Made blood objects temporary.
	* Added stub for first circle 'light' spell.
	* Replaced debug print messages in actor.lua with calls to new dbg(msg)
	  function.
	* Fixed object status when searching a container.


2011-01-03  Eric Fry <efry at users.sourceforge.net> r1101

	* You can now drag and drop objects into containers in an actors inventory.
	* Fixed bug where temp actors weren't being marked as temp when loading the game
	* Fixed bug where engine location wasn't being updated when adding inventory to
	  the dead body container object when an actor died.
	* Fixed issue moving objects into bags on the map.
	* Don't allow drag and drop map to map.


2011-01-02  Eric Fry <efry at users.sourceforge.net> r1100

	* Fixed moving objects into containers. You can now 'M'ove an object into
	  a bag, open chest or spellbook.
	* Update slime frames when moving.
	* Added Actor.get_player_actor() to lua script.


2011-01-01  Eric Fry <efry at users.sourceforge.net> r1099

	* Added Like and Unfriendly worktypes.
	* Fixed some issues with stationary worktype.
	* Fixed typo in tangle worktype.


2011-01-01  Eric Fry <efry at users.sourceforge.net> r1098

	* Added Mouse, Retreat and Flee worktypes.
	* Fixed bug with wander near player worktype.


2011-01-01  Eric Fry <efry at users.sourceforge.net> r1097

	* Added combat assault worktype. The opening fight with the gargoyles should work
	  now.
	* Fixed bug when removing temp egg object from the start of the game.
	* Fixed some bugs in the new scripted combat worktypes.
	* Replaced some instances of delete obj; with delete_obj(obj);


2010-12-30  Eric Fry <efry at users.sourceforge.net> r1096

	* Fixed some bugs with worktype movement.
	* Added more local keyword to variables in init.lua


2010-12-29  Eric Fry <efry at users.sourceforge.net> r1095

	* Added magic to combat. magic_cast_spell(spell_num, caster, target)
	* Added worktype combat front. This is a WIP. It still doesn't seem quite like
	  the original. I'll have to check the logic.
	* Fixed bug with range weapons in npc worktype attack. They were incorrectly
	  set to a range of 1 because I was passing the weapon object not the obj_n to
	  the range calculation routine.
	* Fixed some issues with variables not being defined as local in lua script.
	* Chamged loads of variables to local in actor.lua
	* Added new magic support functions to help with casting spells from combat.
	  select_location(), caster_get_location()
	* Started spells lightning and paralyse.
	* More work on spell explosion.
	* Leave trail in projectile anim in ExpEffect.


2010-12-28  Eric Fry <efry at users.sourceforge.net> r1094

	* Added function Actor.inv_get_obj_total_qty(actor, obj_n) to script.
	* Fixed several bugs in the triple cross bow logic.
	* Some general cleanup in actor.lua


2010-12-27  Eric Fry <efry at users.sourceforge.net> r1093

	* Added U6Link reference counting to nscript_actor_inv()
	* Fixed boomerang return animation.
	* Fixed calls to actor_attack() from worktype scripts.
	* Added slime frame update logic to script. (I might move this into the
	  existing C++ U6Actor:move() function)


2010-12-27  Eric Fry <efry at users.sourceforge.net> r1092

	* Added "Slime Divides!" logic.
	* Added ActorManager::clone_actor() which clones an actor as a new temp actor.
	* Added ActorManager::can_put_actor() which checks if and actor could be placed
	  a a given map location.
	* Added a reference count retain/release locking system to the U6Link object.
	  We use this to allow the scripting system to iterate over a U6LList while
	  entries are being removed.
	* Added new "__gc" method to nuvie.U6Link metatable in script.
	* Added map_can_put(x, y, z) function to lua script.
	* Added Actor.clone(actor, x, y, z) to lua script.


2010-12-23  Eric Fry <efry at users.sourceforge.net> r1091

	* Changed lua attack script to dump container contents to the map when the
	  container is destroyed. e.g. when attacking crates, barels, chests etc.
	* Changed ObjManager::moveto_map() to take location as an argument.
	* Added MapCoord(Obj *obj) constructor.
	* Added new container_objs() lua function. This provides an iterator
	  across an object's container items.
	  e.g.
	  for child_obj in container_objs(obj) do
	  end
	* Removed the old obj.container get function.
	* Changed the interator provider functions to return the iterator
	  even in the obj_list returns null. This allows us to write code to
	  iterate over empty object lists in lua.



2010-12-22  Eric Fry <efry at users.sourceforge.net> r1090

	* Added hit animation when attacking objects.
	* Added HitEffect(MapCoord location) so we can show hit anim on objects.
	* Removed code that set the obj->qty to 1 if it was 0 when being read in from
	  the save file. (We'll need to be careful to make sure no existing
	  functionality is broken by this change.) This fixes the bug where the player
	  could attack steel doors.
	* HitAnim no sends the MESG_ANIM_DONE message when it is finished. This allows
	  us to use it in the AsyncEffect.
	* Added Event::update_timers() and added it to Game::update_once() so we can
	  update timedEvents from the AsyncEffect.
	* Clear cursor before calling Player::attack() so it doesn't cover the hit
	  animation.
	* Added hit_anim(x, y) function  to lua script. which displays the hit tile
	  at location then returns.


2010-12-21  Eric Fry <efry at users.sourceforge.net> r1089

	* Attacks can now hit objects. You can break doors and smash mirrors.
	* Fixed tile rotation amount in projectile animation where rotation amount was
	  less than initial tile rotation amount.
	* Removed actor hit call from ProjectileEffect. The hit is now handled in 
	  script
	* Added retain/release system to Effect objects. This allows the AsyncEffect
	  to hold onto an Effect after it would have been removed by the EffectManager.
	  We need this to allow the ProjectileEffect to pass back hit obj/actor data
	  to the caller.
	* The ProjectileEffect object now keeps a vector of hit entities (objects
	  and actors) and can pass this vector back to the caller after the effect is
	  complete. We will use this for the explosion effect which hits multiple
	  actors.
	* Added player_get_karma() and player_set_karma() functions to lua script.
	* Added player_subtract_karma() player_add_karma() functions to init.lua
	* Added new actor_hit(defender, max_dmg) function to actor.lua This is based
	  on the hit logic from the original game.exe
	* Call Mapwindow::updateBlacking() after calling actor_attack() script. This is
	  incase the actor attacked a door which broke.


2010-12-17  Eric Fry <efry at users.sourceforge.net> r1088

	* Fixed bug in Actor::inventory_del_object() It wasn't counting objects with 0 qty.
	  They really have a qty of 1


2010-12-16  Eric Fry <efry at users.sourceforge.net> r1087

	* Started changing attack logic to be based on target location not actor.
	  This will allow us to attack objects as well as actors.


2010-12-16  Eric Fry <efry at users.sourceforge.net> r1086

	* Fixed bug with single ProjectileEffect constructor.


2010-12-16  Eric Fry <efry at users.sourceforge.net> r1085

	* Added correct targets for triple crossbow animation
	* Added an initial tile rotation amount to the projectile anim logic
	  so tiles that not orientated straight up are drawn correctly when rotated.
	  eg crossbow bolts, arrows and spears.


2010-12-15  Eric Fry <efry at users.sourceforge.net> r1084

	* Added the ability to specify multiple targets to ProjectileEffect class.
	* Added misc/U6LineWalker.cpp/h files to Make build scripts.
	* Added new projectile_anim_multi() function to lua script.
	* Added stub support for triple crossbow animation. Need to fix values
	  based on original game logic.


2010-12-15  Eric Fry <efry at users.sourceforge.net> r1083

	* Lots of work done on new lua scripted combat and actor movement logic.
	* Changed ActorManager::moveActors() to call the new actor_update_all() lua
	  script. This is still very much a work in progress.
	* Changed blocking check on TossAnim class.
	* Added U6LineWalker class which can plot a line using the original U6 line
	  drawing algorithm.
	* Added new ProjectileAnim class which should be closer to the original U6
	  animation logic.
	* Added new ProjectileEffect and ExpEffect classes which use the new
	  ProjectileAnim class.
	* Added a new effect class. AsyncEffect. Which allows for effects to be run
	  while you wait. This is used to add inline effects to lua scripts.
	* Added new Game::update_once() method which is used in the asynchronous
	  effect class. This method updates the game objects without polling or
	  handling events. It can be used within scripts.
	* Changed ObjManager::moveto_map() to add objects to the top of the stack not
	  the bottom. (firefield objects created by lua script were ending up under
	  carpet in LB's throne room.)
	* Added map_is_water() and projectile_anim() functions to the Script system.
	* Added magic circle 5, explosion spell.

2010-10-04  Eric Fry <efry at users.sourceforge.net> r1082

	* Don't assume that the "HOME" environment variable will be defined when 
	  checking for .nuvierc file.

2010-09-30  Eric Fry <efry at users.sourceforge.net> r1081

	* Moved event->look code into Lua script code.
	* Added direction routines to u6/init.lua
	* Script changes:
	* Added the ability to iterate through party members.
	  eg.

	  for actor in party_members() do
	     -- do something with actor here. 
	   end
	   
	* Added usecode_look(obj) which calls the C usecode look function for a
	  given object.
	  At some stage we should move usecode into script.
	* Added Script::call_actor_update_all(); in readiness for moving actor
	  update/worktype logic into script.
	  This routine calls the lua function "actor_update_all()" from C
	* Added bool Script::call_look_obj(Obj *obj) which calls the new "look_obj"
	  lua function.
	* Added the following Obj script variables.
	  obj.look_string - returns the look string as given by ObjManager::look_obj()
	  obj.stackable - returns boolean whether the object is stackable
	  obj.weight - returns the object's weight

	* Added Actor.inv_remove_obj(actor, obj) which calls Actor::inventory_remove_obj(obj)
	* Added Actor.inv_remove_obj_qty(actor, obj_n, qty) which removes qty from
	  objects of type obj_n in the actor's inventory. It returns the number of
	  objects actually removed.
	* Added the following actor script variables.
	  actor.alive - returns boolean whether the actor is alive
	  actor.in_party - returns boolean whether the actor is in the party
	  actor.sched_loc - returns the actor's current schedule location
	  actor.visible - returns whether the actor is currently visible
	* Changed nscript_actor_hit() to force hit.
	* Changed nscript_actor_move() to return boolean whether the move was successful.

2010-09-29  Eric Fry <efry at users.sourceforge.net> r1080

	* Added Zu Ylem as a readiable object.
	* Added "nbool Actor::get_schedule_location(MapCoord *loc)"
	* Fixed bug in
	  uint32 Actor::inventory_del_object(uint16 obj_n, uint32 qty, uint8 quality)
	  where qty wasn't being handled correctly.
	* Changed str_bsearch() function to take const args.

2010-09-28  luteijn r1077

	* Added a couple of objects missing from U6objects.h to it, and used the
	  definitions in that file to rewrite the routine that determines which
	  objects are stackable for U6 as a case statement.

2009-06-25  Eric Fry <efry at users.sourceforge.net>
	* Added new lua function objs_at_loc() this is used to iterate
	  through objects at a given map location.
	  eg.
	    for obj in objs_at_loc(x,y,z) do
	       print(obj.name)
	    end
	* Disabled old C attack code. This disables missle animation
	  it needs to be moved into the lua attack script.

2009-06-24  Eric Fry <efry at users.sourceforge.net>
	* Started moving actor attack logic into lua script.
	* Removed actor.lua from compilable sources in XCode build env.
	* removed C randomise_base_stat() this is handled in script now.
	* Clamp actor experience at 9999 as per original game.
	* Fixed targeting range on crossbow weapon.
	* Added abs() lua function.
	* Added new U6LList iterater into lua script.
	  you can now iterate through object lists in script.
	  nscript_u6llist_iter()
	* Added actor_inventory() to lua
	  eg.
	    for obj in actor_inventory(actor) do
	       print(obj.name)
	    end
	* Added Script::call_actor_attack() to hook new script based attack logic.
	* Added 'readied' get variable to lua Obj class.
	* Split actor set/get names into two arrays. We can now have get or set
	  only members.
	* Added new luatype member to lua Actor class. This is used to determine if
	  a userdata obj is of type actor. There might be a better way to handle
	  this.
	  eg if actor.luatype == "actor" then
	* Added actor name member. This is get only.
	* Added Actor.inv_has_obj_n() this function checks a given actor's inventory
	  for an obj_n It uses the Actor::inventory_has_object() method.

2009-06-09  Eric Fry <efry at users.sourceforge.net>
	* Moved Script.cpp/h to new script dir
	* Moved Script Actor code into new ScrptActor.cpp/h files
	* Reworked lua actor_init call to remove need for lua compiler.
	* Removed Actor stat initialisation from U6Actor class
	* Delete object in Actor::inventory_del_object() if qty to delete
	  is >= obj->qty
	* Added Actor::inventory_del_all_objs()
	* Delete old inventory objects when creating a new temp actor.
	* Added get_frame_n(), set_obj_n() and set_frame_n() to Actor class.
	  Used in scripting
	* Fixed typo in actor.lua actor_init() when initialising spells.
	* Set Torch qty to 1 when creating temp actors. Fixes a bug with a guards.
	* Added Actor.inv_ready_obj() to lua scripting
	* Ready weapon/armor objects in actor_init script
	* Fixed build environments for new script dir.

2009-06-05  Eric Fry <efry at users.sourceforge.net>
	* Started work on temp actor inventories in lua.
	* Added more variables to the Lua actor class.
	* Started moving temp actor init over into lua.
	* Added lua language association to source files in XCode build env.

2009-05-25  Eric Fry <efry at users.sourceforge.net>
	* Added randomise_base_stat() to randomise new actor stats like the original. 
	* Added level to new temp actor.

2009-05-22  Eric Fry <efry at users.sourceforge.net>
	* Reworked SaveGame::load_original() to use config_get_path()
	* Removed SaveGame::get_objblk_path()
	* Added includes to fix compiling on Ubuntu 9.04
	* Added case insenstive file finding to config_get_path() Nuvie should
	  now load game files even if they are the wrong case on case sensitive
	  filesystems like Linux

2008-07-01  Eric Fry <efry at users.sourceforge.net>
	* Fixed XCode build script when used with XCode 3.0 Thanks
	  to the_letter_m for supplying a patch.

2007-08-10  Pieter Luteijn <luteijn at users.sourceforge.net>
	* Added MsgScroll->printf(), and redefined nuprint to use it
	  Only did minimal testing as nuprint is hardly used.

2007-08-09  Pieter Luteijn <luteijn at users.sourceforge.net>
	* DEBUG macro, rewriting of (almost) all debug output to use it.

2007-08-06  Eric Fry <efry at users.sourceforge.net>
	* Changed Obj from struct to class. Moved to its own file.
	* Fixed memory leak in Converse with script not being freed on stop()
	* Fixed bug [1766551] Killing party member crash.
	  (problem with Actor::get_name() calling Party)
	* Fixed copyright in GameClock.h
	* Set GameClock variables to 0 on init
	* Fixed crash when quitting caused by bad obj handling in EggManager.
	  (Eggs are always loaded on the map now)
	* Fixed up some Obj container functionality.
	* Removed ObjManager::obj_add_obj()
	* Added stacking support to Obj::add()
	* Added Obj::add_and_stack() to help Obj::add() with stacking
	* Added U6LList::replace() which replaces data directly in the list. 
	* fixed bad assert() in ObjManager::list_add_obj()

2007-08-02  Pieter Luteijn <luteijn at users.sourceforge.net>
	* SE/MD portrait support. Functional (barely) but needs work.

2007-08-02  Joseph Applegate <sb-x at users.sourceforge.net>
	* Fix bug in spellbook, which was showing itself in the equipment list
	  twice when used. You're not really supposed to be able to Use it.
	* As discussed not long ago in #nuvie, replaced the "set" prefix on
	  Obj::on_map/in_inventory/in_container. This must have been overlooked
	  when merging the scripting branch in.

2007-08-02  Eric Fry <efry at users.sourceforge.net>
	* Merged changes from ERIC_SCRIPING_BRANCH into main branch.

	* Added ObjManager::remove_obj_from_map()
	* Removed ObjManager::is_held() Obj::is_held() replaced with 
	  Obj::is_in_inventory()
	* Changed Obj *Obj::parent_obj to void *Obj::parent
	* Removed need for Obj::objblk_n replaced with Obj::parent
	* Obj::parent now contains a pointer to either an Actor, Obj or map U6LList 
	  object
	  Added Obj::get_actor_holding_obj()
	* Fixed Obj::is_in_ methods
	* Added nuvie_status variable to Obj This holds info on the obj's location 
	  in the engine and whether the object is being used by the scripting 
	  engine. Possible obj locations are OBJ_LOC_NONE, OBJ_LOC_MAP, 
	  OBJ_LOC_CONT, OBJ_LOC_INV and OBJ_LOC_READIED
	* Increased container parent index from 11 to 16 bits. 
	* Added the ability to search desks.
	* Moved partyView up one pixel.
	* Fixed sun/moon locations.
	* Added Obj::remove(Obj *obj) which removes children from a container.
	* Changed spell incantation buffer from 25 to 4.
	* Added contents of data/ directory into XCode build environment resource
	  section.
	* Replaced ObjManager::get_obj_container() with Obj::get_container_obj()
	* ObjManager find object now searches containers on maps. I needed this for 
	  the new resurrection functionality. (finding lost body objects from the 
	  map)
	* Changed Party::remove_actor() so that it doesn't remove party status from 
	  the actor if they are being removed due to death. This allows the Party 
	  object to resurrect them at a later stage. By looking for dead actors with
	  is_in_party() set to true.
	* Added Party::resurrect_dead_members() this gets called when the avatar dies
	  and all dead party members are resurrected.
	* Added Actor::resurrect() this function takes the body object and moves and
	  inventory back to the actor as well as setting the actor back into a live 
	  state.
	* Added Actor::find_body() this method looks on the map for the dead actor's
	  body object. This is used by the new resurrection code.
	* Added define ACTORMANAGER_MAX_ACTORS to ActorManager to get rid of some 
	  magic numbers.
	* Added U6Actor::add_blood() which adds some random blood at the actor's
	  current position. Still need to do some work on blood handling in nuvie.
	* Added Magic::spellbook_has_spell() which checks a given spellbook obj for a
	  certain spell. Added define MAGIC_ALL_SPELLS
	* Look inside containers in inventory for items. This enables converse
	  resurrection to find actors carried in a container in a party member's
	  inventory.
	* Added CGA/EGA graphics support to Nuvie. You can activate it with
	  <general><dither_mode>cga|ega|none</dither_mode></general>
	* Added new class Dither. This is used to dither bitmaps down to the correct
	  dithering mode. Called from tilemanager, background and portrait.
	* Added new bg_color variable to GamePalette so we can change the index
	  of the background color. This is then passed to views and other widgets.
	  So they don't need the magic number 0x31 anymore.
	* Added nuvie.cfg.sample into XCode build environment.
	* U6Usecode, fix torch and powder keg usecode for new Obj::is_in_container()
	  check, explode kegs over actor or container holding them, don't allow
	  equipping a torch from a container (for now)
	* Added new lua based magic scripting system.
	* Added support for the following spells. (Note magic target location is
	  currently hard coded for the tile directly above the avatar.)

	  Create Food - (imy)
	  Detect Trap - (wj)
	  Douse - (af)
	  Harm - (am)
	  Heal - (im)
	  Ignite - (if)
	  Poison - (inp)
	  Telekinesis - (opy)
	  Trap - (ij)
	  Unlock Magic - (ep)
	  Untrap - (aj)
	  Dispel Field - (ag)
	  Magic Lock - (ap)
	  Fire Field - (ifg)
	  Locate - (iw)
	  Poison Field - (ing)
	  Sleep Field - (izg)
	  Energy Field - (isg)
	  Kill - (ic)
	  Eclipse - (val)
	  Resurrect - (imc)
	  Summon - (kxc)
	  Tremor - (vpy)

2006-12-31  Joseph Applegate <sb-x at users.sourceforge.net>
	* Targeting and input has been changed to remove excess Event modes.
	* The various modes have been replaced with an EventInput state, and
	  pointers to all aquired input. Usually a mapcoord is all that is needed.
	  Event actions (or an external class) call one of the get_target methods
	  to enter INPUT_MODE and aquire a certain type of input. This changes the
	  type of prompt the player sees. (such as targeting-cursor or use-cursor)
	  When the player selects some object or entering input, one of the select
	  methods is called. This stores the input, returns to the previous mode
	  (pops back), and calls doAction() for that mode.
	* Other changes to Event:
	  Added moveCursorToInventory() and moveCursorToMapWindow() to be the one
	  true method of showing the targeting cursor.
	  Several subtle fixes, likely replaced with more subtle bugs.
	  Now you can use the plus and minus keys on the numpad to change which
	  party member's inventory is shown. This was possible in U6.
	  Keys 1 through 9 can now be used to select party members for certain
	  actions, like Talk.
	  The obsolete useselect(), freeselect(), and select_obj() functions have
	  been removed.
	  Can no longer talk to party members offscreen.
	  Can now only Get objects that are on the ground, to prevent it being
	  called for objects in inventory. This will cause a problem when we
	  implement container view.
	* U6UseCode: Targeting and input changes. Replaced Event::freeselect() and
	  Event::useselect() with get_target(), and get_direction(), respectively.
	  You must also call Event::request_input() to get input from Event.
	* A MESG_DATA_READY message to an object now causes the object to be used,
	  not messaged. (easier to get input in UseCode functions this way) A
	  pointer to the EventInput structure from Event is passed as data.
	* Musical instruments (play_instrument) now take key input.
	* InventoryView.cpp: Handle numpad keys. No longer handles the TAB key.
	* Actor: Prints a message when player's glass sword breaks while attacking.
	* MapWindow: Mouse pointer is now set to crosshairs when getting input.

2006-09-29  Pieter Luteijn <luteijn at users.sourceforge.net>
	* MD/SE dialogue gets loaded and used. Basic support, but probably
	  needs further work to make it fully work.

2006-09-06  Pieter Luteijn <luteijn at users.sourceforge.net>
	* Don't try to get ultima6 native music when loading martian or
	  savage.

2006-09-01  Joseph Applegate <sb-x at users.sourceforge.net>
	* Added TangleVines and some tangle vine dropping code. Initializing new
	  tangle vines is still very broken.
	* Added TangleVine actor to U6ActorTypes list. Please review the animation
	  settings here.
	* Renamed U6Actor::wt_beg() to wt_converse. Actors with this worktype now
	  change to wt_wander after talking to the player.
	* Also in U6Actor: Removed wt_farm_animal_wander().
	  Changed new silver serpent length from 5-9 to 4-8.
	  Added tangle vines to list of damaging objects, and added damaging tiles
	  lava and swamp, which doesn't poison the player while wearing swamp
	  boots. All of this code should probably be in update(), update_time(),
	  or pass() so it hurts actors who are standing still.
	* Sleep fields make the actor fall asleep.
	* U6UseCode: Disallow powder kegs being lit from inside containers. (for
	  now)
	  Replaced redundant and dangerous (could have been called on kegs in
	  containers) code destroying powder kegs with destroy_obj().
	* Added more paranoid assertions to torch usecode, and removed some
	  negative logic there.
	  Removed incorrect obj->is_in_inventory_new() check when lighting a 
	  torch.
	* UseCode::destroy_obj: Make sure objects to be destroyed are on the map
	  before removing them. Clarified commented out code, to be uncommented
	  when obj_remove_obj() exists.
	* Renamed Obj::in_container/in_inventory/on_map/readied to
	  Obj::set_in_container/set_in_inventory/set_on_map/set_readied per Nuvie
	  convention, and because the functions are more obvious that way.
	* ObjManager: Moved some status flag definitions. Replaced
	  OBJ_STATUS_MASK_GET and OBJ_STATUS_MASK_SET with OBJ_STATUS_POS_MASK,
	  which is simply inverted to clear the relevant flags. The meaning of
	  the one mask is more obvious this way.
	* Moved the Obj position checks around so they're closer to the new set
	  functions.
	* More paranoid assertions in ObjManager. (replacing an incorrectly used
	  clamp_min, and to make sure we dont try to remove objects that aren't
	  on the map)
	* Replaced the assertion that an object is in a container in
	  ObjManager::get_obj_container(). If this breaks something or needs to
	  return NULL, we can change it back.
	* Tried to clarify how Pieter's WRAP_COORD works, and make it not rely so
	  much on actual plane number, but it looks even more confusing now.
	* Removed no longer needed code in Actor.cpp.

2006-08-28  Pieter Luteijn <luteijn at users.sourceforge.net>
	* Moongates don't (dis)appear yet based if there are(n't) any moons in
	  the sky, but they do work now, since their usecode is in. Try the
	  permanent moongate at the Spirituality shrine.
	* Moonstone usecode needs fine tuning but basic usecode functionality
	  is there. You can bury the moonstones somewhere else and the
	  destination/burial table is updated.

2006-08-25  Pieter Luteijn <luteijn at users.sourceforge.net>
	* Started on Blue Moongate support
	* Small improvement to thrown weapon support

2006-08-22  Eric Fry <efry at users.sourceforge.net>
	* Changed Actor::get_location() to accept NULL values. It doesn't
	  return coord variables if NULL is passed.
	* Added _div _gt _get_actor_attrib to Magic. They do integer division,
	  greater than comparison and retrieve Actor attributes respectively.
	* Added Locate spell script. Note! I'm not handling the dungeon levels
	  at the moment.
	* Changed string2npc to push the actor number not a pointer to the
	  Actor object.

2006-08-20  Eric Fry <efry at users.sourceforge.net>
	* Removed Silver Serpent Venom from use_food()
	* Changed use rubber ducky message to 'Squeak!' as per the original.
	* Added a note to the TODO document telling readers about our new
	  progress documents which are located in the docs/ cvs repository.

2006-08-15  Pieter Luteijn <luteijn at users.sourceforge.net>
	* Get can now get into containers. (doesn't help with the spellbook,
	  as you can't 'open' that; still need to fix move/push for this)
	  Move/Push needs to be fixed anyway so it can be used to move stuff
	  between partmembers. Planning to 'fix' usecode to also work with
	  containers but no time yet.
	* Get weight check fixed for containers to not allow you to get more
	  than your allowance by getting a light bag with heavy content. 

2006-08-14  Pieter Luteijn <luteijn at users.sourceforge.net>
	* Bug in adding up weights of contained objects in a container, the
	  recursive call was setting the wrong flag (include containers was
	  set to false, scale was not set so defaulted to true). Also added 
	  some defines to hide the 'magic numbers'
	* When checking if container weights were now the same as in the
	  original I found bugs in ObjManager::get_obj_weight() and related
	  stuff.
  
	  The original: 
	   Thou dost see 1 torch. It weighs 0.5 stones.
	   Thou dost see 5 torches. They weigh 2.5 stones.
	   Thou dost see 8 portions of meat. They weigh 1.6 stones.
	   Thou dost see 20 gold coins. They weigh 0.2 stones.
	   Thou dost see 1 gold coin.
	   Thou dost see 10 bits of sulfurous ash. They weigh 0.1 stones.
	   Thou dost see 9 bits of sulfurous ash.
	   Thou dost see 1 bit of sulfurous ash.
	   Thou dost see 10 silver snake venom. They weigh 5.0 stones.
	   
	  Nuvie (before): 
	   Thou dost see 1 torch. It weighs 0.1 stones
	   Thou dost see 5 torches. They weigh 0.2 stones
	   Thou dost see 8 portions of meat. They weigh 0.2 stones
	   Thou dost see 20 gold coins. They weigh 0.2 stones
	   Thou dost see 1 gold coin. It weighs 0.0 stones
	   Thou dost see 10 bits of sulfurous ash. They weigh 0.1 stones
	   Thou dost see 9 bits of sulfurous ash. They weigh 0.1 stones
	   Thou dost see 1 bit of sulfurous ash. It weighs 0.0 stones
	   [doesn't allow stacking of silver snake venom, Zu Ylem]

	  So Nuvie was:
	     A displaying spurious searching here messages when objects are on
	     the floor, and not displaying the attack/defense values. 
             This bug is not shown above for clarity/brevity
	     B rounding incorrectly
  	     C not putting the final period.
	     D showing weight when 0<weight<0.1 (because not rounding
		 properly?)
	     E dividing all stackables' weight by 10, not just reagents, gold
	       coins (anything else?)
	       to decide if object needs division by 10 or by 100, I hoped to
	       be able to use a tileflag, not just hardcode it. There's only 3
	       unknown tileflags left; stackability is based on having plural,
	       this is wrong, as original allows you to stack silver snake
	       venom. Here's an overview of most (all?) stackable items and
               their tileflags. (R=has reduced weight in original, U = Unit
               Weight from TileManager)
	         tile R U NESWDMBw hvAtlbLL Ar???fo!
		 0566 n 1 00000000 00000000 10000000 arrow\s
		 0567 n 1 00000000 00000000 01000000 bolt\s
		 0574 n 1 00000000 00000000 01000000 lock pick\s
		 0576 y 1 00000000 00000000 01000000 black pearl\s
		 0577 y 1 00000000 00000000 00000000 bit\s of blood moss
		 0578 y 1 00000000 00000000 00000000 bulb\s of garlic
		 0579 y 1 00000000 00000000 00000000 ginseng root\s
		 0580 y 1 00000000 00000000 00000000 mandrake root\s
		 0581 y 1 00000000 00000000 00000000 nightshade mushroom\s
		 0582 y 1 00000000 00000000 00000000 strand\s of spidersilk
		 0583 y 1 00000000 00000000 00000000 bit\s of sulfurous ash
		 0595 n 2 00000000 00000001 01000000 gem\s
		 0601 n 5 00000000 00000000 01001000 flask\s of oil
		 0608 y 1 00000000 00000000 00000000 gold coin\s
		 0609 n 1 00000000 00000000 01000000 gold nugget\s
		 0610 n 5 00000000 00000000 01001000 torch\es
		 0612 n 5 00000000 00000000 11001000 Zu Ylem
		 0613 n 5 00000000 00000000 11001000 silver snake venom
		 0656 n 3 00000000 00000000 01001000 loa/f\ves of bread
		 0657 n 2 00000000 00000000 11001000 portion\s of meat
	       there's no difference between lock pick and black pearl, except
	       for the latter being 10x lighter.. So can't use tileflags to
	       decide. Also there seems to be no 'stackable' tile flag, which
	       is probably why the 'has_plural' hack is used
	       
          Nuvie (after):   
	    A Searching here bugs still present.
	      attack/defense values already has some code and I think I
	      improved it a little, e.g. actually looking up the values, and
	      working properly for items that just have defense..
	      print_obj() needs to print the combat values too (now only
	      made it print damage and defense ratings.)
	    B Fixed  
	    C Fixed
	    D Fixed because B fixed.
	    E Fixed, although I've hardcoded the items that have reduced
	      weight, and might have missed some. FIXME should be a file in
	      the data directory so can be patched for new games.
	      Didn't fix is_stackable yet, but probably will eventually.

  	* tileflag definitions completed (still some unknows) and re-ordered
	* look at spellbook slightly improved
	* Main_Gauche defense value set to 1 instead of 0. Had to do this in 2
	  places (hopefully not in more, because only did 2) should be fixed
	  to be central location, hopefully as an external file (hardcoding is
	  evil)
	* a few direct manipulations of obj->status changed to calls to
	  obj->in_inventory etc. This also meant some checks could be removed.
	  didn't finish this yet as ran into the weight bugs and wanted to fix
	  those to help with further debugging ;)

2006-08-14  Eric Fry <efry at users.sourceforge.net>
	* More work done on map wrapping. You should be able to cross over the
	  ether in a balloon now. More work still needs to be done on wrapping.
	* Fixed bug while saving nested containers. A container in a container
	  wasn't saving properly. This was because we weren't incrementing
	  the object count before saving the container items.
	* Removed some more magic numbers from Party. Added more objlist offset
	  defines.
	* Changed they way we check for in vehicle status when loading the
	  Party class. We now check for the player worktype(0x2) on the vehicle
	  actor(0).
	* Set actor to worktype 0x2 when selected as the player actor.
	* Fixed bug when loading a save game in vehicle. We weren't making the
	  vehicle actor the player when loading because it wasn't deemed to be
	  in the party. We now add it as the player if party is set to
	  in_vehicle.
	* Removed duplicate OBJ_U6_TANGLE_VINE_POD define.
	* Changed the search order when looking for seats/dangerous objects in
	  U6Actor::move() to fix a bug when sitting on stools. Hopefuly this 
	  doesn't break anything.
	* Fixed bug when sitting on LB's throne. You could sit on the tile next
	  to the actual seat. This was because the throne obj is a double width
	  obj. restricted seat to left tile.
	* Changed U6Actor::move() obj check from if's to a switch statement.
	* Added log saw as a dangerous object in U6Actor::move() stepping
	  on this object will cause the actor to be hit for up to 32 points.
	* Selecting the actor tile in the inventory widget shows the party view
	* Returning from a container nolonger jumps back to the top level
	  inventory. Added InventoryWidget::set_prev_container() which shows
	  the parent object when returning from a container.
	* Reset the InventoryWidget to the top when returning from a container.

2006-08-11  Pieter Luteijn <luteijn at users.sourceforge.net>
	* cleaned(?) up confusion with on_map, in_inventory, in_container,
	 equipped status 'flags' as these are mutually exclusive, so use a 2
	 bit field instead of 4 bit flags. Because of this they can't be just
	 or-red in / and-ed out. 

	* Magic fixes (error messages, logic)
	* fixed an obj duplication bug in obj_add_obj
	* added setting of obj->parent_obj when loading a game
	  needs more testing I think.

2006-08-10  Pieter Luteijn <luteijn at users.sourceforge.net>
	* added position parameter to list_add_obj (defaults to 0)
	* added Obj *parent_obj to Obj struct.
	* added a obj_add_obj that uses list_add_obj to add an object to a
	  container, to allow updating the parent_obj.
	  nothing uses this yet but can call the function from
	  debugger and move e.g. spells into the spellbook.
	* added printing of (Obj *) obj (and prepared for (Obj *) parent_obj) to
	  print_obj to help with debugging this.
	* fixes to magic system regarding looking into empty books..
	* added an effect to the Tremor spell script and some initial stuff to
	  the gate travel spell. This will need function_input to be fixed.
	  
	* Added newline at end of file Weather.cpp (fix a warning)
	* Added macros WRAPPED_COORD(c,level), WRAP_COORD(c,level)
	  The first returns wrapped version of c, without changing c itself;
	  the other does modify c. Use the first version for things
	  like (x+1) or when you still need the unwrapped version.

2006-08-09  Pieter Luteijn <luteijn at users.sourceforge.net>
	* use balloon from other's inventory.
	* disallow balloon use underground
	* move to edge of map without crashing.
	* wrap around map (at least works with balloon, need to test more)

2006-08-08  Joseph Applegate <sb-x at users.sourceforge.net>
	* Don't try to display a sun tile at night. Fixes fireplace moon.
	* Added use orange potion. (sleeping potion)
	* Fixed torch lighting to prevent double lighting effects; don't
	  toggle_frame() before actually lighting the torch, and don't remove
	  lighting effect in usecode. **There is a double or invalid free or
	  being detected somewhere.**
	* Now setting and checking Party member inactive flag. (Party::set_active)
	* Another small light fix in Actor, and now using a list to prevent
	  adding double light effects. (Actor::light_source)
	* New function Actor::is_paralyzed() checks associated flag.
	* Renamed actor alignment flags. (to be shorter and more accurate)
	* Added Tangle Vine actor types.

2006-08-08  Eric Fry <efry at users.sourceforge.net>
	* Using a fan now changes the wind direction in a clockwise direction.
	* Added Weather::set_wind_dir() and Weather::clear_wind()
	* Fixed bug with wind dir string.
	* Stopped wind change timer when loading a save game.
	* Removed Weather::init() This is no longer needed as we set our wind
	  change callback in the new set_wind_dir() method.

2006-08-06  Pieter Luteijn <luteijn at users.sourceforge.net>
	* Added in Sam Matthews' lighting fixes.

2006-08-06  Eric Fry <efry at users.sourceforge.net>
	* Added new Weather class. This looks after wind direction and solar
	  eclipses in U6. In the future it will be expanded to coordinate
	  more weather effects like rain, snow, fog etc. It still needs some
	  work. You can see the surface wind direction while in dungeons.
	* Added Solar Eclipse spell. The eclipse will last between 10 and 29
	  turns.
	* CommandBar now displays wind direction gathered from the Weather
	  class.
	* CommandBar now inherits from CallBack class.
	* Changed _random function from rand() to NUVIE_RAND() in Magic.
	* Added eclipse function to Magic.
	* Wired up eclipse spell in spells.nsl
	* Added new Objlist.h file to define offsets in the objlist file.
	* Fixed bug with combat mode in Party class. It was being read from the
	  eclipse length field.
	* Added NUVIE_DIR_NONE define.
	* Added CallBack.h to XCode build config.
	* Changed PartyView to display an eclipsed sun while the eclipse is
	  active.
	* Set the ambient light to night levels while eclipse is active in
	  MapWindow.

2006-08-05  Pieter Luteijn <luteijn at users.sourceforge.net>
	* info string capital letters fo hex digits.
	* use of AND to blindly mask map coordinates to wrap, instead of
  	  conditionaly using -.
	* improved (but not perfect) usage of balloon.
	* include <cassert> was misssing from AnimManager.h; added

2006-08-03  Joseph Applegate <sb-x at users.sourceforge.net>
	* Better fix for calling UseCode::pass_obj() on multi-tile objects. You
	  now have to pass x,y coords to pass_obj().
	* Ignore-danger move flag is now checked. (for non-party actors)
	  Monsters no longer follow the party into a swamp.
	* New UseCode: holy_flame() is called when looking at one of the holy
	  flames. This is not in U6 so may be optional.
	* Changed Actor::defend() to return hit amount, and moved hit to
	  Actor::attack().
	* Finished implementing MissileEffect, which takes an object and tile
	  number. If the target location is not an actor or object, the missile
	  object will be added to the map, otherwise the target object will take
	  damage.
	  Misc. fixes to TossAnim and ThrowObjectEffect.
	* Also added the missile animation to Actor's attack. It works for
	  lightning wands and bows at least, but probably crashes for other
	  weapons that don't have a tile set.
	* New actions can be started from the InventoryView, by passing the input
	  back to Event. This fixes the "what?" message when the user presses a
	  command key while the cursor is in inventory.
	* Added tiles to lightning and fire wand combat_type, and drake's body to
	  drake actor_type.
	* Added individual Actor alignment bits.
	* New method stats_changed() updates ViewManager if an actor's stats
	  change. Should this be in ViewManager?
	  Added update() function for Game::stats_changed(). (like PartyView has)

2006-08-01  Pieter Luteijn <luteijn at users.sourceforge.net>
	* Fix crash when entering vehicle.

2006-07-31  Joseph Applegate <sb-x at users.sourceforge.net>
	* Fix for ObjManager::is_passable() reading objects on the edge of the
	  map.
	* Fixed PeerEffect buffer being corrupted by not wrapping coordinates
	  over the edge of the map.
	* Solo mode prompt and CommandBar combat icon are now updated when
	  loading a game. Player no longer reads name from party roster.
	* Fixed infinite loop when using a ship, caused by that change to
	  Player name. (Player::get_name()->Actor::get_name()->
	                Converse::npc_name()->Player::get_name()) Converse no
	  longer uses Player::get_name(), and Actor now gets the first party
	  member's name as the ship's name.
	* Toggle Combat has its own mode and cancels any pending actions.
	* New function Actor::morph() changes actor type.
	* Fix for stepping onto the wrong moongate tile. You can only enter
	  from the right tile.

2006-08-01  Eric Fry <efry at users.sourceforge.net>
	* Fixed bug with U6Actor set_worktype(). It was overwriting the frame_n
	  with the dead body frame_n when returning from the sleep work type.
	* Changed XCode 'Development' build target to fix issues with gdb.
	  Turned on full debug symbols and turned off optimisation.

2006-07-30  Joseph Applegate <sb-x at users.sourceforge.net>
	* New UseCode: Gargish Vocabulary.
	* Added alcohol level to Player. After drinking something alcoholic, the
	  Avatar will stumble around, and alcohol level will reduce gradually.
	* Added Gargish flag to Converse.
	* Actors now light up if holding torches when the game is loaded.
	* Misc. Rest fixes. All bards in the party will go to sleep now. Actors
	  will eat food from their own inventory first.
	* New function Party::get_food() returns first found food object in actor
	  inventories.
	* Fixed wall tiles not being added to MapWindow::m_ViewableTiles.
	* Added OBJ_STATUS_LIT and OBJ_STATUS_BROKEN.
	* New objects added to inventory no longer stack if not stackable.

2006-07-30  Eric Fry <efry at users.sourceforge.net>
	* Fixed a bug with actor schedules. We don't want to update schedules
	  for dead actors.

2006-07-29  Joseph Applegate <sb-x at users.sourceforge.net>
	* New function Actor::get_maxmagic(), it returns the correct Max. magic
	  points for characters that can join the party, but not for any monsters
	  yet. Also virtualized get_maxhp() as that may be game-specific.
	* Further improvements to Rest. It's now complete except for healing, and
	  repairing a ship. (the ship tiles cause Not enough room! message)
	  World/time passes while resting, but monsters won't attack the camp
	  yet. Campfire is now temporary. Iolo/musicians always faces the
	  campfire while playing music.
	* Cannons will now crash into ships, causing 20pts of damage.
	* Player: Added repairShip() which repairs 5% damage and adds 5 minutes
	  to the clock.
	  Added gargish flag, set true if the player learned Gargish.
	* Eggs now get a container list even if empty. Fixes assertion failure.
	* New worktype: Lookout (camp guard), suggested by original U6 docs.
	* Start from the top of the stack in get_obj_type_from_location().
	* Hidden actors may no longer block other actors from moving. This fixes
	  a problem with the party not moving to a dungeon exit or ladder, so
	  they no longer have to ignore other actors when pathfinding.
	* Slight tweak to hardware key repeat makes movement more responsive.
	* Fixed multi-tile actors not being completely drawn, caused by my
	  previous change to MapWindow::drawTile to draw custom tiles. This
	  simple fix modifies drawTile to accept custom tiles with an extra bool
	  argument. Don't use with animated tiles.

2006-07-29  Eric Fry <efry at users.sourceforge.net>
	* Added support for longer silver serpents. New serpents are added to
	  the map in a coil.
	* Only allow one serpent to hatch per egg.
	* New serpents are a random length ranging from 5 to 9 tiles long
	  not including the head tile.
	* Changed location of ActorList.h in XCode build config.
	* removed nuvie_game_t typedef from Converse.h and moved it to
	  nuvieDefs.h
	* Added gametype to EggManger
	* Added a small fix to get large actors working again. They were broken
	  when adding support for invisible party members. We will need to add
	  proper support for actor effects in the future.
	* Added Pieter Luteijn to the AUTHORS file.

2006-07-29  Joseph Applegate <sb-x at users.sourceforge.net>
	* New function MsgScroll::set_autobreak() is now required to add new
	  page breaks to the scroll automatically.
	* Fixed MsgScroll printing extra newlines. You can write text on the edge
	  of the scroll, but don't draw the cursor off the scroll.
	* Continuing work on Rest. (camping in the wilderness) You can press R to
	  Rest, and the party will gather together and start a campfire.
	* Event now disallows any movement if MOVE_MODE is not set.
	* Added new overloaded Map::is_passable() to check an entire area.
	* Added MapWindow::in_town() which checks for visible wall tiles.
	* Added Party::is_horsed() which returns true if anyone is on a horse.
	* Actor: Changed is_sleeping() to use flags. Added filter_party() to
	  remove party members from a list. Added get_food().
	* Added revert_worktype() which should set an actor to their normal
	  non-combat worktype. Required to "wake up". (get out of temp worktypes)
	* Fixed wt_sleep(). An object isn't required for an actor to lay down.
	* Now clearing sleep status in Actor::set_worktype().
	* Moved find_enemies() to Actor since it has access to alignment now.
	* Replaced assert() statements in Actor.h with warnings. Added warnings
	  when actors have 0 frames_per_direction (Hydras) in U6Actor.
	* Fixed Actor::check_move() to use can_be_passed(). (pathfinding issue)
	* Made pathfinder check_loc() virtual, and ActorPathFinder no longer
	  always ignores other actors.
	* Fixed saving/loading in ActorManager. It wasn't saving status flags.
	* Added missing cassert includes in InventoryWidget.cpp & DollWidget.cpp.

2006-07-25  Eric Fry <efry at users.sourceforge.net>
	* Started work on silver serpent actors. At the moment nuvie will only
	  create a serpent that is 2 tiles long. If you want to see long
	  serpents in nuvie just load an original save game with serpents
	  nearby.
	* Added new overloaded ObjManager::get_obj_of_type_from_location()
	  method which allows searching by qty and quality.
	* Added U6Actor::face_location() to stop serpents from changing
	  direction while standing still.
	* Reversed the order that surrounding objects are added to the map
	  in U6Actor::add_surrounding_objs_to_map()
	* Clear surrounding objects from an actor before moving to 0,0,0
	  upon death.

2006-07-24  Joseph Applegate <sb-x at users.sourceforge.net>
	* Finally fixed DragNDrop between inventory and the map, so that it now
	  calls usecode and you *can* move torches with the mouse again! Dropping
	  into containers doesn't work yet.
	* Added object status flags to Actor, which are saved to and loaded from
	  objlist, and used in init_from_obj() and make_obj(). Renamed Actor::flags
	  to talk_flags.
	* Actors are now drawn with an effect if they are protected or invisible.
	* Added invisibility check when looking for nearby enemies or party members.
	* New function Actor::count_readied_objects().
	* New usecode: Amulet of Submission, Black Potion, and Protect/Regen/Invis
	  Rings.
	* Move rings on hand2 to hand1 if hand1 is empty.
	* Fixed actors not being properly switched to when selecting their icon in
	  the party roster. Also added ability to switch to ActorView (Stats) when
	  selecting a person's name in the party roster.
	* Fixed another lingering bug in Torch usecode, where newly lit torches
	  were being stacked with readied lit torches.
	* Fixed alt-213 infostring. It shows the time instead of the date.
	* Moved U6Actor::filter_alignment() to ActorManager.
	* No longer allowing readied objects to be stacked in
	  ObjManager::is_stackable(). You must check it on both objects in stack.
	* Stacking objects when in actor inventory is now optional.
	* Setting WAIT_MODE to disallow new actions while dragging. I'm not sure
	  if this is the correct location to set this.

2006-07-22  Joseph Applegate <sb-x at users.sourceforge.net>
	* Now filling unreachable areas with black on the Peer effect. Peering
	  through windows isn't considered yet.
	* Added some very basic Map wrapping, so Nuvie wont crash when the player
	  is near the map's edge. It still crashes if one attempts to fly over the
	  edge of the world in a balloon. Further improvements will require more
	  extensive code changes.

2006-07-22  Eric Fry <efry at users.sourceforge.net>
	* Changes to actor alignment. Alignment is now loaded from objlist.
	* Eggs spawn actor's with correct alignment now.
	* Changed alignment datatype from U6ActorAlignment enum to uint8. This
	  is so we can load and save alignment data from the objlist.
	* Added ACTOR_ prefix to alignment defines. e.g. ACTOR_ALIGNMENT_GOOD.
	* Added get_actor_alignment_str(uint8 alignment)
	* Removed get_alignment_str(uint8 quality) from the EggManager class.
	* Changes for XCode 2.3 build system.
	* Added Actor::get_alignment() Actor::set_alignment()
	* Fixed stats for dragon actor type.
	* Added fish object to use_food()
	* Made PartyView the default view when loading Nuvie.
	* Fixed problems when tabbing between inventory view and mapwindow.
	* Changed view left and right buttons to hide if at the first or last
	  party member.
	* Don't try to change combat modes for the avatar.

2006-07-20  Joseph Applegate <sb-x at users.sourceforge.net>
	* Added Peer gem effect, also viewable without gems by using ALT-213.
	  -> Currently you can only end the effect with ESCAPE or ENTER keys.
	* Fixed torches. They behave very much the way they did in U6, except for
	  the light they cast. **DON'T USE DRAGNDROP!** Like other objects, there
	  are problems when dragging to inventory, and this has yet to be fixed.
	* Slow down actor movement in combat to more closely resembly U6.
	* Fixed mouse cursor not updating over mapwindow after certain events.
	* Now checking object frame and quality before adding objects to inventory.
	* Fixed a vehicle crash, caused by vehicle location not being updated.

2006-07-15  Joseph Applegate <sb-x at users.sourceforge.net>
	* Combat mode is now available, and can be toggled with the B key or the
	  button on the command bar. The COMMAND combat strategy works, but the
	  others all do the same thing (attack nearest or strongest enemy, or
	  retreat)
	* Improved combat strategies. (wt_combat() is still a stub function)
	* GameClock: Removed time change when mover_counter changes, because game
	  time is now independent of player movement. Also removed tick_counter
	  because - without a constant GAMECLOCK_TICKS_PER_MINUTE - minutes are the
	  highest precision units of game time available.
	* I found the proper amount of damage that traps cause. (hopefully)
	* Temp. actors with double-tiles are spawned facing west. (but a horse in
	  Trinsic is broken and only has a front!)
	* I've changed the way actors are updated and move, to resemble more
	  closely the turn based system of U6. All actor movement is based on move
	  count and dexterity, and actors move in order of fraction of moves left.
	  The player only gets to move when it's their turn and time updates only
	  when all actors have moved. (end of the turn)
	  This has resulted in the addition of these methods to ActorManager:
	  startActors(): end player turn, start moving actors
	  stopActors(): stop moving actors, return control to player
	  updateTime(): refresh all actors' movement points and add time
	  moveActors(): does the actual update and moves actors with update_actor()
	               (Called continuously by game, it returns to the player if
	               can_party_move() returns true, or an actor wants command.)
	  activate_actor()/deactivate_actor(): add/remove actor to/from active list
	  update_active_actors(): check active area for actors to add to the active
	                          list, and sort by fraction of moves left
	* updateActors() has been changed, and now just sets the current active
	  area. Use when the player/mapwindow moves.
	* Map: Added get_impedance() to return the impendance of a map tile plus
	  all objects at that location.
	* Actor: Actors can now avoid moving onto dangerous squares, but I'm
	  ignoring this flag now until the effects can be tested.
	  Moved U6ActorTileType to Actor.
	  New virtual function can_be_passed() checks another actor can be passed.
	  (the two actors can occupy the same square) Drakes still aren't working
	  properly!
	  New method display_condition() prints actor health estimate.
	* ActorManager: Added new functions to handle a list of actors.
	  get_actor_list(), and get_active_actors() each return a new list. (active
	  actors are those which are cached in and can move)
	  sort_nearest() sorts a list by distance to an arbitrary location.
	  filter_distance() removes actors out of a certain range
	* U6Actor: New functions filter_alignment(), find_enemies(),
	  combat_try_attack(), find_players(), wt_player(): Take control of Player.

2006-07-09   Eric Fry <efry at users.sourceforge.net>
	* Fixed case when calling include files in unpack_portrats.cpp
	  I was using lowercase 'l' instead of 'L'. Thanks to Pieter for
	  spotting that one.

2006-07-08   Eric Fry <efry at users.sourceforge.net>
	* Changed unpack_portraits to handle MD/SE style shape data. The shape
	  data is wrapped in a lib_n structure.
	* Added proper 'use' handling of magically locked doors and chests.

2006-07-06   Eric Fry <efry at users.sourceforge.net>
	* Added unpack_portraits application into tools directory. You can use
	  this tool to dump all SE or MD portraits as BMP graphic files.

2006-05-14   Eric Fry <efry at users.sourceforge.net>
	* Moved spells.nsl from the root directory into the data/ directory.

2006-04-22   Eric Fry <efry at users.sourceforge.net>
	* Changed Magic class to read spells.nsl file from the Nuvie data
	  directory.
	* Removed inline directive from method in Party. This was causing
	  compile problems with gcc 4.0.1
	* Updated XCode build environment to reflect Joseph's changes.
	* Fixed bug when changing portraits from doll to non doll type while
	  in a conversation.

2006-04-17  Joseph Applegate <sb-x at users.sourceforge.net>
	* The magic system by Pieter Luteijn has finally been added. It
	  is still unfinished, so there aren't many (any?) usable spells yet.
	  I've also fixed Readying objects so that you can ready the spellbook
	  with the mouse or the keyboard. You can't put spells into the book
	  yet. (or move any object into any container) The spell list at the
	  upper-right isn't implemented, so spells have to be "spoken" with the
	  keyboard.
	* Event: FIX: was using y coord in place of x coord in move-object code
	* Party: Extensive changes, including removal of a formation type, a new
	  inactive flag for party members, and use of PartyPathFinder for
	  formation movement. References of member 0 changed to get_leader().
	  The inactive flag is set when someone is unconscious.
	* The entire party formation/following code has been rewritten to more
	  closely resembly U6. Thanks to documents posted on the Nuvie forum.
	* Added Party::is_anyone_at(), similiar to Party::is_at().
	* Removed old pathfinders and added new ones, rewriting the entire
	  pathfinder system. It is made up of smaller, easier to manage classes.
	  I was able to fix some old broken code at the same time.
	* Actor/U6Actor: Rewrote some of update() and move(). Actors now use
	  the WALK_TO_LOCATION worktype correctly, when moving to their next
	  scheduled location. Changed move/check_move to use bitflags, and added
	  a flag to tell the actor to open and close doors. Actors now check
	  their moves left on each update(). It's based on dexterity.
	* Added Actor::set_pathfinder(), and walk_path(). Replaced swalk() with
	  pathfind_to() and attract_to(), and stop_walking() with
	  delete_pathfinder(). Actor::push() has been changed.
	* Also added an incomplete wt_combat() method, and combat worktypes.
	* New ActorError pointers, to blocking object or blocking actor.
	* Player: Not allowing movement if actor is_immobile(). Removed can_move
	  check in U6Actor::is_immobile(). (can_move really means can twitch)
	* FIX: Call Actor::init() from U6Actor.
	* FIX: changed WORKTYPE_U6_WALK_TO_LOCATION
	* TileManager: Added "damages" tileflag and boolean, and is_damaging()
	  functions to Map and ObjManager.

2005-12-30   Michael Fink <vividos at users.sourceforge.net>
	* fixed compiling with msvc6
	* fixed some memory leaks
	* simplified visualc7\dirent.cpp code

2005-12-27   Eric Fry <efry at users.sourceforge.net>
	* Added OBJ_U6_EFFECT define to U6objects.h
	* Added process_effects() to U6UseCode class. This is called from
	  U6UseCode::use_container(). It will process effect objects that are
	  loaded into a container when the container is used. Eg a big poison
	  explosion. At the moment it just prints text to the console.

2005-11-23   Eric Fry <efry at users.sourceforge.net>
	* Added GUI_Widget::MoveRelativeToParent() This moves the child to
	  new coords which are relative to the parent widget.
	* Added Actor::has_readied_objects() This checks to see if the
	  Actor has any readied objects in their inventory. We use this
	  when displaying actor portraits.
	* Added readied object display to the Portrait view. Nuvie will
	  now display the actor's readied objects. They are displayed
	  alongside the actor's portrait when you are either talking or
	  looking at them. Just readied objects are shown when an actor
	  doesn't have a portrait.

2005-11-19   Eric Fry <efry at users.sourceforge.net>
	* Added a weapon range check when selecting a target with the mouse.
	  If the target is too far away for a given weapon the string
	  "\nOut of range!\n" is displayed in the message scroll.
	* Changed "hands" to "bare hands" in
	  Player::attack_select_weapon_at_location()

2005-11-13   Eric Fry <efry at users.sourceforge.net>
	* Fixed use:shovel You can now dig a hole on the surface map. This is
	  used to enter the pirate's cave. A hole object is placed on the map
	  if a correcponding up ladder is found on the next layer down.
	* Fixed a crash when multi-tile actors die. Remove surrounding tiles
	  upon death.

2005-11-09   Eric Fry <efry at users.sourceforge.net>
	* Fixed a bug in Converse class which resulted in a crash when loading
	  FM towns speech data. The script_num variable was being overwritten
	  when collecting an actors name from a different script location.
	  This could happen when we switch portraits in the middle of a
	  conversation.
	* Added Converse::get_script_num() I've moved some logic from
	  load_conv(uint8 a) into this new method.
	* Fixed a bug that happened when you died in solo mode. Nuvie would
	  ressurect you in party mode but the message scroll prompt hadn't been
	  updated from the old solo mode.
	* Added ChangeLog to Mac OS X snapshot build.

2005-11-09   Eric Fry <efry at users.sourceforge.net>
	* Added some scripts to automate the creation of a Nuvie snapshot build
	  on Mac OS X.
	* Added Mac OS X diskimage build template.
	* Removed some absolute paths from the XCode build environment.
	* Fixed bug when trying to attack Actors with an armor class of 0.
	  (Thanks to Luteijn for spotting that one)
	* Changed Actor type table for OBJ_U6_MOUSE. It now returns a mouse 
	  object upon death. It was producing a mouse Actor with a body of type
	  of OBJ_U6_BLOOD before. This was causing problems for Sherry who is
	  a permanent actor.

2005-11-07   Eric Fry <efry at users.sourceforge.net>
	* Don't show objects that have status bit 0x2 set. They are invisible.
	  Don't include them when Looking at the map.
	* Added support for the trap object. Initially it is invisible but it is
	  made visible when stepped on. I'm not too sure what damage
	  value the trap object should have. At the moment it is set to 25
	  points.
	* You can also Use:trap although I'm not too sure why anyone would want
	  to do this. ;) Using the trap will inflict damage on the player and
	  make the trap visible. The original U6 didn't have use:trap. I thought
	  I'd add because you could use the square to check it had a trap in the
	  original game.
	* Added obj define OBJ_STATUS_INVISIBLE 0x2 this should probably replace
	  OBJ_STATUS_SEEN_EGG which I think might be irrelevant now.
	* Added Party::heal() which restores all party members to full health.
	* More work on combat routines. Added AC saving roll.
	* Fixed looking at dead gargoyle and cyclops objects.
	* Show Avatar when ressurecting party at Lord British's throne room.
	* Heal party when avatar dies.

2005-11-06   Eric Fry <efry at users.sourceforge.net>
	* Added Actor is Poisoned check in the Converse Interpreter.
	* Added Actor cure poison instruction in the Converse Interpreter.
	* Added starting stats for temp actors. I still need to randomize these
	  a bit.
	* More tweaks to the combat routines. I'm still not happy with the
	  attack defense logic. It seems to take longer to kill things in Nuvie.
	* NPCs become poisoned when walking on a poison field.

2005-11-02   Eric Fry <efry at users.sourceforge.net>
	* Added Actor ready position. ACTOR_NO_READIABLE_LOCATION -1 this is
	  used for attack with hands.
	* Changed some calls to sint8 for readiable location, see above.
	* Added Actor::get_hand_combat_type()
	* Don't display hit messages when using force hit. Eg Poison hits.
	* Force hit when taking damage from poison.
	* Added const CombatType u6combat_hand. I'm not too sure what the exact
	  values need to be here.
	* Fixed bug with palette cycling. I was incorrectly cycling the wrong
	  set of values at 0xfb which should have been 0xf8. :) This fixes the
	  poison field animation.
	* Fixed Event so it cycles through all the weapons that the player has
	  readied when attacking.
	* Added ObjManager::get_obj_name(uint16 obj_n) used to display the
	  weapon name when the player is attacking.
	* Changed the variable current_weapon from CombatType to sint8 in
	  Player class. This stores the current weapon using the readied
	  location defined in Actor.
	* More work done on the Player class to help with combat.
	* Added Player::attack_select_init()
	* Added Player::attack_select_next_weapon()
	* Added Player::attack_select_weapon_at_location(sint8 location)
	* Added Player::attack(Actor *a)

2005-10-03  Eric Fry <efry at users.sourceforge.net>
	* Added virtual destructor stub to GUI_CallBack class.
	* Added virtual destructor stub to Adplug Copl class.
	* Added use:campfire.
	* Connected Attack icon to the event attack functionality.
	* More work on Event attack functionality. The player can now select a
	  target within the valid range for the given weapon. At the moment the
	  weapon is hardcoded to be in the players first arm slot.
	* The player can now attack other actors with whatever weapon is
	  readied in their first arm slot.
	* Added Player::weapon_can_hit()
	* Added Actor::attack(uint8 readied_obj_location, Actor *actor)
	* Added Actor::get_weapon(uint8 readied_obj_location)
	* Added Actor::inventory_get_readied_object_combat_type(uint8 location)
	* Calculate the actors armor class based on their readied armor.
	  weapons with damage=255 kill everytime.
	* Changed Actor::defend() to return bool wether the actor actually took
	  damage.
	* Added ReadiedObj struct for use in Actor class.
	* Added Actor::weapon_can_hit(const CombatType *weapon, uint16 target_x, uint16 target_y)
	* Don't update or preform worktype for dead actors.
	* Killing a horse will create a horse carcass.
	* Added the U6 weapon hitrange and combat data.
	* Added worktype WORKTYPE_U6_ATTACK_PARTY 0x9b
	* Updated OS X SDLMain.m file with latest changes from SDL 1.2.9

not-sure-when  Eric Fry <efry at users.sourceforge.net>
	* Added Attack event type.
	* Reworked pathfinders to take out calls to actor movement methods. This
	  will stop crashes that occured when an actor died when moving inside a
	  pathfinder. ZPath still needs work to get it back to normal party
	  formation. 
	* Added Actor::heal()
	* Added Text::drawString method which takes a color argument.
	* Added U6WorkTypes.h into the XCode build environment.
	* Added Actor::check_moveRelative(sint16 rel_x, sint16 rel_y, bool ignore_actors)
	* Added start of actor combat datatypes. These will probably change a
	  lot while we get combat sorted out.
	* Added Actor::is_poisoned()
	* Added U6Actor::updatePoison()
	* Added support for poison. Actors will now take damge if they step on a
	  poison cloud or drink a poison potion. I've still got to fix stepping
	  on swamp map tiles.
	* Added support for red, yellow and green potion use code.
	* Added text colors for HP display when in party view mode. Poisoned
	  actors show green. Critically wounded actors eg < 10 HP show red.

2005-07-20  Joseph Applegate <sb-x at users.sourceforge.net>
	* ConverseSpeech.cpp,tools/FMTownsU6/unpack.cpp: fixed endianness check

2005-07-19  Willem Jan Palenstijn <wjpalenstijn at users.sourceforge.net>
	* views/InventoryWidget.cpp: fix undefined return value causing crashes
	* views/DollWidget.cpp: fix undefined return value causing crashes
	* various: fixed warnings
	* configure.ac: enable -Wall by default
	* sound/SoundManager.cpp: fixed endianness check

2005-07-19  Joseph Applegate <sb-x at users.sourceforge.net>
	* Added white potion visual-effect.
	* Fixed bug in Quake effect that would cause the map-blacking to change
	  if you stood near a wall during a Cyclops quake.
	* New settings "freeze_blacking_location", to lock where boundary-fills
	  begin, and "xray_view", to disable map-blacking all together.

2005-05-27  Joseph Applegate <sb-x at users.sourceforge.net>
	* Double-clicking objects to use them is working again. I'm sure it has
	  a few problems, but it works much better than in the past.
	* Dragging and selection can only be performed with left mousebutton.
	* New nuvie.cfg option: input/enable_doubleclick. This removes the delay
	  when equipping objects.
	* There is now always a delay when walking with the left mousebutton.
	* You can clear the default action on the command icons by right it.
	  But default action isn't implemented yet.
	* New GUI_widget methods: MouseDelayed(), MouseHeld(), and a few new
	  state variables for these. Idle() now calls itself on child widgets.

2005-04-25  Eric Fry <efry at users.sourceforge.net>
	* Fixed FM-Towns audio. The interpolation routine was leaving off the
	  last sample.
	* Added script_num and using_fmtowns variables into the Converse class.
	* Fixed crash when trying to talk to guards or wisps when using FM-Towns
	  speech.

2005-04-19  Eric Fry <efry at users.sourceforge.net>
	* Fixed the FM-Towns audio sample rate. FMTowns audio uses a 16Khz
	  sample rate this had to be upscaled to 44.1Khz which is the rate our
	  internal audio system runs at. This fixed the Mickey mouse speech bug.
	  The sample rate conversion was done with simple linear interpolation.

2005-04-14  Eric Fry <efry at users.sourceforge.net>
	* Fixed bug 'Can get some objects "Not possible" to get' [932493].
	  You shouldn't be able to pickup objects that contain toptiles. Eg
	  the dragon bits in the museum in Britain.
	  Added ObjManager::has_toptile(Obj *obj)

2005-03-24  Joseph Applegate <sb-x at users.sourceforge.net>
	* Added sun & moons with correct phase changes to sky display. PartyView
	  was resized by 3 pixels to these extra tiles.
	* Slowed down normal player movement very slightly. (8 moves per second)
	* Added Ctrl-L to load latest save.
	* Now updating CommandBar and sky when time changes in various classes.
	* Replaced SDL_keysym numbers for inputting alt-codes with a switch.

2005-03-06  Eric Fry <efry at users.sourceforge.net>
	* Fixed the boundary fill logic when sherry goes through a mousehole.
	* I've done some more work on the wall reshaping logic. The wall bug
	  [ 821711 ] is almost fixed. There is still one tile out of place. :(
	* Added new direction defines. eg. NUVIE_DIR_NE
	* Removed existing ACTOR_DIR_x defines. They've been replaced by the
	  general NUVIE_DIR_x defines.
	* Converted some magic direction numbers into NUVIE_DIR_x values.
	* Fixed Savegame filelist bug. The latest savegame should load at 
	  start up. The savedialog should be listed in descending order now.

2005-03-06  Willem Jan Palenstijn <wjpalenstijn at users.sourceforge.net>
	* builds/linux/*: added fedora .spec file, .desktop file and icon
	* various: fixed 'make dist', install data
	* save/SaveManager.cpp: default savedir to ~/.nuvie in linux

2005-03-05  Willem Jan Palenstijn <wjpalenstijn at users.sourceforge.net>
	* ConverseInterpret.cpp: implement singular/plural forms of words

2005-03-05  Eric Fry <efry at users.sourceforge.net>
	* Fixed a bug with stackable objects. Objects with qty > 255 would
	  lose their high byte of data when being saved. The correct value
	  was being saved but it was cutting the qty when returning control
	  to the player.
	* Updated the OS X specific SDLMain.m cocoa wrapper.
	* Updated XCode build environment to include CommandBar.cpp/h
	  Note! I still need to figure out a good way of referencing the SDL
	  and SDL_mixer frameworks.
	* Added Actor::remove_all_readied_objects(). This is used when the
	  Avatar dies and is ressurected in LB's castle.
	* Fixed Actor alive variable assignment. It was swapped around.
	* Added Mac OS X specific README file.
	* Added Mac OS X specific config file.

2005-03-03  Joseph Applegate <sb-x at users.sourceforge.net>
	* Actors who are sleeping no longer respond to conversation.
	  Actors who are immobile (but awake) won't turn to face the player.
	* Added the command-icons and date/wind text. (class CommandBar).
	* Replaced U6Actor::walk_frame_tbl with a frame counter walk_frame_inc
	  to loop walk_frame in two directions. Fixes [ 852832 ].
	* MouseClick/MouseDouble code has been simplified. (only generates one
	  of the three events at a time) Things using this have to be changed.
	  Double-click is disabled right now. (but I'll fix it soon)
	* New code added to allow objects in containers to be used. (if the
	  container is held by an actor) It doesn't actually work yet.
	* Fixed InventoryView bug that could ready an object twice on MouseDown.
	* Added ActorError status struct to Actor. Added U6WorkTypes.h.

2005-02-27  Joseph Applegate <sb-x at users.sourceforge.net>
	* Fixed these bugs: (which most people probably didn't know about)
	  Invalid memory access (deleting a freed pixel surface) in FadeEffect.
	  EffectManager could go into infinite loop when waiting for events.
	  Nothing on a dungeon level could be moved. (without dragging)
	  TimeQueue always used real-time to set repeat time.
	* The visual effects for using a red moongate are complete. Red
	  moongates materialize into view when placed. Note that these effects
	  don't look correct at night-time when using smooth lighting. This is
	  because I always work with an 8bit surface. (not accounting for alpha)
	* Walking to dungeon entrances is now as fast as walking to ladders.
	  Party members try to get into formation when they reach the target.
	* NPC's can always step onto red moongates now.
	* Usecode can now set WAIT_MODE after being called by select_obj().
	* Changed MapWindow::get_sdl_surface() to accept coordinates.
	* Added newline to end of misc.h.

2005-02-21  Eric Fry <efry at users.sourceforge.net>
	* Removed unused misc.h includes from EggManager.cpp and
	  ActorManager.cpp
	* Added string_i_compare() function. For case insensitive string
	  comparison. Note! win32 might need to define strcasecmp()
	* Config tags are now case insensitive. :)
	* Scaler names are now also case insensitive.

2005-02-17  Joseph Applegate <sb-x at users.sourceforge.net>
	* There was a bug with moongates/passable-objects I introduced. This is
	  fixed.
	* Nearly completed visual effects for map change. All that is
	  left is the actor-dissappear-effect when stepping into a moongate.
	* Sleeping at inns now always advances the hour to 5AM, and leaves the
	  minutes alone. (identical to U6)
	* MapWindow: New function get_sdl_surface() returns 8bit capture of
	  the MapWindow display. (similiar to create_thumbnail())
	* Fixed TimeQueue. It wasn't handling multiple events correctly.
	  (or at all)

2005-02-11  Joseph Applegate <sb-x at users.sourceforge.net>
	* Actors now always open through the correct part of a doorway when
	  passing through it (not the doorframe) and close it on the other side.

2005-02-08  Joseph Applegate <sb-x at users.sourceforge.net>
	* Firing a cannon or tossing an object no longer results in superspeed.
	  (forgot to init. a couple of variables)
	* The "Move" command works like the one in U6. You can no longer move
	  things out of range. (doesn't apply to dragndrop) The mouse cursor
	  will update with an arrow, showing the direction

2005-02-06  Joseph Applegate <sb-x at users.sourceforge.net>
	* Fixed TossAnim/ThrowAnim movement mentioned in last update. It looks
	  completely different when compared to the old animation. The slightly
	  off-center placement is gone. Try dragging a chair around.
	* Improved Fade appearance just slightly. It shouldn't get a horizontal
	  lines effect now.

2005-02-05  Joseph Applegate <sb-x at users.sourceforge.net>
	* Fixed a cannon moving bug where movement towards a blocked tile would
	  not let you turn the cannon. You can do that now.
	* Animating tiles (water) and palette effects (fire) now stop when an
	  effect (a tossed object) is on the screen.
	* Added functions to Game to ignore the Event delay. Animations look
	  smoother when not on Event's timing. (as if NUVIE_INTERVAL==0)
	* Rewrote TossAnim so it looks and animates better. Dropping an object
	  doesn't always look correct:
	  1: I only apply speed to the X-movement in diagonal throws, and base
	  Y-movement on that. This results in faster diagonal throws when
	  movement favors the Y-axis.
	  2: The top-left of a tile is its location; not the center of the tile.
	  Cannonball animations are still accurate.

2005-01-20  Joseph Applegate <sb-x at users.sourceforge.net>
	* Fixed scroll-to-end when clicking the MsgScroll with the mouse.
	  Keywords can only be selected with the left mousebutton.
	* Clicking on the Avatar now passes. This conflicts with double-click.
	  so I still need to change this.
	* Changed mousewalking look/feel just slightly. You probably won't
	  notice any difference, but it should be more like U6 now.
	* Cardinal direction names moved to U6misc.cpp.

2005-01-02  Eric Fry <efry at users.sourceforge.net>
	* Fixed red moongate bug. [1091114] There was a small typo in the last 
	  moon gate location. X was 0x296 where it should have been 0x29b.

2004-11-27  Eric Fry <efry at users.sourceforge.net>
	* Added more game logic to use:vortex_cube.

2004-10-05  Eric Fry <efry at users.sourceforge.net>
	* Added use:fishing_pole.
	* Removed SDL window resize flag.
	* Removed some redundant code from Screen when dealing with x1 scale.
	* Added some new fields into the samegame file. 
	  *WARNING* This breaks compatibility with old nuvie savegames.
	* Fixed crash with empty inventory's.
	* added variable assignment for cur_party_member in View.

2004-10-04  Joseph Applegate <sb-x at users.sourceforge.net>
	* Add scroll-arrows to Party Roster.

2004-10-02  Eric Fry <efry at users.sourceforge.net>
	* Enable unicode support when GUI_TextInput widget grabs focus.
	* Disable unicode support when GUI_TextInput widget releases focus.
	* Added status_flags to Actor class.
	* Use actor status_flags to determine if a dead actor should be added
	  back into the party when resurrected.

2004-09-25  Michael Fink <vividos at users.sourceforge.net>
	* fixed some memory leaks

2004-09-25  Eric Fry <efry at users.sourceforge.net>
	* Added ObjManager::list_add_obj() Adds an Obj into a U6LList combining
	  with existing objects if stackable.
	* Added ActorManager::resurrect_actor() This converts a dead body Obj
	  back into the corresponding Actor record. It also transfers the dead
	  body's contents back into the Actor inventory.
	* Added obj_stackable[] table into ObjManager. This is now used by
	  ObjManager::is_stackable() to determine if an Obj is stackable.
	* Changed Obj.qty from uint8 to uint16.
	* Added support for Obj quantities greater than 255.
	* Added FM-Towns audio dialog support. To use this feature put the 
	  following line inside your <ultima6></ultima6> config block.

	  <townsdir>/the/path/to/your/fmtowns/u6/dir</townsdir>

	  The FM-Towns audio is sampled at 16KHz and will need up converting to
	  play correctly with the Nuvie audio system. This hasn't been done yet
	  so the voices will sound wrong. If you want to hear how the voices
	  should sound. Change the audio_rate in SoundManager::initAudio() from
	  44100 to 16000.
	* Added ConverseSpeech class. This is used for playing the FM-Towns
	  audio samples when in Talk mode.
	* Hooked up the actor ressurection action in the Converse system.
	* Added U6LList::findPos() This method finds the position in the list
	  holding the reference pointed to by void *data.
	* Added InventoryWidget::display_special_char() This prints the special
	  char under keys in U6.
	* Added the inventory key letter fonts to InventoryFont.h

2004-09-25  Jonathan Wright <nelno at idsoftware.com>
	* Updated project files for Visual C 7.1 (.NET 2003)

2004-09-24  Michael Fink <vividos at users.sourceforge.net>
	* Compile fixes and updated project files for msvc6

2004-08-14  Joseph Applegate <sb-x at users.sourceforge.net>
	* Sleep-at-inn implemented, with fade effects. The sky display doesn't
	  exist yet so you won't see the sun/moons going by. You always sleep
	  until 5:46A.M.
	* For good measure, threw in the initial fade-in when the game starts.
	  (I checked: it doesn't repeat on every reload)
	* The ankh/arrow cursor is no longer redrawn if MsgScroll loses focus.
	* Added some functions to wait for effects to complete. A CallBack class
	  can call EffectManager::watch_effect(this, effect) to get the message.
	* Added an extra effects layer to MapWindow. Effects can get this with
	  get_overlay(), and draw to it directly. It will either be drawn under
	  or over the border, depending on overlay_level.
	* GUI now has a block_input setting; call GUI::block() to set. This is
	  the inverse of GUI::lock_input(NULL) and blocks events to all widgets.
	  It's set when pausing the game. (along with setting Event::WAIT_MODE)
	* New function GUI_Widget::widget_has_focus() returns true if this
	  widget will be the first to get input. (and GUI is not blocked)
	* Mouse and keyboard both move the Avatar at the same speed.
	* Fixed prompt display for various usecode functions. (moving direct
	  prompt display out of U6UseCode broke some of them)

2004-08-03  Joseph Applegate <sb-x at users.sourceforge.net>
	* Fixed crashing bug when dropping an object at the actor location. (I
	  thought I fixed this already???)
	* More "glitches" related to dropping things fixed. The game won't stay
	  stuck in DROP mode when you select the center square. (nowhere)
	* There should be a more consistent feel when using the mouse and
	  keyboard on items in your inventory. All "selection" code has been
	  moved to InventoryView. The command icons can now be selected with the
	  arrow keys and ENTER.
	* Eggs will now only spawn at the correct time of day. This information
	  is also added to the console output. Alignment is not assigned yet.

2004-07-30  Eric Fry <efry at users.sourceforge.net>
	* Added temp_actor flag to Actor.
	* Added armor_class to Actor.
	* Added Actor::all_items_to_container() this method takes the actor's
	  inventory and places it into an object container. This is used for
	  building the dead body object.
	* An actors inventory is placed in their dead body object upon death.
	* Started to add combat logic.
	* Started to add "Move party to castle upon the Avatar's death".
	* Actors will absorb damage with their armor_class. (If they were 
	  assigned any;) ) I'll need to calculate armor class based on combat
	  objects. They will come later.

2004-07-25  Eric Fry <efry at users.sourceforge.net>
	* Added use:balloon_plans. You can now build a balloon.
	* Added use:balloon. You can now use the balloon. The balloon
	  is currently controlled by the player. I will have to fix this
	  when we add wind direction. The balloon should drift along
	  the current wind direction. There are also some rendering issues
	  with the balloon object when moving in front of other multi-tile
	  objects.
	* Objects are now marked as "ok to take" After being added to the
	  player's inventory. Nuvie won't shout "Stealing" every time you drop
	  and pickup an inventory item now.
	* Added Party::remove_obj() this method removes the first instance of
	  a given object type from the party's collective inventory.

2004-07-23  Eric Fry <efry at users.sourceforge.net>
	* Added use:sextant.

2004-07-20  Eric Fry <efry at users.sourceforge.net>
	* Added background color to GUI_TextInput when selected.
	* GUI_TextInput now handles shifted/capslock chars correctly.
	* Added DEL, HOME, END keys to GUI_TextInput class.
	* Added use:rune. :-) You can now free shrines.

2004-07-18  Eric Fry <efry at users.sourceforge.net>
	* Added GUI_TextInput class.
	* You can now add a textual description along with your save game.
	  There are still a few issues with this. You can't type capitals
	  properly. Escape isn't working correctly either. It should return
	  the text to its original state before editing was started.

2004-07-06  Joseph Applegate <sb-x at users.sourceforge.net>
	* Fixed a bug in 84-Stivus' conversation (possibly others) which always
	  gave the "I don't know" answer when asked about "wine". (which just
	  drops to the next answer)

2004-06-17  Eric Fry <efry at users.sourceforge.net>
	* Added some npc_num() calls into ConverseInterpret. HASOBJ and OBJCOUNT
	  weren't handling actor SELF (0xEB) correctly. This should fix some
	  issues with buying ship deeds from Arty and probably other npc
	  dialogs.
	* Added a match_zero_flag to Actor::inventory_get_object() when set to
	  false any quality is matched if a search quality of 0 is entered.
	  Some converse scripts don't care which quaility is returned.

2004-06-15  Eric Fry <efry at users.sourceforge.net>
	* Fixed GUI bug where hidden widgets were being passed events.
	  This fixes the scroller widget top slot bug.
	* Added 16bpp thumbnail support.

2004-06-15  Eric Fry <efry at users.sourceforge.net>
	* Added thumbnails to the save slots.
	  I haven't tested this on little endian machines. I have a feeling
	  it might not work. I also think it might not work correctly on 16bpp
	  displays. I'll have to do some more testing.
	* Fixed up some paths added WIN32 \ delimiter into more paths.
	* Added save description field into save game. Note this isn't editable
	  yet.
	* NOTE! please delete any existing savegames before running this
	  version. As the savefile structure has changed. I'll add a save
	  version check some time in the future. ;-)
	* There is a bug when selecting the top slot in the save dialog
	  scroller widget. I'll look at this soon.

2004-06-14  Eric Fry <efry at users.sourceforge.net>
	* Partial fix for bug [ 932493 ] Can get some objects "Not possible"
	  to get. It is nolonger possible to get sundials or drawers.
	  Objects with a weight of 25.5 stones aren't gettable. It is
	  however still possible to get the dragon parts in the museum. :(
	* ObjManager::get_obj_weight() now checks if an object is stackable
	  before multiplying its weight by its qty value.

2004-06-13  Eric Fry <efry at users.sourceforge.net>
	* Fixed a bug when savedir wasn't defined in the config file.

2004-06-12  Eric Fry <efry at users.sourceforge.net>
	* Added Portrait::load() This method loads the avatar portrait
	  number from the objlist data.
	* Added NuvieFileDesc class.
	* NuvieFileList is now sorted by date modified in decending order.
	* Changed SaveDialog from 6 to 4 slots. Getting ready for save
	  thumbnails.
	* Changed SaveSlot from 20 to 32 pixels high.
	* Nuvie now attempts to load the last latest savegame. If that fails
	  it will attempt to load the original savegame/ If that also fails
	  it will load a new game from the lzobjblk, lzdngblk files.

2004-06-06  Joseph Applegate <sb-x at users.sourceforge.net>
	* One line change to cleanup mouse cursor earlier, preventing GUI
	  corruption by widgets being removed. Fixes [ 908994 ].
	* Player: Set party mode to TRUE if saved party member is 0xFF.
	* Only check Solo Mode in boat usecode when entering the vehicle.

2004-06-02  Willem Jan Palenstijn <wjpalenstijn at users.sourceforge.net>
	* GUI/GUI.*: fix crash when deleting the focused/locked widget

2004-06-02  Eric Fry <efry at users.sourceforge.net>
	* Added party/solo mode loading and saving to Player.

2004-06-01  Eric Fry <efry at users.sourceforge.net>
	* We now call ObjManager::clean() from all load types. This fixes
	  some issues that occured when loading a new game.
	* Fixed Player worktype bug. An actor's worktype is changed to
	  WT_U6_PLAYER (0x2) when set to the player actor. This fixes some
	  issues with ships when loading from a save. You'll need to create
	  a new save while in ship to test this.

2004-05-31  Jonathan Wright <nelno at nelno.com>
    * Fixed compilation error in MapWindow.h (wx defined twice in
      get_movement_direction)
    * fixed Win32 uninitialized variable warning in MsgScroll::Display () in
      MessageScroll.cpp.
    * fixed Win32 uninitialized variable warning in MsgScroll::MsgScroll.
    * in AnimManager.cpp, fixed some cases where unary minus was being
      used on unsigned integers.
    * added <save_dir> section to nuvie.cfg.sample.
    * changed NUVIE_PATH_DELIMITER to '/' for WIN32.  As far as I know, WIN32
      file io functions work perfectly well with '/' instead of '\', unless
      memory fails me and Win95 didn't like this.  I noticed the path delimiters
      in nuvie.cfg were all '/' and they never get converted anyway, so if '/'
      didn't work, everything would already be failing to load on Win32.
    * in SaveManager.cpp, made it auto-create the save game directory if it
      doesn't exist, instead of failing.
    * commented out code that fills in all empty save slots with "New save."
      Just seemed less confusing and aesthetically more pleasing to have that
      only in the first slot.
    * Added custom implementations for opendir, closedir and readdir on Win32
      in dirent.h and dirent.cpp in visualc7 directory.

2004-05-31  Eric Fry <efry at users.sourceforge.net>
	* You can save and load from the slots in the save dialog now. :)
	  I'll have to test this some more. I've used opendir/ readdir
	  and stat calls. I hope these work under Win32. We might need to
	  include a posix opendir wrapper to compile under MSVC.
	* Cleaned temp objects list on ObjManager cleanup.

2004-05-30  Joseph Applegate <sb-x at users.sourceforge.net>
	* Fixed crash from ThrowObject effect caused by a TimedEvent attempting
	  to use callback of deleted effect. Animation is stopped on target.
	* Explosions are slightly larger when hitting walls with cannon fire.
	* PLACEONTABLE tileflag is checked when dropping objects. The check has
	  been moved to MapWindow::can_drop_obj().

2004-05-30  Eric Fry <efry at users.sourceforge.net>
	* Removed absolute paths from XCode project files. Thanks to Fortran
	  Dragon for spotting them.

2004-05-30  Eric Fry <efry at users.sourceforge.net>
	* Some compiler fixes.
	* Reworked save logic to allow a game to be loaded whilst another
	  game is being played. (I haven't finished with this yet.) There
	  are probably more objects that need some resetting when loading
	  a savegame.
	* Fixed a double delete in ~ExplosiveAnim(). It was deleting tiles which
	  were then deleted again in ~TileAnim().
	* Fixed a number of compiler warnings. Unused variables, signed/unsigned
	  conversion warnings etc.
	* Added virtual destructors to some classes that have virtual methods.
	* replaced malloc call with a new call in ObjManager when allocating
	  the ObjTreeNode.
	* Hooked up the "Load" button on the savedialog. It now attempts to load
	  nuvie01.sav when pressed.
	* Removed ObjManager::delete_obj() method. We have an independant
	  function delete_obj() that can delete Objs.

2004-05-29  Joseph Applegate <sb-x at users.sourceforge.net>
	* Added CallBack AnimManager EffectManager & Effect. NuvieAnim and
	  TileAnim could probably stand to have their differences negotiated.
	  A few new Effects & animations have been included. Try powder kegs &
	  cannons.
	* Event: New input modes DROP, DROPTARGET, and DROPCOUNT for dropping
	  object from inventory. Also, added ability to drop objects.
	* Added WAIT mode to block all input until further notice.
	  A new method endWaitMode() will drop out of WAIT_MODE
	  and display the prompt automatically. This is used by Effects, when
	  unpausing from Game::set_pause_flags(). This WAIT_MODE is checked in
	  most functions. We can perform these actions from outside Event.
	* New functions to implement Drop: drop_select(), drop_count(), Drop().
	* Actor: New methods: reduce_hp(), die(), hit(), which calls a
	  HitEffect. Slightly modified a toss_anim() check in ActorManager.
	* U6Actor: Replaced static beg mode with class member beg_mode.
	* Check that coordinates are valid before checking for a mirror
	  next to the actor. (no map wrapping yet)
	* Added calls to hit() and HitEffect() when actor steps on poison,
	  fire, or sleep fields. Cyclops shake the ground when walking.
	* UseCode: Replaced TimedCallback inheritance with CallBack.
	  Added message_obj() to send internal message to an object.
	  Changed the meaning of USE_EVENT return. True is returned if the
	  prompt should be displayed. Removed some displays of the prompt.
	* Added/updated: use_fountain(), use_powder_keg(), use_cannon()
	* InventoryView: Pressing ENTER when Event::DROP_MODE is set will do the
	  appropriate action. Sure would be convenient if these were in one
	  place. :)
	  Fixed cursor positioning error, when calling update_cursor() from
	  init(). It's now called in PlaceOnScreen().
	* Game: set_pause_flags() does more stuff than it used to.
	  Pausing/unpausing can enable or disable certain parts of the engine
	  from here. PAUSE_USER will set Event to WAIT_MODE, for example.
	* The clock can be stopped/started with new function set_active().
	* AnimManager is now a part of MapWindow. It handles the tricky parts
	  of tile animations, that MapWindow could do, but shouldn't have to.
	  MapWindow::drawAnims() calls the AnimManager function.
	* The MapWindow coordinates can now be set with pixel precision. This
	  is accomplished with two extra parameters to moveMap() - the pixel
	  offset from the tile coordinates. New method shiftMapRelative() will
	  update the MapWindow location by relative pixel amounts.
	* AND the map can now be moved automatically with builtin velocity
	  setting, measured in pixels per second. (set_velocity()) This is
	  unused at the moment, but was intended to be used by QuakeEffect.
	* Other new methods: centerMap(), update() for map movement and walk.
	* Added call to DROP action (Event) when dragging something onto the
	  map. This is fine for dragging from inventory, but looks odd when
	  dragging from the map.
	* Map: I improved lineTest a little. Trying to improve it any more broke
	  things so this is all that was changed: Added HitObjects, HitActors
	  and HitLocation checks. LineTestResult can now contain a location
	  which you pass before the test, that will pass if the line hits that
	  location. HitLoc is identical to that if it hit. A "skip" variable
	  is added to the test to allow you to skip a number of coordinates in
	  the line. You can test different segments of the same line that way.
	* MsgScroll: Added request_input() method, allowing any Callback class
	  to request that the next input string be sent to it. Done in
	  set_input_mode().
	* TimedEvent: Fixed timers a bit. Hopefully it's more stable & easy to
	  read. You now have to queue() a timed event to add it to the queue,
	  but this is usually done in the constructor.
	  Added TIMER_* defines. Replaced repeat bool with repeat_count int.
	  Added methods: queue(), dequeue(), stop(), repeat(), set_time().
	* TileManager: Added tile rotation function.
	* Player: Replaced uncontrolled setting with mapwindow_centered.

2004-05-29  Eric Fry <efry at users.sourceforge.net>
	* Fixed a load/save bug. I wasn't cleaning the old y value
	  properly when saving containerized objects. This could
	  cause an object to think its parent container index was + 1024
	  which would send the object off into the void never to be seen again.

2004-05-28  Willem Jan Palenstijn <wjpalenstijn at users.sourceforge.net>
	* various: include case mismatches

2004-05-26  Eric Fry <efry at users.sourceforge.net>
	* Fixed readied inventory when saving.
	* Fixed Party names when loading.
	* Eggs are nolonger saved twice if eggs are shown on map.
	* Added clean up code to ObjManager and Egg manager.
	* Note! There is a bug somewhere in the load/save code where
	  we are losing objects. I'll have a look into this shortly.

2004-05-25  Eric Fry <efry at users.sourceforge.net>
	* More work on saving.
	* You can now save and load a game in the new nuvie save format.
	* Readied objects aren't working correctly after a save/load. I'll
	  fix that soon.
	* At the moment it isn't posible to load a game while in the middle
	  of another game. I need to fix the cleanup routines in a number
	  of classes before we can load a game over the top of another.
	* You can try saving your game by clicking on the save button in
	  the new savedialog window. Press 's' while playing to see the new
	  savedialog.

2004-05-24  Eric Fry <efry at users.sourceforge.net>
	* Work on new Load/Save system.
	* Added SaveGame class.
	* Added facility to load a new save game using the lzobjblk and
	  lzdngblk files.
	* I still need to do a lot of work on the save system before we
	  can save properly.

2004-05-19  Eric Fry <efry at users.sourceforge.net>
	* Fixed a buffer overrun bug in MapWindow::look().
	  Coords where being passed in map format when look() required
	  coords in MapWindow format. This was overreading the
	  tmp_map_buf which was leading to strange results when looking at
	  things on the map.
	* Added ObjManager::set_obj_tile_num() in attempt to hide egg objects
	  on the map. I'm not too sure if we'll end up going this way.

2004-05-18  Eric Fry <efry at users.sourceforge.net>
	* ObjManager: Split the main surface object index into 64 smaller
	  chunk indexes. This should help with saving.
	* Added SaveSlot class. This is the save data widget in the SaveDialog.

2004-05-10  Eric Fry <efry at users.sourceforge.net>
	* Added SaveDialog class.
	* Moved save dialog code into the new SaveDialog class.
	* Hooked up save dialog close callbacks. It is now possible to close
	  the save dialog by clicking the cancel button or pressing the escape
	  key.

2004-05-10  Eric Fry <efry at users.sourceforge.net>
	* Added GUI_ScrollBar, GUI_Scroller and a new generic callback
	  class GUI_CallBack
	* Added SaveManager class. This is still in the early stages
	  of development. You can call up the dialog by pressing the
	  's' key. Be aware that you cannot close the save manager dialog
	  after opening it. I'll fix that when I start on the button
	  callbacks.
	* Changed the background colour of GUI dialogs. This should help them
	  stand out over the game background textures.

2004-04-11  Eric Fry <efry at users.sourceforge.net>
	* Fixed a bug in game loading sequence.
	  ObjManager::loadObjs() must be called before Actors are initialised
	  and the mapwindow is updated.

2004-04-09  Joseph Applegate <sb-x at users.sourceforge.net>
	* UseCode: Disabled the "Telekinesis" usage of shovel. (must be readied)
	  - Added correct descriptions of red & blue potions. They don't do
	    anything yet. [ 891645 ]
	  - Added Torch. It doesn't light the area around you yet! [ 860198 ]
	  - GET & READY events are implemented now.
	  - Added backpack.
	* Backpacks and other containers can now be used as containers, even if
	  they were empty on load. This has forced object loading to be moved to
	  after UseCode is instantiated in Game::loadGame(). Fixes [ 887980 ].
	* New Event mode WAIT now set when talking to someone. It may replace
	  Player::uncontrolled. Fixes [ 841967 ].
	* New methods ObjManager::get_obj_from_stack() and
	  UseCode::destroy_obj().
	* Fixed a crash when eating food by double-clicking it.

2004-04-07  Joseph Applegate <sb-x at users.sourceforge.net>
	* Inventory: The prompt is now displayed after using or looking at any
	  object in the inventory, using keyboard or mouse.
	* Objects are no longer Un/Readied when attempting to LOOK at or USE
	  them with the mouse.
	* Added keyboard USE. Fixes [ 914958 ].

2004-04-05  Joseph Applegate <sb-x at users.sourceforge.net>
	* Fixed bug where you couldn't enter a moongate to the left or right
	  of the Avatar (which doesn't go anywhere). [ 916717 ]
	* Shrines should now correctly check your experience before raising your
	  level. [ 903773 ]

2004-04-04  Eric Fry <efry at users.sourceforge.net>
	* Added GUI_Dialog class. I forgot to add GUI_Dialog class in
	  yesterdays update.

2004-04-03  Eric Fry <efry at users.sourceforge.net>
	* Renamed sound/adplug/player.cpp|h files to
	  sound/adplug/adplug_player.cpp|h This should fix a compiler
	  filename clash when building Nuvie using the autoconf build
	  environment under Mac OS X.
	* Added config variable to GUI class.
	* Added GUI::get_data_dir() This method retrieves the datadir
	  path from the config file.
	* Added GUI_Dialog class. This class replaces GUI_Area as a base
	  class for dialog widgets. It is moveable and has textured borders! :-)

2004-03-27  Joseph Applegate <sb-x at users.sourceforge.net>
	* Added Dungeon Deciet to the teleporter list under "Dungeons". Some
	  destinations there were moved to "Other".
	* Converse: Added variable 0x23: contains previous player input
	  Removed a few old C-strings.
	  Added instructions INPUTSTR (just removed the error message) and
	  INDEXOF. The ENDDATA code is checked for in string lists.

2004-03-25  Eric Fry <efry at users.sourceforge.net>
	* You can now move GUI_Areas around the screen. This means you can
	  drag the quit dialog around. ;-)
	* Added grab_focus/release_focus methods to GUI_Widget.
	* Fixed GUI_Widget focus code to allow mouse events to be directed to
	  the focused widget.
	* Added force_full_redraw() to GUI. Calling this method will cause all
	  widgets to do a full redraw on the next call to GUI::Display().
	* Added GUI:get_gui()

2004-03-16  Eric Fry <efry at users.sourceforge.net>
	* Eggs now spawn at the destination when using the red moon gate.

2004-03-15  Eric Fry <efry at users.sourceforge.net>
	* Fixed Escape. Escape now skips a turn. Pass!
	* Added use:fan. This just prints "You feel a breeze." at the moment.
	  It should change the wind direction. When we implement wind that
	  is. ;-)
	* Renamed variable can_twitch to can_move in the Actor class.
	* Fixed small glitch in the new schedule loading code. Lord British's
	  schedule entries weren't being loaded.
	* Added an Actor 'tile style' enum to U6ActorTypes. This is either
	  single, double, quad, or multitile.
	* Fixed an issue with actors standing on their seats when loading the
	  savegame data.
	* Added U6 Actor alignment enum type. This isn't used yet.
	* Fixed bug with gargoyle and cyclops Actors not loading with the
	  correct frame_n. [ 886425 ] "Actors don't collect all their tiles
	  immediately".

2004-03-14  Eric Fry <efry at users.sourceforge.net>
	* Added custom music selection back in to nuvie. Nuvie can now play
	  any music file supported by SDL_Mixer. We should really write some
	  docs for all this stuff. ;)
	* Incorporated Marc Winterrowd's schedule loading patch. This patch
	  fixes an over run bug in the Actor schedule loading code.
	* The Nuvie project is one year old today!

2004-03-11  Eric Fry <efry at users.sourceforge.net>
	* Added SDL.h include into main.cpp. This should enable stdout/err
	  redirection to file on win32 systems. Thanks to Marc Winterrowd for
	  finding that out.
	* Changed some #include <SDL.h> statements to "SDL.h".

2004-03-10  Eric Fry <efry at users.sourceforge.net>
	* Removed SDL_Init(SDL_INIT_AUDIO) from SoundManager and replaced with
	  SDL_InitSubSystem (SDL_INIT_AUDIO)

2004-03-09  Eric Fry <efry at users.sourceforge.net>
	* Removed redundant screen update call from InventoryWidget.
	* Simplified inventory display clearing logic. Replaced 12 clear calls
	  with 1 clear call.

2004-03-07  Eric Fry <efry at users.sourceforge.net>
	* Added more audio config options. You can now selectively turn off
	  music & sound effects.
	* Added enable_cursors config option. You can now enable/disable mouse
	  cursors.

2004-03-03  Eric Fry <efry at users.sourceforge.net>
	* A small fix to get music working on win32.

2004-03-02  Eric Fry <efry at users.sourceforge.net>
	* Music should play at the correct times in U6. Hornpipe.m when you use
	  a boat, Engage.m when you are in combat mode etc.
	* Fixed a small lockup when not entering any values for alt-214
	  teleport cheat.

2004-02-28  Eric Fry <efry at users.sourceforge.net>
	* Cleaned up schedule loading code.
	* Music stops when in talk mode.
	* Added in_combat_mode flag to Party class.
	* Map related sfx are only updated when the mapwindow changes.

2004-02-24  Willem Jan Palenstijn <wjpalenstijn at users.sourceforge.net>
	* actors/ActorManager.cpp: read all of 'schedule' (was missing 2 bytes)
	* ObjManager.cpp: delete/delete[] mismatch
	* Makefile.common: add U6ObjectTypes.h to source list
	* MsgScroll.cpp, Converse.cpp, ConverseInterpet.cpp:
	  converted several functions/variables to std::strings.
	  I'm fairly sure the new code is functionally equivalent to the old
	  code, but if I broke something, let me know and I'll fix it.

2004-02-23  Eric Fry <efry at users.sourceforge.net>
	* MsgScroll.cpp: Added has_input() This returns true when there is input
	  ready.
	  - get_input() now returns a std::string instead of a private c string.
	    The teleporters menu should work again now.
	* MapWindow.cpp: Renamed tmp_buf to tmp_map_buf.
	  - Added tmp_map_width, tmp_map_height variables.
	  - Increased tmp_map_width to prevent a buffer overrun when checking
	    for blank tiles around objects on boundary tiles.
	    Thanks to Willem for spotting that one.

2004-02-22  Willem Jan Palenstijn <wjpalenstijn at users.sourceforge.net>
	* Cursor.cpp: initialize Cursor::hidden
	* GUI/GUI_Widget.cpp, TileManager.cpp: initialize member vars

2004-02-22  Eric Fry <efry at users.sourceforge.net>
	* Added a version of U6ObjectTypes.h to fix cvs compile.
	* Added Cursor class to XCode build system.

2004-02-21  Joseph Applegate <sb-x at users.sourceforge.net>
	* Eggs no longer try to line up actors of the same type (they might be
	  grouped later by alignment), but try to toss actors within a smaller
	  area. The first actor out always stays at the egg location. The hatch
	  probability is checked for each new actor.
	* Game cursors for U6 are now loaded and displayed. The system cursor is
	  used if this isn't possible. The main functions (such as
	  set_mouse_pointer()) are in Game for now. (removed from screen)
	  Using the mouse pointers in various places (mostly MapWindow).
	* Mouse-walking can be done with left or right mouse buttons (like U6).
	* UseCode: Moved usecode objects to a static array or U6ObjectTypes.
	  This is easier to use and less prone to error. Usecode is referenced
	  by a U6ObjectType pointer instead of index number. The new type has
	  a properties setting we can use for containers.
	  Various has_*code() checks changed to a single has_usecode().
	  Added Game reference to ctors, because game is used frequently in
	  usecode functions.
	* GUI_Widget: MouseEnter/MouseLeave methods called when mouse crosses
	  boundary of a widget (not checking its visible state yet).
	* New utility methods in U6misc: print_bool, print_flags, and SDL_Rect
	  tests.

2004-02-19  Willem Jan Palenstijn <wjpalenstijn at users.sourceforge.net>
	* sound/SongAdPlug.cpp: fixed music slowdown

2004-02-18  Eric Fry <efry at users.sourceforge.net>
	* Adplug should fill the sound buffer at the right rate now.
	  Music should sound better now. But it is now slowing down after
	  about 20 seconds. I'll have to look into this further.

2004-02-16  Willem Jan Palenstijn <wjpalenstijn at users.sourceforge.net>
	* sound/*, Makefile.am: fixed build (include case, include dirs)
	* sound/SoundManager.cpp: show SDL_Mixer error when init fails
	* sound/SoundManager.cpp: changed buffer size to power of two

2004-02-16  Eric Fry <efry at users.sourceforge.net>
	* More work on U6 music. Native songs no longer require the songs.cfg
	  file. Song changes aren't very smooth at the moment. I'll probably
	  add some fading when changing songs.

2004-02-12  Eric Fry <efry at users.sourceforge.net>
	* Added a striped down version of AdPlug into nuvie.
	* Added an audio config section.
	* It is possible to play the original ultima6 .m adlib music tracks
	  in Nuvie.

	  Note! you will have to add entries into a song.cfg file in the
	  sounddir directory. I'll add proper support for native song files
	  soon.
	  The song.cfg file should look somthing like this.

	  Castle;/fullpath_to_u6/BRIT.M;
	  Random;/fullpath_to_u6/ULTIMA.M;
	  Random;/fullpath_to_u6/FOREST.M;
	  Random;/fullpath_to_u6/BOOTUP.M;
	  Random;/fullpath_to_u6/STONES.M;
	  Dungeon;/fullpath_to_u6/DUNGEON.M;
	  Gargoyle;/fullpath_to_u6/GARGOYLE.M;

2004-02-07  Jonathan Wright <nelno at nelno.com>
    * Lots of little changes for VisualC7 and MSCV 6 build:
      - added #pragma warning for forcing value to bool (got this a
        lot in .NET compiles, but it's only a minor performance warning from
        mixing bool and int)
      - Added new include directories for sound and fonts
      - changed some while (1) to for ( ; ; ) so that some "conditional
        expression is constant warnings" go away in MS VC builds.
      - added assignment operator to ConfigNode to fix warning "assignment
        operator cound not be generated" in VC 6 and VC 7.
      - added roundf (float f) functions.  VC 6 and 7 don't define this in
        math.h (C99 standard only?)
      - fixed warning for potential use of uninitialized variable (pW) in
        U6lzw.cpp (looked to me like this would be a problem with any properly
        formatted file, though).

2004-02-07  Willem Jan Palenstijn <wjpalenstijn at users.sourceforge.net>
	* sounds/*: fixed include case and added endlines at end of file
	* configure.ac: added check for SDL_mixer

2004-02-07  Eric Fry <efry at users.sourceforge.net>
	* Fixed the mysterious crash on multitile actors bug [ 890188 ].
	  Party members now dismount from horses before using ladders or caves.
	* Added keyboard commands to quit dialog. [ 874454 ] This was done by
	  adding a new class GUI_YesNoDialog. This still needs a little work.
	* Fixed a bug with ships. The Party would attempt to board the ship
	  even if you didn't have the correct deed.
	* You can now scroll back the MsgScroll buffer when in page break mode.
	  Not just at the input prompt.
	* Added Adrians sound support code. This has been commented out for the
	  time being. We need to add some config switches and support for
	  the original .m adlib music files.

2004-02-02  Eric Fry <efry at users.sourceforge.net>
	* You can now move objects onto tables.
	* Fixed some compiler issues with STL on older versions of gcc.
	  Removed references to vector::at and string::clear
	* Fixed Avatar moving while dragging object bug. [ 888666 ]

2004-01-31  Eric Fry <efry at users.sourceforge.net>
	* Rewrote the MsgScroll Class.
	  - You can now scroll back through the MsgScroll when in input mode.
	    Using the up/down arrow keys.
	  - Clicking on a word while in input mode will add the word to your
	    input.
	  - You can now have multiple fonts per line.
	* Added new font/fontmanager classes to Nuvie. These classes should
	  be used instead of Text. This should help us in supporting MD and SE
	  fonts.
	* Fixed a few compiler warnings. Removed unused variables.
 	* Fixed InventoryWidget bug [ 881842 ] where every inventory slot
	  displayed the empty slot tile.
	* Fixed leak when viewing temp actor portraits.
	* Eggs now spawn on load / level change.

2004-01-30  Joseph Applegate <sb-x at users.sourceforge.net>
	* Added ability to MOVE actors (with the keyboard).
	* Fixed: obvious logical AND/OR error in ConverseInterpret (shortcut
	  left values on the opstack) that caused a freeze.
	  assertion in inventory (don't assume ready-items are in inventory)
	  These were in bugtracker item [ 886597 ].
	  NuvieIOBuffer (write/seek)
	* A few compile fixes for MSVC.
	* Upcoming mouse pointer stuff in but commented out.

2004-01-28  Joseph Applegate <sb-x at users.sourceforge.net>
	* Replaced the quantity loop for things hatched from eggs. My last egg
	"fix" removed that, but now that fix is fixed. You can get multiple
	actors of the same type from an egg again. (check animal pens, shrines)
	* UseCode: Remove IN_CONTAINER bit when dumping objects from containers.

2004-01-27  Joseph Applegate <sb-x at users.sourceforge.net>
	* Added ability to READY and UNREADY objects with the keyboard
	  Press tab to move cursor to inventory, and return to ready/unready.
	  This is now hooked to Event::ready (which will move to PlayerActions)
	* Double-click to USE an object in the inventory works for readiable
	  objects (this introduces a slight delay in click-to-ready)
	* Actor: Various inventory management fixes. (in counting, adding, and
	  removing objects) This means Iolo's gather/split gold commands work
	  99% correct now. (it is taking gold from containers in Avatar's
	  inventory when it shouldn't, and I don't know how to determine the
	  maximum stack-quantity of objects)
	* Mice will pass/be passed by actors, and can go through mouseholes.

2004-01-24  Joseph Applegate <sb-x at users.sourceforge.net>
	* New alt-codes: 314-teleport to NPC,
	                 414-destination menu for lazy teleporters,
	                 456-morph npc appearance (forgot to mention last time)

2004-01-24  Joseph Applegate <sb-x at users.sourceforge.net>
	* Contents of eggs are now tossed out to a random location, if the egg
	  location is occupied by an actor. (the original U6 did some
	  interesting things with eggs; added a note to the TODO list)
	* ConverseInterpret: Either implemented or added placeholders for the
	  SLEEP, RESURRECT, INPUTSTR, DIV, and HASOBJ instructions. Thanks to
	  Paul Gilbert.
	* A walk delay is now imposed on continuous movement with the keyboard
	  or mouse. It can be set in Player::get_walk_delay().
	* Added Click & DoubleClick events to GUI_widget, along with the
	  necessary support functions. For now, a GUI_widget that defines
	  HandleEvent can't use these. All widgets' Idle() methods are called in
	  Event.
	* Removed Event::view_focus stuff. You now GUI::lock_input() on a
	  GUI_Widget that you wish to grab all events.
	* Mouse movement and actions on the MapWindow are more solid now. There
	  is still some minor work to complete on it.
	* Event: Much of the code in the handleKeyDown switch moved to new
	  public methods. (doAction/cancelAction/newAction) I took the new
	  doLook/doUse methods and replaced them with multiple use/look
	  incarnations. The messages printed should be accurate now. Each one
	  returns to the prompt when it is finished.
	* Solo/party mode switching implemented. The other party members will
	  oddly get stuck until you move the leader in Solo mode.
	* In preparation of the new MsgScroll that will hopefully be able to
	  convert to multiple fonts on any line, I've changed alt-code 214 to
	  be more like the original. (and use identical <>-escaped prompts) It
	  doesn't work aboard ship anymore.
	* Misc. fixes

2004-01-21  Willem Jan Palenstijn <wjpalenstijn at users.sourceforge.net>
	* Makefile.mingw, */Makefile.common: added new tools to Makefile.mingw

2004-01-20  Joseph Applegate <sb-x at users.sourceforge.net>
	* Alt-214 codes can be entered with the numeric keypad now.
	* Keys F1-F10 enabled to switch between party members and roster.
	* Fixed Sundials (allowing potentially other timed animations in
	  TileManager.
	* Added testing usecode for Eggs, and a new LOAD event. (unused)
	* Changed the way game-timers work, now having two queues in Event,
	  and using new game_ticks counter in GameClock. Game ticks are updating
	  with the game time, unlike moves.
	* Fun with GUI_Widget... (this is barely tested and will be cleaned up)
	  Left-click MsgScroll during conversation to keep scrolling,
	  Right-click to say bye (or say whatever is typed).
	  Double-click InventoryWidget to use an item.
	  Hold left mouse button in MapWindow to walk towards cursor.
	  Double-click left button MapWindow to use an object (not working
	  correctly yet) or talk to an actor.
	  Left-click in MapWindow to select an object or actor for the current
	  action (use, look, talk, get).
	* ADEMAS! (more fun with GUI_Widget)
	  Merged inventory-look/use changes from Adrian Boeing:
	  Left-click in InventoryWidget or DollWidget to select an object to
	  look at or use. (after entering the appropriate mode)
	  Divided Event::look() and use() into smaller, more modular functions.
	  (everything needs more testing)

2004-01-20  Eric Fry <efry at users.sourceforge.net>
	* Moved egg spawning code into its own method
	  spawn_egg(Obj *egg, uint8 hatch_probability);
	* Changed the container logic again. It turns out that x is always used
	  to find the container. But if the objblk_n > 1024 then you must add
	  1024 to x to find the correct container. So if y & 0x1 then add 1024
	  to x.

2004-01-18  Eric Fry <efry at users.sourceforge.net>
	* Added correct dithering tile offsets for SE.
	* Removed some DOS crlf's that slipped into the source tree.

2004-01-17  Eric Fry <efry at users.sourceforge.net>
	* Sam added dithered darkness. But forgot to write it up in the
	  ChangeLog. ;-)

2004-01-16  Eric Fry <efry at users.sourceforge.net>
	* Objects now spawn from eggs.
	* Actors can walk over or under other actors again. :) Might need to fix
	  actor ordering.

2004-01-16  Joseph Applegate <sb-x at users.sourceforge.net>
	* You can MOVE objects around with the keyboard now, and special usecode
	  may be called. You can't move actors yet.
	* UseCode events TIMED and MOVE added. New objects Powder Keg & Cannon.
	* New alt-code 300: show NPC portrait (this will be changed to "show
	  portrait number")
	* Portraits now only display until the player presses a key to continue.
	  Event has to switch focus to it and PortraitView has to set `waiting'
	  to "true".
	* Portrait: Fixed the incorrect portrait number references. Actor 0
	  displays no portrait (at least as a vehicle), shrines display no
	  portraits, and Exodus' portrait number was off by 3. You can see
	  gargoyles' portraits when you look at them now.
	* Converse: Hardcoded script numbers added from actors 188+,
	  including temporary NPCs. You can talk to Guards and Wisps now, and
	  the shrines use the correct conversations.
	* NPCs 188 to 200 are considered "always known" and their name is
	  displayed when you talk to them.
	* View focus added to EVENT. This lets us do things like display a
	  portrait temporarily, or browse inventory with the keyboard.
	  Unfortunately with the current event system it means more work has to
	  be done when you want to get user input (you have to switch the
	  focus). This should be managed by ViewManger in the future.
	* Event: A couple of functions added to make getting input and showing
	  portraits while switching focus to the appropriate view easier.
	* TimeQueue now operates in Real Time (milliseconds) and Game Time
	  (ticks/turns).
	* New timer TimedCallback added. It is a flexible method of setting a
	  callback function on any class to be called with the time is up, and
	  with user-defined data. The class has to inherit TimedCallbackTarget.
	* Use GameTimedCallback to do this in game ticks/turns.
	* GameClock: Time counter added. This counts the number of minutes
	  since start. Return this with get_time().
	* Other new methods to GameClock: get_turn() returns move_counter
	                                  get_ticks() returns SDL_Ticks()

2004-01-14  Eric Fry <efry at users.sourceforge.net>
	* Added the original hacked object creation. You can now use spam to
	  make hacked objects in Nuvie. These objects have an overflowed
	  frame_n. This makes them look like one object but behave like another.
	* A small MsgScroll rendering fix. The page break arrow now displays
	  on the last line of text not on a new line.
	* Added Sam Matthews and Jonathan E. Wright to the AUTHORS file.

2004-01-13  Eric Fry <efry at users.sourceforge.net>
	* Added use:beehive.
	* More work on eggs. There are two status flags that effect eggs.
	  I'm still not sure what these flags do exactly. So their names
	  in the source may change in the future.
	* Changed round() to roundf() as we were dealing with floats anyway.
	* Added a new alt-code. Alt-216 display current time. :-)

2004-01-12  Joseph Applegate <sb-x at users.sourceforge.net>
	* Tools: unpack_conv working again. (broken files were being produced
	  and repack -r didn't work because of U6Lib_n differences)

2004-01-11  Eric Fry <efry at users.sourceforge.net>
	* Fixed a crash on load bug. [ 874477 ] Nuvie would crash while loading
	  if the game was saved at night or in a dungeon. Nuvie was trying to
	  render the darkness globes before they had been initialized.

2004-01-10  Eric Fry <efry at users.sourceforge.net>
	* Added use:churn. Using a churn now makes butter. If you have a bucket
	  of milk in your inventory.
	* Fixed MsgScroll rendering. Some words were wrapped to the next line
	  when they could have fit. Text placement should be closer to the
	  original now. I've still got some work to do in MsgScroll.

2004-01-08  Eric Fry <efry at users.sourceforge.net>
	* Added Sam's optimized darkness patch. The Darkness code should be a
	  lot faster now.
	* Some work on weapon stats. I'm not completely sure how combat will
	  end up. But at least the combat numbers are written down someware. ;)

2004-01-02  Eric Fry <efry at users.sourceforge.net>
	* Added rolling pin to the list of readiable objects.

2003-12-31  Eric Fry <efry at users.sourceforge.net>
	* Added twitching to the hydra tenticles.
	* Nuvie will no longer show a blank portrait when looking at a
	  temp actor with no portrait.
	* Guards and wisps now show a portrait when you look at them.

2003-12-29  Eric Fry <efry at users.sourceforge.net>
	* MapWindow: Added permenant darkness to dungeon levels.
	* ObjManager: Added is_stackable method for checking if an object can
	  be pluralised.
	* Event: Fixed the "Look" event. It now says "They weigh" when looking
	  at an item with a quantity > 1.
	* U6Actor: Added dragon actors. I've also started Hydra support.

2003-12-25  Eric Fry <efry at users.sourceforge.net>
	* Some fixes for object weight. Inventory weight should be closer to the
	  original now.

2003-12-25  Eric Fry <efry at users.sourceforge.net>
	* Fixed an issue with containers. [ 864087 ] There are some comtainer
	  objects that don't reference their container through the x variable.
	  They seem to follow the container object in the objblk files. They
	  also appear to have a positive > 0 value for y.
	  I think their might still be some issues with calculating inventory
	  weight.

2003-12-21  Eric Fry <efry at users.sourceforge.net>
	* Fixed inventory display order. Nuvie was displaying the inventory
	  list in reverse order. Thanks to Dominus for spotting that one.

2003-12-20  Eric Fry <efry at users.sourceforge.net>
	* Work on horse usecode. Temporary Actors are used correctly when
	  mounting/dismounting horses.
	* The player can no longer use character horses eg Iolo's horse.

2003-12-14  Eric Fry <efry at users.sourceforge.net>
	* Fixed walk on pedastal bug. [ 791146 ]
	* Fixed lockup when walking to the top or left of the map. This only
	  really occured in the dungeon levels.

2003-12-13  Eric Fry <efry at users.sourceforge.net>
	* A fix for an infinite loop when removing temporary eggs.

2003-12-10  Eric Fry <efry at users.sourceforge.net>
	* Added proper worktype for cows and horses. They keep within the fenced
	  areas now.
	* Some minor tweeks for multi-tile actors.
	* Note! I've got a crash when I create two multi-tile
	  actors on the same spot. eg over an egg. I haven't tracked down
	  what's causing this crash yet. :(

2003-12-08  Eric Fry <efry at users.sourceforge.net>
	* Added egg support. Eggs now spawn Actors as you pass them by. :)
	  I've still got a bit to do on this. Eggs need to throw their contents
	  around the map. At the moment Actors are all spawning on top of their
	  egg. This is causing some problems for multi-tile actors. I'll fix
	  this soon. I've also got to handle the creation of non Actor objects.
	  This includes Reagents.
	* Added temp actor mangagement. Added the ability to create temp actors.
	* Added Use Cow. Using a cow will fill an empty bucket in the player's
	  inventory with milk.
	* Added Use Well. This will fill a bucket with water.
	* Added Apple XCode build configuration.

2003-12-04  Joseph Applegate <sb-x at users.sourceforge.net>
	* Fixed closed containers dumping contents.
	* Temp. fix added for horses disappearing after riding.
	* People riding horses dismount now before boarding a ship.

2003-12-03  Joseph Applegate <sb-x at users.sourceforge.net>
	* Starting from an in-vehicle savegame works correctly now.
	* Player: The party only follows if you are controlling the leader now,
	  but is moved if you are controlling a vehicle.
	  Player tells ActorManager the new player actor when set.
	* The player actor at start is found by looking at actor worktypes.
	* Renamed Actor::inventory_add_object(Obj*) to inventory_new_object(),
	  and it now returns an object pointer.
	* New object weight tests: can_carry_object(), can_carry_weight()
	* UseCode: Added some new searchables, and code for fountains (not fully
	  implemented) and shovels. Fixed bug in food code that could prevent
	  food/drinks from being removed properly when eaten.

2003-12-03  Eric Fry <efry at users.sourceforge.net>
	* Fixed double free when cleaning up temp objects.
	* Update darkness when creating a moongate.
	* Fixed crash when exiting ships.
	* Added in_vehicle to Party.

2003-12-03  Joseph Applegate <sb-x at users.sourceforge.net>
	* Objects are removed from temp. list when removed from the map.
	* Fixed segfault when getting objects and stacking them in inventory.

2003-12-02  Joseph Applegate <sb-x at users.sourceforge.net>
	* You can no longer walk diagonally between blocked squares. This fixes
	  walking over water.
	* Updated Horse code (can't use another horse while riding), and added
	  Codex of Ultimate Wisdom to book list.
	* Mirrors now showing reflection when NPC's pass by them. [ 716226 ]

2003-12-01  Joseph Applegate <sb-x at users.sourceforge.net>
	* Minor improvements made to how the party follows, in Party, PathFinder
	  and ZPath. They are a little more jumpy now, but that will be fixed in
	  the future. PathFinder path isn't cleared unless dest changes.
	* Timeouts added when you enter a dungon or vehicle, use a ladder, or
	  walk to a vehicle. If the party isn't at the target within a limited
	  number of moves, they will be moved there. Original U6 did this too.
	* Fixed infinite loop bug in money exchange with Teri at the mint.
	  (and potentially other NPCs) [ 841963 ]
	* New configuration options: party_all_the_time allows you to add/remove
	  anyone in the world to/from your party if you can talk to them (for
	  test purposes only of course ;)) and enable_hackmove lets any object
	  get moved with the mouse.
	* Karma is now reduced when taking objects owned by someone else (but
	  some objects don't have their OK_TO_TAKE flag set when they should).
	* Unusable actors aren't used. An object at the same location is always
	  used first.
	* New method in MapWindow to check if "in_dungeon_level()".
	* Party: Besides changes to following, new is_leader() method checks to
	  see if an actor is the party leader. Actor::set_in_party() is called
	  for maintenance when actors join/leave.
	* Actor U6Actor: Move counter added to help pathfinders, so
	  that actors may only walk a limited number of spaces per turn. This is
	  really touchy, so any future code changes that affect actor movement
	  should be done carefully. Forced moves won't check/alter the counter,
	  and vehicles have no move limit.
	* Fixed a glitch in set_direction(uint8) that wasn't updating direction
	  at all in some cases. But the actors now appear to loop walking frames
	  incorrectly. (don't know if this is a new issue)
	* Worktype location added to keep actors within a small area around
	  their schedule destination. *Actor::set_worktype() updates location.*
	  The activities Beg and Wander are now limited to a small area.
	* Player: Had to add a workaround for above movecounter limitation, so
	  that player can always move.
	* Karma add/subtract functions given default values.
	* TimedPartyMove TimedPartMoveToVehicle: Fix for walking to moongates
	  now uses new Actor::is_nearby() test.
	* ActorManager: Don't do scheduled activities if in the party.
	* UseCode: Holy flames can't be doused.
	  Object numbers of fire,poison,sleep,protection fields added.

2003-11-28  Eric Fry <efry at users.sourceforge.net>
	* Added proper check when using orb of moons. You can only use the
	  orb after saying 'orb' to Lord British.
	* Moved hour change check from Actor to ActorManager. ActorManager
	  only calls Actor::updateSchedule() when the hour changes.

2003-11-26  Eric Fry <efry at users.sourceforge.net>
	* Light globes are now not drawn for blacked out objects.

2003-11-25  Jonathan E. Wright <nelno at users.sourceforge.net>
	* Fixed VS .NET build to work with alpha blended darkness.
	* Fixed MSVC 6 build to work with alpha blended darkness.
	* Just found this file and realized what Eric meant by "update the
	  change log"... I thought you meant the change log in CVS.  Sorry. :)

2003-11-25  Eric Fry <efry at users.sourceforge.net>
	* Added Sam Matthew's Alpha blended darkness. :-) This is still a
	  little rough around the edges but it is looking really nice!
	* Fixed the palette rotation. It was rotating the wrong way.

2003-11-24  Eric Fry <efry at users.sourceforge.net>
	* Added Pieter Luteijn's Use orb code.
	* A small OS X compile fix. Added #ifdef check for _MSC_VER in
	  nuvieDefs.h

2003-11-23  Jonathan E. Wright <nelno at users.sourceforge.net>
    * Added Visual Studio .NET 2003 build configuration.

2003-11-20  Eric Fry <efry at users.sourceforge.net>
	* Fixed avatar portrait. It was out by 1. Thanks to Pieter Luteijn for
	  spotting that one. [ 845094 ]

2003-11-18  Eric Fry <efry at users.sourceforge.net>
	* More code cleaning.

2003-11-17  Eric Fry <efry at users.sourceforge.net>
	* Renamed U6def.h to nuvieDefs.h and moved it to the root dir.
	* Fixed Actor blocking. You can now move over and under certain actors.
	  Eg. you can walk over mice and under birds, dragons etc.

2003-11-16  Eric Fry <efry at users.sourceforge.net>
	* Header #include cleanup.

2003-11-15  Eric Fry <efry at users.sourceforge.net>
	* Fixed crash when entering caves on the gargoyle plane.
	* Added usecode for entering the red moongates.
	  It isn't currently possible to create moongates. As we need to
	  overhaul the Event system.
	  We also need to fix TimedPartyMove::timed so we can use the moongate
	  to travel to a destination on the same plane. At the moment you
	  can only travel to destinations on a different plane to the
	  moongate. :(
	* Added blocking checks for Use-passthrough
	* Changed "blocked!" message to "Not now!".
	* Added diagonal movement via the keypad.

2003-11-14  Eric Fry <efry at users.sourceforge.net>
	* Added day of week to GameClock
	* Added day of week to schedules.
	* Fixed the number of days in a month. Britannia has 28 day months.
	* Clean the screen after an unsuccessful drop.
	* Don't close doors if blocked. [ 841973 ]

2003-11-14  Eric Fry <efry at users.sourceforge.net>
	Merged Jonathan E. Wright's changes.
	They are...
	* Added Dragging from MapWindow to other GUI objects.
	* Added movement by the keypad.
	* Added Map::lineTest this method checks a line of sight from the
	  player to a point on the map for passability.
	* Made drag inventory->world, paperdoll->world, world->world,
	  world->paperdoll and world->inventory use lineTest to ensure the
	  player can reach the item and the spot where it is being dropped.
	* Show objects being dragged / dropped under cursor.

2003-10-30  Eric Fry <efry at users.sourceforge.net>
	* Temporary objects now clear on level change, teleport.

2003-10-29  Eric Fry <efry at users.sourceforge.net>
	* Moved temp obj addition into ObjManager::add_obj()
	* Added ObjManager::delete_obj() method to delete an object and any
	  container items it might hold.
	* Don't display actors with a 0 object number.

2003-10-27  Eric Fry <efry at users.sourceforge.net>
	* Started work on temp obj removal. This still needs work. It may
	  be quite unstable.
	* Added the ability to hide eggs via a config switch.

2003-10-19  Eric Fry <efry at users.sourceforge.net>
	* Changed ObjManager::is_passable return codes OBJ_STATUS_ to OBJ_ and
	  added proper OBJ_STATUS_ defines for Obj status bit flags.

2003-10-18  Eric Fry <efry at users.sourceforge.net>
	* Added a small tool for unpacking U6 FM-Towns audio files.
	  The tool extracts all samples in a given file as 16bit wav files.

2003-10-16  Eric Fry <efry at users.sourceforge.net>
	* Fixed rendering error with ships.
	* Fixed player sitting bug.

2003-10-14  Joseph Applegate <sb-x at users.sourceforge.net>
	* Party members will now walk up and enter skiffs and ships when using.
	* Blacksmith NPC's can sell you a horse. There is a serious bug here
	  that I haven't reproduced yet.
	* Certain objects should have proper tile animations now
	  (crank/chain/bell), so this fixes the relevant bug item. [ 713532 ]
	* Bells (like the one in Britain) can be used too, but still no sound.
	* TimedEvent: Timer functions moved from Event to new files
	* ObjManager TileManager: Tile animation control methods added here

2003-10-12  Eric Fry <efry at users.sourceforge.net>
	* Added "use" support for skiffs, ships and horses.
          Ship support is still a bit rough. Horse's disappear after use. :(
	  I'll fix this when we add the temp actor management methods into
	  ActorManager.

2003-10-07  Eric Fry <efry at users.sourceforge.net>
	* Added split-type actors. Cows, horses, etc.
	* Added twitch support for some multi-tile actors.
	* Some worktype tweaks.
	* Actor: changed old_obj_n to base_obj_n.

2003-10-07  Joseph Applegate <sb-x at users.sourceforge.net>
	* Objects can be used on other objects now (use-chaining). Right now
	  this works for keys (but only on doors), and potions (but only to
	  print a message).
	* Timers can start immediately, so entering dungeons and using ladders
	  starts as soon as the object is used. You can also exit dungeons now.
	* Searching of spaces adjacent to the player is possible now. You can
	  do this for secret doors, bags, and some other things. Other normal
	  containers must be "used".
	* Container contents are now printed in the message scroller when they
	  are removed from the container.
	* Looking at actors shouldn't display a weight if they are on an object.
	* Actor/MapWindow: couple of new methods here to return MapCoords

2003-10-06  Eric Fry <efry at users.sourceforge.net>
	* More work on multi-tile actors.
	* Added different movetypes for actors.
	* Added support for ships and skiffs. They can't be used yet
	  but it's a start. :)

2003-10-05  Eric Fry <efry at users.sourceforge.net>
	* Moved Actor walk info into a table. Most Actor types should move
	  around correctly now. This should fix the Sherry bug. [ 716209 ]
	* Added some object printing routines.

2003-09-16  Eric Fry <efry at users.sourceforge.net>
	* Quantities are only displayed for stackable items in InventoryWidget.
          Note I have still got to implement U6 key display eg 'A', 'B' etc.
	* Pressing the window manager's [X] button now brings up the
          quit dialog.

2003-09-14  Joseph Applegate <sb-x at users.sourceforge.net>
	* Fixed segfault when quitting during a conversation. (thanks wjp!)
	[ 765881 ]
	* Fixed HEAL bug that would prevent healer NPCs from getting the injured
	NPC number.

2003-09-14  Eric Fry <efry at users.sourceforge.net>
	* Reworked MsgScroll to handle lines in other fonts. I'm not completely
          satisfied with this. As you can only have one font per line. :(
	* You can now select an actor to talk to with either the 't' key or
          the 'Enter' key.
	* Signs should display in runic as required. [ 805253 ]
	* Fixed Look quantity bug. [ 742559 ]
	* Alt 214 now displays in "Location" Gargoylian. :)

2003-09-13  Eric Fry <efry at users.sourceforge.net>
	* Fixed wall reshaping bug with cookfires.
	* Partial fix for runic signs. This will not work with multi-line
          message strings. I'll fix that soon.

2003-09-11  Eric Fry <efry at users.sourceforge.net>
	* Finally Fixed the wall corner tile display bug. [ 713521 ] :)
	* Some code comments added.

2003-09-11  Eric Fry <efry at users.sourceforge.net>
	* Added arrows to InventoryWidget.

2003-09-10  Joseph Applegate <sb-x at users.sourceforge.net>
	* TimeQueue and Timers added to Event files. These should probably be
	moved into their own file(s).
	* Actor and Player respect "uncontrolled" flag on Player, preventing
	move of Player or MapWindow recentering.
	* The entire party properly walks towards ladders when used, or
	caves when entered, and reappears on the other side. You cannot exit
	dungeons yet.

2003-09-09  Eric Fry <efry at users.sourceforge.net>
	* Replaced gcc-3.3 with gcc in the Project Builder build system.
	* Added quantity strings to InventoryWidget
	* Event::Get Fixed weight check bug. Weight was aleady
	  multiplied by obj->qty

2003-09-07  Eric Fry <efry at users.sourceforge.net>
	* Fix for stackable items in Event::Get

2003-09-07  Eric Fry <efry at users.sourceforge.net>
	* MapWindow: You can now drop objects into containers on the map.
	* Event: Fixed the Get method. The object is now referenced by
	  Actor instead of being copied.
	* Added some more items to the TODO file.

2003-09-06  Eric Fry <efry at users.sourceforge.net>
	* Some win32 compile fixes (Thanks vividos)
	* More Drag and Drop work.
	* MapWindow will now only accept drops on passable tiles.

2003-09-04  Joseph Applegate <sb-x at users.sourceforge.net>
	* A few new U6 food items added, and the ability to enter dungeons (but
	you can't leave them yet).
	* Event: started event timer (untested)
	* Added some TODO notes

2003-09-04  Michael Fink <vividos at users.sourceforge.net>
	* Fixed most memory leaks
	* Updated MSVC project file

2003-09-04  Eric Fry <efry at users.sourceforge.net>
	* More Drag and Drop changes. Dragging an item from within the inventory
	  to a container should work correctly now.
	* It is now possible to ready/unready items by clicking or dragging.

2003-09-04  Eric Fry <efry at users.sourceforge.net>
	* Drag and Drop support added. You can now drag objects from the
	  inventory to the map. :)
	* New classes added GUI_DragManager, GUI_DragArea,
	  DollWidget & InventoryWidget.

2003-08-31  Eric Fry <efry at users.sourceforge.net>
	* Fixed a GUI_Widget redraw bug.

2003-08-27  Eric Fry <efry at users.sourceforge.net>
	* A small fix for inventory display.

2003-08-24  Eric Fry <efry at users.sourceforge.net>
	* Added Background widget. Floating dialogs should clear correctly now.

2003-08-23  Eric Fry <efry at users.sourceforge.net>
	* Added PartyView class.
	* Started to add readied objects to doll on InventoryView.

2003-08-22  Eric Fry <efry at users.sourceforge.net>
	* More work on views.
	* Added ActorView. Switching works with buttons.

2003-08-21  Eric Fry <efry at users.sourceforge.net>
	* The left and right arrow buttons now change the inventory view.
	* Stubs added for the other inventory buttons.
	* Fixed placement bug when re-adding an existing widget.
	* Screen: added method to generate an SDL_Surface for a given 8bit
          image buffer.

2003-08-18  Eric Fry <efry at users.sourceforge.net>
	* Converted the views over to the new GUI system.

2003-08-15  Eric Fry <efry at users.sourceforge.net>
	* Added quit dialog. (Note! this still needs some work.)
	* Merged GUI and Event event handlers.
	* Numerous GUI changes.

2003-08-14  Eric Fry <efry at users.sourceforge.net>
	* Initial import of the new GUI system.
	* Screen update code cleaned up a bit. Added update rects to improve
	  scaling proformance.

2003-08-03  Eric Fry <efry at users.sourceforge.net>
	* Added Twitching to Actors.
	* You can now sit on LB's throne correctly.
	* Added lute playing worktype. 0x95
	* Removed edible doors. ;)

2003-08-02  Joseph Applegate <sb-x at users.sourceforge.net>
	* Use usecode when looking at some objects
	* New usecode objects (still being tested): Several food items, mirrors
	* U6LibItem initialized to prevent crash while reading data.

2003-07-30  Joseph Applegate <sb-x at users.sourceforge.net>
	* Actor::is_nearby() distance reduced to 4x4
	* Added Beg worktype to U6Actor

2003-07-30  Eric Fry <efry at users.sourceforge.net>
	* Added various worktypes to U6Actor.
	   Walk in straight lines
	   Sleep ( Actors now sleep in their beds ;)
	   Wander around
	   Standing still
	* Actor now stores old obj_n and old_frame_n values. Used for
	  returning actors from sleep.
	* Fixed game.h reference style in Mac OS X build config. Thanks to
	  Brad Oliver for spotting that one. :)

2003-07-29  Joseph Applegate <sb-x at users.sourceforge.net>
	* Changed/added to Actor::set_direction()/face_location().
	* Actor walking can be given a delay (don't start for that many turns)
	* Long range path-finder improved. Short range still needs work.
	* Made game static/global. A Game instance can be retrieved from itself.
	* New distance methods of MapCoord, to check each direction.
	* Player: party movement and mapwindow re-centering is now in Actor
	* Event: any NPC can be followed/watched with alt-code 500.

2003-07-28  Eric Fry <efry at users.sourceforge.net>
	* Added preform_worktype() to U6Actor class.
	* Started to implement worktypes.

2003-07-27  Joseph Applegate <sb-x at users.sourceforge.net>
	* Fixed bug where y/n questions in conversations would prevent input
	and lock the game up.
	* Fix in Party.cpp for compiling with MSVC

2003-07-27  Eric Fry <efry at users.sourceforge.net>
	* compile fixed for Mac OS X.
	* added combat_mode to Actor.
	* Actors now load up with correct worktype from objlist.
	* Moved Actor* classes into actors/ sub-directory.
	* Setup Actor to be subclassed for the three different game types.
	* Added U6Actor.cpp/h
	* Party members now dodge other Actors. (This still needs work).

2003-07-26  Joseph Applegate <sb-x at users.sourceforge.net>
	* Actor, PathFinder: Path-finding/direction finding classes added and
	accessible from Actor. The path-finder is incomplete and distant
	destinations aren't reachable yet. There are still a few glitches.
	* Added some direction definitions that are at least easier to remember
	than 0, 1, 2, 3.
	* Game: Made map_window, obj_manager, and usecode made static so they
	can be easily accessed. The Game object itself should probably be static
	instead.
	* Map: Added get_actor() to get an actor at a location on the map.
	* New Type/Class MapCoord for easier passing of map/tile coordinates.
	MapWindow:in_window() checks to see if a map coordinate is on screen.
	* Party, Player: Party formation and movement implemented.
	When moving, other actors except party members block the player.
	* UseCode: is_unlocked_door() checks if object is door that can be opened.
	* Added classes: PathFinder AStar LPath ZPath

2003-07-18  Joseph Applegate <sb-x at users.sourceforge.net>
	* Usecode system extended to allow multiple "event" functions. Each
	object may have usecode executed when its event criteria are met.
	* Actor: Usecode event STEPTO checked when actors move toward an object.
	* ActorManager: Renamed actor_lookstr to look_actor.
	* Converse Player: Sacred Quest flag now being loaded, and is accessible
	in conversations.
	* U6UseCode: The guardian's barrier on the isle of the avatar blocks
	correctly when the avatar hasn't been given a quest.

2003-07-16  Joseph Applegate <sb-x at users.sourceforge.net>
	* Random strings said by Beh Lem and other NPC's (try patients in Cove)
	are printed correctly now, instead of resulting in "Unknown command."

2003-07-15  Eric Fry <efry at users.sourceforge.net>
	* Some small compile fixes.
	* Added Use Vortex. ;) Just for fun.

2003-07-15  Joseph Applegate <sb-x at users.sourceforge.net>
	* Added [Avatar] HP global var. for conversations, changed init. of
	PARTY* vars to number of followers, and increased number of vars to 36.
	* >=, <= operators fixed (tested with original U6 engine) This and above
	removes the extra Avatar in party listings (such as in shops.)
	*U6OP_RAND should no longer return values outside the given range,
	resolves issue of Lord British repeating things. (tracker item 755717)

2003-07-11  Joseph Applegate <sb-x at users.sourceforge.net>
	* Conversation interpreter is correctly skipping "buffer size" at start
	of non-Lzw-encoded scripts now. Should've been done already but maybe I
	rewrote that part and overlooked it.

2003-07-06  Joseph Applegate <sb-x at users.sourceforge.net>
	* Handle both upper and lower case y/n input (tracker item 765879)

2003-07-06  Eric Fry <efry at users.sourceforge.net>
	* Fixed some issues with NuvieIO classes. MD & SE now load again. ;)
	* Fixed Stone lion rendering issue in U6. Added support for force
	  lower tile flag when rendering.

2003-07-05  Eric Fry <efry at users.sourceforge.net>
	* Fixed typo in Project Builder project name. Most source files were
	  titled "Nuive" instead of "Nuvie". Thanks to Pieter Luteijn for
	  spotting that one. ;)
	* Nuvie now uses new NuvieIOFile classes for file access.

2003-07-04  Eric Fry <efry at users.sourceforge.net>
	* Added files for new IO classes. NuvieIO.cpp/h

2003-06-27  Eric Fry <efry at users.sourceforge.net>
	* Work on game loading. Added more error handling.

2003-06-26  Eric Fry <efry at users.sourceforge.net>
	* Added some gameselect functionality. You can now select which game
	  Nuvie will load from the config file or via the command line.
	* Work done on MD/SE MsgScroll support.
	* removed nuvie.cfg from repository, added nuvie.cfg.sample instead.

2003-06-22  Eric Fry <efry at users.sourceforge.net>
	* Removed U6 is_door method from ObjManager.
	* Better blacking support for MD & SE.
	* Added SEUseCode class.
	* Added some MD use codes. It is now possible to leave the capsule.
	* 0x is nolonger required on the hex numbers in ALT-214 teleport mode.

2003-06-21  Eric Fry <efry at users.sourceforge.net>
	* MD & SE now load their respective background graphics.
	* Reworked U6Shape, U6Lib_n and U6Bmp.

2003-06-21  Joseph Applegate <sb-x at users.sourceforge.net>
	* Select NPC's can now join and leave the party. HORSE cmds worked on.

2003-06-16  Joseph Applegate <sb-x at users.sourceforge.net>
	* Player: Added karma functions to set value.
	* Conversation class rearranged (to start adding support for MD and SE.)
	New ops handled: ADDKARMA, SUBKARMA, and NPC stats.

2003-06-14  Eric Fry <efry at users.sourceforge.net>
	* Work started on MD and SE support. Both games now load in a limited
	  capacity if a copy of U6 is present.

2003-06-08  Joseph Applegate <sb-x at users.sourceforge.net>
	* NPCs who should be working no longer tell you they are out-to-lunch.
	Incidentally this fix might have solved some other minor problems.

2003-06-08  Eric Fry <efry at users.sourceforge.net>
	* Added electric field switches.
	* Animated tiles now block correctly.

2003-06-03  Eric Fry <efry at users.sourceforge.net>
	* Added Drawbridge support. You should now be able to leave the
	  the castle properly.

2003-06-01  Eric Fry <efry at users.sourceforge.net>
	* Locked doors can only be opened when the avatar has the correct
	  key in their inventory.
	* Added MsgScroll descriptions for several usecode actions.

2003-05-31  Eric Fry <efry at users.sourceforge.net>
	* Use Lever now operates corresponding portcullis(s).
	* The Avatar now walks up to the edge of the map correctly.

2003-05-30  Eric Fry <efry at users.sourceforge.net>
	* Added UseCode,U6UseCode classes.
	* Fixed clocks.
	* Fixed look display for animated objects.
	* Added GameSelect class which will contain game selection menu etc.

2003-05-28  Markus Niemist <niemisto at users.sourceforge.net>
        * ObjManager: Many containers can now be used and items got out of
        them.
        * U6Shape: Added support for loading U6 shapes
        * Scale: Grapped Scale2x scaler from Exult CVS

2003-05-27  Eric Fry <efry at users.sourceforge.net>
	* ObjManager: Objects are now stored in an AVL Tree. This should
	  speed things up a bit on slower machines.

2003-05-25  Joseph Applegate <sb-x at users.sourceforge.net>
	* Actor/ObjManager: Update to inventory and statistic access methods.
	(adding/deleting items works, and set_hp(), get_maxhp() added)
	* ActorManager: New method actor_lookstr() to get generic description
	* Converse: "Heal" in NPC scripts implemented, and name display with
	portrait is limited to those NPC's that have met or follow the avatar
	* U6Lib_n: now handling (read or skip) 4byte filesize at start of files

2003-05-24  Eric Fry <efry at users.sourceforge.net>
	* Get support thanks to a patch by Markus Niemist.

2003-05-23  Eric Fry <efry at users.sourceforge.net>
	* Work done on object weight. "you see blah. I weighs x.x stones."
	* More stats loaded for actors. Str, Int, Dex, level, exp etc.
	* Work on InventoryView, weights and actor icon are now displayed.
	* name support added to PortraitView.

2003-05-21  Joseph Applegate <sb-x at users.sourceforge.net>
	* Portraits now display during conversations (at the start and when
	requested.)

2003-05-20  Eric Fry <efry at users.sourceforge.net>
	* work done on View system. Added ViewManager, View, PortraitView.
	* Added Portrait loading class.
	* portraits now display when looking at an actor.

2003-05-18  Joseph Applegate <sb-x at users.sourceforge.net>
	* Event and MsgScroll now use SDL Unicode translation to get character
	input.

2003-05-16  Joseph Applegate <sb-x at users.sourceforge.net>
	* Actor: New methods is_nearby(), face_location(), face_actor().
	* Converse: NPC name is now saved internally when it is first read.
	* Event: There are now different responses to different targets when
	trying to talk to "yourself" or nobody.
	Looking at or talking to someone in the avatar's party now always shows
	name, and name isn't shown for anyone else who player hasn't "met."
	Actors and player face other before talking.

2003-05-16  Joseph Applegate <sb-x at users.sourceforge.net>
	* Converse: Few more test-ops added to further improve shopkeepers'
	abilities.
	* New/Delete/Transfer object commands implemented.
	* Party: Functionality of contains_actor() moved to get_member_num(),
	and former method changed to call new one (and made inline.)

2003-05-15  Joseph Applegate <sb-x at users.sourceforge.net>
	* Converse: Many (most?) shopkeepers should work to some degree now, but
	the player can't actually get the items yet.

2003-05-13  Eric Fry <efry at users.sourceforge.net>
	* Event: Alt-213 info string & Alt-125 advance hour added.
	* InventoryView: Started work on inventory view.

2003-05-09  Eric Fry <efry at users.sourceforge.net>
	* Event: Alt-214 now teleports.

2003-05-09  Joseph Applegate <sb-x at users.sourceforge.net>
	* Event: Added alt-codes support. Hold ALT, and enter 3 numbers.

2003-05-09  Joseph Applegate <sb-x at users.sourceforge.net>
	* Player is initialized with a Party object now, and can return a
	pointer to it.
	* Rearranged some of conversation code. Access Party with Player.
	Support for a few more if-tests.

2003-05-07  Eric Fry <efry at users.sourceforge.net>
	* Fixed memory leak in MsgScroll::input_buf_add_char()
	* Fixed text rendering when in talk mode.
	* Fixed boundary check on cream buildings.

2003-05-07  Michael Fink <vividos at users.sourceforge.net>
	* Changed some parameter and return types from "char*" to
	"const char*" to clarify string constness
	* Rewrote Look text extraction

2003-05-07  Joseph Applegate <sb-x at users.sourceforge.net>
	* Player: get_gender() (returns avatar gender value, 0 or 1)
	* Actor: set_worktype()

2003-05-07  Eric Fry <efry at users.sourceforge.net>
	* Added Party class.
	* Started work on Actor inventories.
	* Player name now appears in prompt.

2003-05-05  Eric Fry <efry at users.sourceforge.net>
	* Added player name to Player class. Hooked it into Converse.

2003-05-04  Eric Fry <efry at users.sourceforge.net>
	* Added GameClock
	* Actors now follow their schedules.
	* Actors sit on chairs now.
	* Time of day works in talk mode.
	* Added Karma to Player class.

2003-05-03  Michael Fink <vividos at users.sourceforge.net>
	* Fixed some more memory leaks
	* Added handling of uncompressed files to U6Lzw

2003-05-02  Joseph Applegate <sb-x at users.sourceforge.net>
	* RETURN or ENTER sends "0" for single-number input in conversations

2003-05-02  Eric Fry <efry at users.sourceforge.net>
	* Ladders work correctly now. Thanks Jim. ;)
	* Look Picture.

2003-04-23  Willem Jan Palenstijn <wjpalenstijn at users.sourceforge.net>
	* Text: need <cctype> for isalpha()

2003-04-23  Joseph Applegate <sb-x at users.sourceforge.net>
	* Text: Quick edit to highlight keywords in text. This is -not- the
	correct way to do this, but it was easy and works for now.

2003-04-20  Joseph Applegate <sb-x at users.sourceforge.net>
	* Converse: new commands handled, and printed text expansion
	* MsgScroll: set_input_mode can accept a list of characters, and will
	only allow the input of those characters

2003-04-20  Joseph Applegate <sb-x at users.sourceforge.net>
	* Converse instance is now created with pointer to an ActorManager.
	* NPC flags added (initialized but not loaded yet in ActorManager)

2003-04-17  Joseph Applegate <sb-x at users.sourceforge.net>
	* Minor change to look more like original U6: `what?' and `Pass!'
	messages are displayed on unknown keys, and Spacebar, respectively.
	* And you can now "Escape" back to Move mode from Use/Look/Talk.
	* And the "look" keyword correctly shows description in conversation.

2003-04-17  Joseph Applegate <sb-x at users.sourceforge.net>
	* MsgScroll: Any key escapes from page break
	* Converse: Now handling if...else...endif by skipping blocks of script
	until it reaches end-of-scope. Only a few if-tests are implemented.
	* When talking to NPC's empty input says "bye".

2003-04-15  Michael Fink <vividos at users.sourceforge.net>
	* Fixed memory leaks

2003-04-11  Eric Fry  <efry at users.sourceforge.net>
	* Added page break to MsgScroll

2003-04-09  Eric Fry  <efry at users.sourceforge.net>
	* Work on MsgScroll class.
	* Added signposts, books and scrolls.

2003-04-08  Michael Fink <vividos at users.sourceforge.net>
	* Added MSVC project files and code fixes

2003-04-07  Eric Fry  <efry at users.sourceforge.net>
	* Use: secret door.
	* Use: ladder (started).

2003-04-06  Eric Fry  <efry at users.sourceforge.net>
	* Fixed shoreline animation.

2003-04-05  Eric Fry  <efry at users.sourceforge.net>
	* Intergrated Ryan's Scaler code.
	* Actors now twitch and move around.
	* Actors are now blacked properly.
	* Palette cycling.

2003-04-02  Eric Fry  <efry at users.sourceforge.net>
	* Windows are now working properly.
	* Work started on scaling.
	* Added little tool to unpack converse.a/b files

2003-03-30  Eric Fry  <efry at users.sourceforge.net>
	* Started Changelog.
	* Chests now open and close.
	* More work done on blacking.
	* MapWindow now draws to its own surface. Added Ultima6 map border
	tiles and trimmed map window down to 10x10 tiles.

